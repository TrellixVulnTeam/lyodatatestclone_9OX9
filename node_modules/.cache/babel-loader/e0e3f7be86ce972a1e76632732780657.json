{"ast":null,"code":"var _jsxFileName = \"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/FileManager/AddFiles.jsx\",\n    _s = $RefreshSig$();\n\nimport { Box, Button, Card, Container, FormHelperText, Grid, InputLabel, makeStyles, Select, TextField, Typography } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useDropzone } from 'react-dropzone';\nimport { db, storage, storageRef } from '../../firebase';\nimport { DropzoneArea } from 'material-ui-dropzone';\nimport Alert from '@material-ui/lab/Alert';\nimport { v4 as uuid } from 'uuid';\nimport ManualDashboardLayout from '../../components/ManualSidebar/ManualDashboardLayout';\nimport StepDashboardLayout from '../../components/StepSidebar/StepDashboardLayout';\nimport { useStorage } from '../../utils/useStorage';\nimport { firebaseLooper } from '../../utils/tools';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  paper: {},\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: '#141256'\n  },\n  form: {\n    width: \"100%\",\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    maxWidth: \"50%\",\n    background: \"#ff7a00\",\n    borderRadius: '20px',\n    margin: theme.spacing(3, 0, 2)\n  },\n  drag: {\n    border: \"4px dashed #fff\"\n  },\n  drop: {\n    textAlign: \"center\",\n    color: \"#4a47a3\",\n    fontFamily: \"roboto\"\n  },\n  backButton: {\n    margiinTop: \"30px\",\n    backgroundColor: \"#A997DF\",\n    color: \"white\"\n  },\n  wrapper: {\n    display: 'flex',\n    flex: '1 1 auto',\n    overflow: 'hidden',\n    paddingTop: 64,\n    [theme.breakpoints.up('lg')]: {\n      paddingLeft: 256\n    }\n  },\n  container: {\n    display: 'flex',\n    flex: '1 1 auto',\n    overflow: 'hidden'\n  },\n  content: {\n    flex: '1 1 auto',\n    height: '100%',\n    overflow: 'auto'\n  }\n}));\n\nconst AddFiles = ({\n  match\n}) => {\n  _s();\n\n  const [title, setTitle] = useState('');\n  const [desc, setDesc] = useState('');\n  const [createdAt, setCreatedAt] = useState('');\n  const [format, setFormat] = useState('');\n  const [type, setType] = useState('');\n  const date = moment(new Date()).format('DD/MM/YYYY');\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState('');\n  const [media, setMedia] = useState({\n    mediaData: null\n  });\n  const types = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\n  const videoTypes = [\"video/mp4\", \"video/mkv\", \"video/mov\"];\n  const audioTypes = [\"audio/mp3\", 'audio/mpeg'];\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n  const history = useHistory();\n\n  const handleReturn = () => {\n    history.go(-1);\n  };\n\n  const [indexD, setIndex] = useState([]);\n  useEffect(() => {}, []);\n\n  const handleChange = loadedFiles => {\n    let selectedFile = loadedFiles[0];\n    setFile(selectedFile);\n  };\n\n  const {\n    progress,\n    url\n  } = useStorage(file);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const index = indexD.length;\n    const steps = {\n      title,\n      desc,\n      url,\n      date\n    };\n\n    if ((title === null || title === void 0 ? void 0 : title.trim().length) === 0 || (desc === null || desc === void 0 ? void 0 : desc.trim().length) === 0) {\n      return setError(\"Empty spaces can't be added as input ! Please try again with valid data!\");\n    }\n\n    if ((url === null || url === void 0 ? void 0 : url.trim().length) === 0) {\n      return setError(\"No File Added\");\n    }\n\n    setLoading(true);\n    db.collection('FileManager').add(steps).then(() => {\n      setLoading(false);\n      setMessage('Step Added successfully !');\n      setError(\"\");\n      history.push('/file-manager');\n    });\n  };\n\n  const classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            py: 3,\n            style: {\n              backgroundColor: 'background.default',\n              minHeight: '100%'\n            },\n            children: /*#__PURE__*/_jsxDEV(Container, {\n              maxWidth: false,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.paper,\n                children: [/*#__PURE__*/_jsxDEV(Alert, {\n                  severity: \"info\",\n                  children: \"You are currently Adding New Files \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  component: \"h1\",\n                  variant: \"h3\",\n                  align: \"center\",\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Add  New File\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                  className: classes.form,\n                  onSubmit: handleSubmit,\n                  children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n                    severity: \"error\",\n                    children: error\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Grid, {\n                      container: true,\n                      spacing: 3,\n                      style: {\n                        marginRight: \"50px\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(Grid, {\n                        item: true,\n                        lg: 12,\n                        sm: 12,\n                        xl: 6,\n                        xs: 12,\n                        children: [/*#__PURE__*/_jsxDEV(TextField, {\n                          value: title,\n                          error: title.length > 30,\n                          variant: \"outlined\",\n                          margin: \"normal\",\n                          required: true,\n                          fullWidth: true,\n                          id: \"title\",\n                          label: \"Document Name\",\n                          name: \"title\",\n                          autoFocus: true,\n                          onChange: e => setTitle(e.target.value)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 164,\n                          columnNumber: 15\n                        }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                          children: [\"Title should be max \", title.length, \"/30 \"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 177,\n                          columnNumber: 15\n                        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                          value: desc,\n                          error: desc.length > 150,\n                          variant: \"outlined\",\n                          margin: \"normal\",\n                          required: true,\n                          fullWidth: true,\n                          rows: 7,\n                          name: \"step_description\",\n                          label: \"Description\",\n                          onChange: e => setDesc(e.target.value),\n                          id: \"step_description\",\n                          multiline: true\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 178,\n                          columnNumber: 15\n                        }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                          style: {\n                            marginBottom: '20px'\n                          },\n                          children: [\"Description should be max \", desc.length, \"/150\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 194,\n                          columnNumber: 15\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 156,\n                        columnNumber: 11\n                      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                        xs: 12,\n                        lg: 12,\n                        sm: 12,\n                        children: [/*#__PURE__*/_jsxDEV(Alert, {\n                          severity: \"warning\",\n                          children: \"Don't leave Media Field empty !\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 203,\n                          columnNumber: 7\n                        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 204,\n                          columnNumber: 7\n                        }, this), /*#__PURE__*/_jsxDEV(InputLabel, {\n                          variant: \"contained\",\n                          children: \"Add the New File\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 205,\n                          columnNumber: 8\n                        }, this), /*#__PURE__*/_jsxDEV(DropzoneArea, {\n                          showPreviews: true,\n                          dropzoneClass: classes.drop,\n                          showFileNames: true,\n                          onChange: loadedFiles => handleChange(loadedFiles),\n                          dropzoneText: \"Drag and Drop / Click to Add Files\",\n                          showPreviewsInDropzone: false,\n                          useChipsForPreview: true,\n                          showAlerts: false,\n                          filesLimit: 1,\n                          maxFileSize: 6000000\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 206,\n                          columnNumber: 8\n                        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                          children: [progress, \"% Uploaded\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 219,\n                          columnNumber: 6\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 198,\n                        columnNumber: 15\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 152,\n                      columnNumber: 11\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 11\n                  }, this), !loading && /*#__PURE__*/_jsxDEV(Button, {\n                    type: \"submit\",\n                    fullWidth: true,\n                    variant: \"contained\",\n                    color: \"primary\",\n                    className: classes.submit,\n                    disabled: title.length > 30 || desc.length > 150,\n                    children: \"Add File\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 23\n                  }, this), loading && /*#__PURE__*/_jsxDEV(Button, {\n                    type: \"submit\",\n                    fullWidth: true,\n                    variant: \"contained\",\n                    color: \"primary\",\n                    disabled: true,\n                    className: classes.submit,\n                    children: \"Adding Files, Please Wait...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 9\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(AddFiles, \"gCNi0hZKlPkxlDUCgBq1Hm/nBLE=\", false, function () {\n  return [useHistory, useStorage, useStyles];\n});\n\n_c = AddFiles;\nexport default AddFiles;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddFiles\");","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/FileManager/AddFiles.jsx"],"names":["Box","Button","Card","Container","FormHelperText","Grid","InputLabel","makeStyles","Select","TextField","Typography","React","useEffect","useState","useHistory","useDropzone","db","storage","storageRef","DropzoneArea","Alert","v4","uuid","ManualDashboardLayout","StepDashboardLayout","useStorage","firebaseLooper","moment","useStyles","theme","paper","avatar","margin","spacing","backgroundColor","form","width","marginTop","submit","maxWidth","background","borderRadius","drag","border","drop","textAlign","color","fontFamily","backButton","margiinTop","wrapper","display","flex","overflow","paddingTop","breakpoints","up","paddingLeft","container","content","height","AddFiles","match","title","setTitle","desc","setDesc","createdAt","setCreatedAt","format","setFormat","type","setType","date","Date","file","setFile","error","setError","media","setMedia","mediaData","types","videoTypes","audioTypes","loading","setLoading","message","setMessage","history","handleReturn","go","indexD","setIndex","handleChange","loadedFiles","selectedFile","progress","url","handleSubmit","e","preventDefault","index","length","steps","trim","collection","add","then","push","classes","minHeight","marginRight","target","value","marginBottom"],"mappings":"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","sourcesContent":["import { Box, Button, Card, Container, FormHelperText, Grid, InputLabel, makeStyles, Select, TextField, Typography } from '@material-ui/core'\nimport React, { useEffect, useState } from 'react';\nimport {useHistory} from 'react-router-dom'\nimport {useDropzone} from 'react-dropzone';\nimport {db, storage, storageRef} from '../../firebase'\nimport { DropzoneArea } from 'material-ui-dropzone';\nimport Alert from '@material-ui/lab/Alert';\nimport { v4 as uuid } from 'uuid'\nimport ManualDashboardLayout from '../../components/ManualSidebar/ManualDashboardLayout'\nimport StepDashboardLayout from '../../components/StepSidebar/StepDashboardLayout';\nimport { useStorage } from '../../utils/useStorage';\nimport { firebaseLooper } from '../../utils/tools';\nimport moment from 'moment';\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n   \n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: '#141256',\n  },\n  form: {\n    width:\"100%\",\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    maxWidth: \"50%\",\n      background: \"#ff7a00\",\n      borderRadius: '20px',\n      margin: theme.spacing(3, 0, 2),\n  },\n  drag: {\n \n  border: \"4px dashed #fff\",\n  },\n  drop: {\n    textAlign: \"center\",\n    color: \"#4a47a3\",\n    fontFamily: \"roboto\"\n  },\n  backButton: {\n      margiinTop: \"30px\",\n        backgroundColor: \"#A997DF\",\n        color: \"white\",\n        \n    },\n    wrapper: {\n  display: 'flex',\n  flex: '1 1 auto',\n  overflow: 'hidden',\n  paddingTop: 64,\n  [theme.breakpoints.up('lg')]: {\n    paddingLeft: 256\n  },\n\n  },\n  container: {\n      display: 'flex',\n  flex: '1 1 auto',\n  overflow: 'hidden'\n  },\n  content: {\n    \n      flex: '1 1 auto',\n  height: '100%',\n  overflow: 'auto'\n    },\n}));\n\n\nconst AddFiles = ({match}) => {\n\n\n  const [title, setTitle] = useState('')\n  const [desc, setDesc] = useState('');\n  const [createdAt, setCreatedAt] = useState('');\n  const [format, setFormat] = useState('')\n   const [type, setType] = useState('');\n const date= moment(new Date()).format('DD/MM/YYYY')\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState('')\n  const [media, setMedia] = useState({\n    mediaData: null\n  })\n   const types = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\n   const videoTypes = [\"video/mp4\", \"video/mkv\", \"video/mov\"];\n   const audioTypes = [\"audio/mp3\", 'audio/mpeg']\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('')\n  const history = useHistory();\n  const handleReturn = () => {\n    history.go(-1)\n  }\n  const [indexD, setIndex] = useState([])\n  useEffect(() => {\n    \n  }, [])\n  const handleChange = (loadedFiles) => {\n        let selectedFile = loadedFiles[0]\n        setFile(selectedFile)\n       \n    }\n    const { progress, url } = useStorage(file);\n\n    const handleSubmit = (e) => {\n    e.preventDefault();\n    const index = indexD.length\n    const steps = {title, desc, url, date};\n    \n    if(title?.trim().length===0 || desc?.trim().length === 0 ){\n      return setError(\"Empty spaces can't be added as input ! Please try again with valid data!\")\n    }\n    if(url?.trim().length===0){\n      return setError(\"No File Added\")\n    }\n    setLoading(true);\n    db.collection('FileManager').add(steps).then(()=>{\n      setLoading(false)\n      setMessage('Step Added successfully !')\n      setError(\"\")\n      history.push('/file-manager')\n    })\n  }\n\n \n \n\n  const classes= useStyles();\n    return (\n      <>\n      \n        <div >\n        <div >\n          <Card >\n            <Box\n               py={3}\n              style={{\n                backgroundColor: 'background.default',\n                minHeight: '100%',\n              }}\n            >\n              <Container  maxWidth={false}>\n          <div className={classes.paper}>\n            <Alert severity=\"info\">You are currently Adding New Files </Alert>\n            <br/>\n            <Typography component=\"h1\" variant=\"h3\" align='center'>\n          <b>Add  New File</b>\n        </Typography>\n        <form className={classes.form} onSubmit={handleSubmit}>\n          {error && <Alert severity='error'>{error}</Alert>}\n          <div style={{display: 'flex'}}>\n          <Grid \n           container\n           spacing={3}\n          style={{marginRight: \"50px\"}} >\n          <Grid\n          item\n            lg={12}\n            sm={12}\n            xl={6}\n            xs={12}\n          >\n           \n              <TextField\n              value={title}\n              error={title.length > 30}\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"title\"\n                label=\"Document Name\"\n                name=\"title\"\n                autoFocus\n                onChange={(e) => setTitle(e.target.value)}\n              />\n              <FormHelperText>Title should be max {title.length}/30 </FormHelperText>\n              <TextField\n              value={desc}\n              error={desc.length > 150}\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                rows={7}\n                name=\"step_description\"\n                label=\"Description\"\n                onChange={(e) => setDesc(e.target.value)}\n                id=\"step_description\"\n                multiline\n               \n                \n              />\n              <FormHelperText  style={{marginBottom: '20px'}}>Description should be max {desc.length}/150</FormHelperText>\n          </Grid>\n         \n          \n              <Grid\n            xs={12}\n            lg={12}\n            sm={12}\n            >\n      <Alert severity=\"warning\">Don't leave Media Field empty !</Alert>\n      <br/>\n       <InputLabel variant=\"contained\">Add the New File</InputLabel>\n       <DropzoneArea\n       showPreviews={true}\n       dropzoneClass={classes.drop}\n        showFileNames\n        onChange={(loadedFiles) => handleChange(loadedFiles)}\n        dropzoneText=\"Drag and Drop / Click to Add Files\"\n        showPreviewsInDropzone={false}\n         useChipsForPreview\n        showAlerts={false}\n        filesLimit={1}\n        maxFileSize={6000000}\n      />\n    \n     <h5>{progress}% Uploaded</h5>\n     \n     </Grid>       \n          </Grid>\n   \n     </div>\n\n         {!loading && <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            disabled={title.length > 30 || desc.length > 150}\n          >\n            Add File\n            </Button>}\n         {\n           loading && <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            disabled\n            className={classes.submit}\n          >Adding Files, Please Wait...</Button>\n         }   \n          </form>\n          </div>\n          \n        </Container>\n        </Box>\n          </Card>\n        </div>\n      </div>\n        \n        </>\n    )\n}\n\nexport default AddFiles"]},"metadata":{},"sourceType":"module"}