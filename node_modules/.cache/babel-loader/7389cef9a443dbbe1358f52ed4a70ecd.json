{"ast":null,"code":"var _regeneratorRuntime = require(\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _toConsumableArray = require(\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _classCallCheck = require(\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _assertThisInitialized = require(\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar _require = require('crypto'),\n    randomBytes = _require.randomBytes;\n\nvar _require2 = require('../../help/key_object'),\n    createSecretKey = _require2.createSecretKey;\n\nvar base64url = require('../../help/base64url');\n\nvar _require3 = require('../../help/consts'),\n    THUMBPRINT_MATERIAL = _require3.THUMBPRINT_MATERIAL,\n    PUBLIC_MEMBERS = _require3.PUBLIC_MEMBERS,\n    PRIVATE_MEMBERS = _require3.PRIVATE_MEMBERS,\n    KEY_MANAGEMENT_DECRYPT = _require3.KEY_MANAGEMENT_DECRYPT,\n    KEY_MANAGEMENT_ENCRYPT = _require3.KEY_MANAGEMENT_ENCRYPT,\n    KEYOBJECT = _require3.KEYOBJECT;\n\nvar Key = require('./base');\n\nvar OCT_PUBLIC = new Set();\nObject.freeze(OCT_PUBLIC);\nvar OCT_PRIVATE = new Set(['k']);\nObject.freeze(OCT_PRIVATE); // Octet sequence Key Type\n\nvar OctKey = /*#__PURE__*/function (_Key) {\n  \"use strict\";\n\n  _inherits(OctKey, _Key);\n\n  var _super = _createSuper(OctKey);\n\n  function OctKey() {\n    var _this;\n\n    _classCallCheck(this, OctKey);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    Object.defineProperties(_assertThisInitialized(_this), {\n      kty: {\n        value: 'oct',\n        enumerable: true\n      },\n      length: {\n        value: _this[KEYOBJECT] ? _this[KEYOBJECT].symmetricKeySize * 8 : undefined\n      },\n      k: {\n        enumerable: false,\n        get: function get() {\n          if (this[KEYOBJECT]) {\n            Object.defineProperty(this, 'k', {\n              value: base64url.encodeBuffer(this[KEYOBJECT].export()),\n              configurable: false\n            });\n          } else {\n            Object.defineProperty(this, 'k', {\n              value: undefined,\n              configurable: false\n            });\n          }\n\n          return this.k;\n        },\n        configurable: true\n      }\n    });\n    return _this;\n  }\n\n  _createClass(OctKey, [{\n    key: THUMBPRINT_MATERIAL,\n    value: // https://tc39.github.io/ecma262/#sec-ordinaryownpropertykeys no need for any special\n    // JSON.stringify handling in V8\n    function value() {\n      if (!this[KEYOBJECT]) {\n        throw new TypeError('reference \"oct\" keys without \"k\" cannot have their thumbprint calculated');\n      }\n\n      return {\n        k: this.k,\n        kty: 'oct'\n      };\n    }\n  }, {\n    key: KEY_MANAGEMENT_ENCRYPT,\n    value: function value() {\n      return new Set([].concat(_toConsumableArray(this.algorithms('wrapKey')), _toConsumableArray(this.algorithms('deriveKey'))));\n    }\n  }, {\n    key: KEY_MANAGEMENT_DECRYPT,\n    value: function value() {\n      return this[KEY_MANAGEMENT_ENCRYPT]();\n    }\n  }, {\n    key: \"algorithms\",\n    value: function algorithms() {\n      var _Key$prototype$algori;\n\n      if (!this[KEYOBJECT]) {\n        return new Set();\n      }\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return (_Key$prototype$algori = Key.prototype.algorithms).call.apply(_Key$prototype$algori, [this].concat(args));\n    }\n  }], [{\n    key: PUBLIC_MEMBERS,\n    get: function get() {\n      return OCT_PUBLIC;\n    }\n  }, {\n    key: PRIVATE_MEMBERS,\n    get: function get() {\n      return OCT_PRIVATE;\n    }\n  }, {\n    key: \"generate\",\n    value: function () {\n      var _generate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", this.generateSync.apply(this, _args));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function generate() {\n        return _generate.apply(this, arguments);\n      }\n\n      return generate;\n    }()\n  }, {\n    key: \"generateSync\",\n    value: function generateSync() {\n      var len = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 256;\n      var privat = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (!privat) {\n        throw new TypeError('\"oct\" keys cannot be generated as public');\n      }\n\n      if (!Number.isSafeInteger(len) || !len || len % 8 !== 0) {\n        throw new TypeError('invalid bit length');\n      }\n\n      return createSecretKey(randomBytes(len / 8));\n    }\n  }]);\n\n  return OctKey;\n}(Key);\n\nmodule.exports = OctKey;","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/jose/lib/jwk/key/oct.js"],"names":["require","randomBytes","createSecretKey","base64url","THUMBPRINT_MATERIAL","PUBLIC_MEMBERS","PRIVATE_MEMBERS","KEY_MANAGEMENT_DECRYPT","KEY_MANAGEMENT_ENCRYPT","KEYOBJECT","Key","OCT_PUBLIC","Set","Object","freeze","OCT_PRIVATE","OctKey","args","defineProperties","kty","value","enumerable","length","symmetricKeySize","undefined","k","get","defineProperty","encodeBuffer","export","configurable","TypeError","algorithms","prototype","call","generateSync","len","privat","Number","isSafeInteger","module","exports"],"mappings":"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","sourcesContent":["const { randomBytes } = require('crypto')\n\nconst { createSecretKey } = require('../../help/key_object')\nconst base64url = require('../../help/base64url')\nconst {\n  THUMBPRINT_MATERIAL, PUBLIC_MEMBERS, PRIVATE_MEMBERS,\n  KEY_MANAGEMENT_DECRYPT, KEY_MANAGEMENT_ENCRYPT, KEYOBJECT\n} = require('../../help/consts')\n\nconst Key = require('./base')\n\nconst OCT_PUBLIC = new Set()\nObject.freeze(OCT_PUBLIC)\nconst OCT_PRIVATE = new Set(['k'])\nObject.freeze(OCT_PRIVATE)\n\n// Octet sequence Key Type\nclass OctKey extends Key {\n  constructor (...args) {\n    super(...args)\n    Object.defineProperties(this, {\n      kty: {\n        value: 'oct',\n        enumerable: true\n      },\n      length: {\n        value: this[KEYOBJECT] ? this[KEYOBJECT].symmetricKeySize * 8 : undefined\n      },\n      k: {\n        enumerable: false,\n        get () {\n          if (this[KEYOBJECT]) {\n            Object.defineProperty(this, 'k', {\n              value: base64url.encodeBuffer(this[KEYOBJECT].export()),\n              configurable: false\n            })\n          } else {\n            Object.defineProperty(this, 'k', {\n              value: undefined,\n              configurable: false\n            })\n          }\n\n          return this.k\n        },\n        configurable: true\n      }\n    })\n  }\n\n  static get [PUBLIC_MEMBERS] () {\n    return OCT_PUBLIC\n  }\n\n  static get [PRIVATE_MEMBERS] () {\n    return OCT_PRIVATE\n  }\n\n  // https://tc39.github.io/ecma262/#sec-ordinaryownpropertykeys no need for any special\n  // JSON.stringify handling in V8\n  [THUMBPRINT_MATERIAL] () {\n    if (!this[KEYOBJECT]) {\n      throw new TypeError('reference \"oct\" keys without \"k\" cannot have their thumbprint calculated')\n    }\n    return { k: this.k, kty: 'oct' }\n  }\n\n  [KEY_MANAGEMENT_ENCRYPT] () {\n    return new Set([\n      ...this.algorithms('wrapKey'),\n      ...this.algorithms('deriveKey')\n    ])\n  }\n\n  [KEY_MANAGEMENT_DECRYPT] () {\n    return this[KEY_MANAGEMENT_ENCRYPT]()\n  }\n\n  algorithms (...args) {\n    if (!this[KEYOBJECT]) {\n      return new Set()\n    }\n\n    return Key.prototype.algorithms.call(this, ...args)\n  }\n\n  static async generate (...args) {\n    return this.generateSync(...args)\n  }\n\n  static generateSync (len = 256, privat = true) {\n    if (!privat) {\n      throw new TypeError('\"oct\" keys cannot be generated as public')\n    }\n    if (!Number.isSafeInteger(len) || !len || len % 8 !== 0) {\n      throw new TypeError('invalid bit length')\n    }\n\n    return createSecretKey(randomBytes(len / 8))\n  }\n}\n\nmodule.exports = OctKey\n"]},"metadata":{},"sourceType":"script"}