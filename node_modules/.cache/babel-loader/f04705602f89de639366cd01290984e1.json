{"ast":null,"code":"import _slicedToArray from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Button,Card,Toolbar,makeStyles,Dialog,DialogContent,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Typography,TextField,Fab}from\"@material-ui/core\";import{useEffect,useState}from\"react\";import{NavLink}from\"react-router-dom\";import DQRLayout from\"../../components/DQRLayout/DQRLayout\";import{db}from\"../../firebase\";import{firebaseLooper}from\"../../utils/tools\";import KeyboardArrowRightIcon from'@material-ui/icons/KeyboardArrowRight';import KeyboardArrowLeftIcon from'@material-ui/icons/KeyboardArrowLeft';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{layoutRoot:{backgroundColor:'whitesmoke',display:'flex',height:'100%',overflow:'hidden',width:'100%'},fab:{position:'fixed',bottom:theme.spacing(2),right:theme.spacing(2)},avatar:{margin:theme.spacing(1),backgroundColor:'#141256'},wrapper:_defineProperty({display:'flex',flex:'1 1 auto',overflow:'hidden',paddingTop:64},theme.breakpoints.up('lg'),{paddingLeft:250}),container:{display:'flex',flex:'1 1 auto',overflow:'hidden'},content:{padding:'20px',flex:'1 1 auto',height:'100%',overflow:'auto'}};});function DQRSafety(_ref){var match=_ref.match;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),activeId=_useState2[0],setActiveId=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),reports=_useState4[0],setReports=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setOpen=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),issuecomment=_useState8[0],setIssueComment=_useState8[1];var classes=useStyles();function handleOpen(){setOpen(true);}function handleClose(){setOpen(false);}useEffect(function(){db.collection('DQNewReport').doc(match.params.id).collection('content').doc('safety').collection('details').onSnapshot(function(snapshot){var data=firebaseLooper(snapshot);setReports(data);});},[]);function handleComment(id){db.collection('issueData').doc(id).onSnapshot(function(snapshot){var data=snapshot.data();setIssueComment(data.content);});}var handleChange=function handleChange(id){db.collection('issueData').doc(id).onSnapshot(function(snapshot){var data=snapshot.data();setIssueComment(data.content);});};function handleUpdateComment(id){db.collection('issueData').doc(id).update({content:issuecomment});}function activateId(id){setActiveId(id);}function getResponse(res){if(res===1){return/*#__PURE__*/_jsx(\"b\",{style:{background:'#BBE5B3 0% 0% no-repeat padding-box',borderRadius:'100px',border:'2px solid var(--unnamed-color-ffffff)'},children:\"Accepted\"});}else if(res===2){return/*#__PURE__*/_jsx(\"b\",{style:{background:'#FF616D 0% 0% no-repeat padding-box',borderRadius:'100px',border:'2px solid var(--unnamed-color-ffffff)'},children:\"Rejected\"});}else if(res===3){return/*#__PURE__*/_jsx(\"b\",{style:{background:'#FFEAC9 0% 0% no-repeat padding-box',borderRadius:'100px',border:'2px solid var(--unnamed-color-ffffff)'},children:\"Issued\"});}else{return/*#__PURE__*/_jsx(\"b\",{style:{background:'#CDF0EA 0% 0% no-repeat padding-box',borderRadius:'100px',border:'2px solid var(--unnamed-color-ffffff)'},children:\"Not Updated\"});}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DQRLayout,{match:match}),/*#__PURE__*/_jsx(\"div\",{className:classes.wrapper,children:/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsxs(Card,{className:classes.content,children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Typography,{variant:\"h1\",align:\"center\",gutterBottom:true,children:/*#__PURE__*/_jsx(\"b\",{children:\"Safety\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingRight:'5%',paddingLeft:'5%'},children:[/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{style:{background:'#4C4C6D',color:'white',font:'bold'},children:\"Description\"}),/*#__PURE__*/_jsx(TableCell,{style:{background:'#4C4C6D',color:'white',font:'bold'},align:\"right\",children:\"Cause\"}),/*#__PURE__*/_jsx(TableCell,{style:{background:'#4C4C6D',color:'white',font:'bold'},align:\"right\",children:\"Action\"}),/*#__PURE__*/_jsx(TableCell,{style:{background:'#4C4C6D',color:'white',font:'bold'},align:\"right\",children:\"Issue \"}),/*#__PURE__*/_jsx(TableCell,{style:{background:'#4C4C6D',color:'white',font:'bold'},align:\"right\",children:\"Options\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:reports.map(function(row){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{style:{background:'#E8F6EF'},component:\"th\",scope:\"row\",children:row.desc}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:row.cause}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:row.action}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:getResponse(row.response)}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:row.issue_id!==\"\"?/*#__PURE__*/_jsx(Button,{style:{background:'orange',color:'white'},onClick:function onClick(e){handleOpen(e);handleComment(row.issue_id);activateId(row.issue_id);},children:\"Check\"}):/*#__PURE__*/_jsx(\"p\",{children:\"N/A\"})})]},row.name);})})]})}),/*#__PURE__*/_jsxs(Dialog,{fullWidth:true,onClose:handleClose,open:open,children:[/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Close\"})}),/*#__PURE__*/_jsx(\"b\",{className:\"text-xl underline text-bold text-center mb-3\",children:\"Comment\"}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",value:issuecomment,onChange:function onChange(e){return setIssueComment(e.target.value);},className:\"text-xl text-blue-gray-500 text-center\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){handleUpdateComment(activeId);handleClose();},children:\"Update\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.fab,children:[/*#__PURE__*/_jsx(Fab,{component:NavLink,to:\"/DQR/\".concat(match.params.id,\"/Design-Specs\"),style:{marginRight:'20px'},color:\"primary\",\"aria-label\":\"add\",children:/*#__PURE__*/_jsx(KeyboardArrowLeftIcon,{})}),/*#__PURE__*/_jsx(Fab,{component:NavLink,to:\"/DQR/\".concat(match.params.id,\"/Attachments\"),style:{color:'white'},color:\"primary\",\"aria-label\":\"add\",children:/*#__PURE__*/_jsx(KeyboardArrowRightIcon,{})})]})]})})})]});}export default DQRSafety;","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/DQNewReports/DQRSafety.jsx"],"names":["Button","Card","Toolbar","makeStyles","Dialog","DialogContent","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Typography","TextField","Fab","useEffect","useState","NavLink","DQRLayout","db","firebaseLooper","KeyboardArrowRightIcon","KeyboardArrowLeftIcon","useStyles","theme","layoutRoot","backgroundColor","display","height","overflow","width","fab","position","bottom","spacing","right","avatar","margin","wrapper","flex","paddingTop","breakpoints","up","paddingLeft","container","content","padding","DQRSafety","match","activeId","setActiveId","reports","setReports","open","setOpen","issuecomment","setIssueComment","classes","handleOpen","handleClose","collection","doc","params","id","onSnapshot","snapshot","data","handleComment","handleChange","handleUpdateComment","update","activateId","getResponse","res","background","borderRadius","border","paddingRight","color","font","map","row","desc","cause","action","response","issue_id","e","name","target","value","marginRight"],"mappings":"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","sourcesContent":["import { Button, Card,Toolbar, makeStyles,Dialog,DialogContent, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow , Typography, TextField, Fab} from \"@material-ui/core\"\nimport { useEffect, useState } from \"react\"\nimport { NavLink } from \"react-router-dom\"\nimport DQRLayout from \"../../components/DQRLayout/DQRLayout\"\nimport { db } from \"../../firebase\"\nimport { firebaseLooper } from \"../../utils/tools\"\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\n\nconst useStyles = makeStyles((theme) => ({\n    layoutRoot: {\n     backgroundColor: 'whitesmoke',\n      display: 'flex',\n      height: '100%',\n      overflow: 'hidden',\n      width: '100%',\n  \n    },\n    fab: {\n      position: 'fixed',\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: '#141256',\n    },\n   wrapper: {\n    display: 'flex',\n    flex: '1 1 auto',\n    overflow: 'hidden',\n    paddingTop: 64,\n    [theme.breakpoints.up('lg')]: {\n      paddingLeft: 250\n    },\n    \n    },\n    container: {\n        display: 'flex',\n    flex: '1 1 auto',\n    overflow: 'hidden'\n    },\n    content: {\n     padding: '20px',\n        flex: '1 1 auto',\n    height: '100%',\n    overflow: 'auto'\n      },\n  }));\n\n  \nfunction DQRSafety({match}) {\n  const [activeId, setActiveId] = useState('')\n\tconst [reports, setReports] = useState([])\n\tconst [open, setOpen] = useState(false)\n\tconst [issuecomment, setIssueComment] = useState('')\n    const classes = useStyles()\n\n\tfunction handleOpen(){\n\t\tsetOpen(true)\n\t}\n\n\tfunction handleClose(){\n\t\tsetOpen(false)\n\t}\n\tuseEffect(() => {\n\t\tdb.collection('DQNewReport')\n\t\t.doc(match.params.id)\n\t\t.collection('content')\n\t\t.doc('safety')\n\t\t.collection('details')\n\t\t.onSnapshot(snapshot => {\n\t\t\tconst data = firebaseLooper(snapshot)\n\t\t\tsetReports(data)\n\t\t})\n\t}, [])\n\n\t function handleComment(id){\n   \n    db.collection('issueData').doc(id).onSnapshot(snapshot => {\n     const data = snapshot.data()\n     setIssueComment(data.content )\n    })\n\n}\nconst handleChange = (id) => {\n  db.collection('issueData').doc(id).onSnapshot(snapshot => {\n    const data = snapshot.data()\n    setIssueComment(data.content )\n   })\n}\nfunction handleUpdateComment(id){\n  db.collection('issueData').doc(id).update({content: issuecomment})\n}\nfunction activateId(id){\n  setActiveId(id)\n}\n\tfunction getResponse(res) {\n\t\tif(res === 1){\n\t\t\treturn(\n\n\t\t\t\t<b style={{background: '#BBE5B3 0% 0% no-repeat padding-box', borderRadius: '100px', border: '2px solid var(--unnamed-color-ffffff)'}}>Accepted</b>\n\t\t\t)\n\t\t}else if(res === 2){\n\t\t\treturn(\n\t\t\t\t<b style={{background: '#FF616D 0% 0% no-repeat padding-box', borderRadius: '100px', border: '2px solid var(--unnamed-color-ffffff)'}}>Rejected</b>\n\t\t\t)\n\t\t}else if (res === 3){\n\t\t\treturn(\n\t\t\t\t<b style={{background: '#FFEAC9 0% 0% no-repeat padding-box', borderRadius: '100px', border: '2px solid var(--unnamed-color-ffffff)'}}>Issued</b>\n\t\t\t)\n\t\t}else {\n\t\t\treturn(\n\t\t\t\t<b style={{background: '#CDF0EA 0% 0% no-repeat padding-box', borderRadius: '100px', border: '2px solid var(--unnamed-color-ffffff)'}}>Not Updated</b>\n\t\t\t)\n\t\t}\n\t}\n\treturn (\n\t\t<>\n\t\t<DQRLayout match={match}/>\n        <div className={classes.wrapper}>\n        <div className={classes.container}>\n          <Card className={classes.content}>\n          <hr />\n          <Typography variant='h1' align='center' gutterBottom><b>Safety</b></Typography>\n\t\t<div style={{paddingRight: '5%', paddingLeft: '5%'}}>\n\t\t\n\t\t\t\t <TableContainer component={Paper}>\n      <Table  aria-label=\"simple table\">\n        <TableHead>\n          <TableRow>\n            <TableCell style={{background: '#4C4C6D', color: 'white', font: 'bold'}}>Description</TableCell>\n            <TableCell style={{background: '#4C4C6D', color: 'white', font: 'bold'}} align=\"right\">Cause</TableCell>\n\t    <TableCell style={{background: '#4C4C6D', color: 'white', font: 'bold'}} align=\"right\">Action</TableCell>\n            <TableCell style={{background: '#4C4C6D', color: 'white', font: 'bold'}} align=\"right\">Issue </TableCell>\n            <TableCell style={{background: '#4C4C6D', color: 'white', font: 'bold'}} align=\"right\">Options</TableCell>\n          \n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {reports.map((row) => (\n            <TableRow key={row.name}>\n              <TableCell style={{background: '#E8F6EF'}} component=\"th\" scope=\"row\">\n                {row.desc}\n              </TableCell>\n              <TableCell align=\"right\">{row.cause}</TableCell>\n              <TableCell align=\"right\">{row.action}</TableCell>\n\t      <TableCell align=\"right\">{getResponse(row.response)}</TableCell>\n           \n              \n             <TableCell align=\"right\">\n\t\t\t {row.issue_id !== \"\"? <Button style={{background: 'orange', color: 'white'}} onClick={(e) => {\n                  handleOpen(e);\n                  handleComment(row.issue_id)\n                  activateId(row.issue_id)\n                }}>Check</Button> : <p>N/A</p>}\n\t\t  </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n    <Dialog fullWidth onClose={handleClose} open={open}>\n      <Toolbar>\n        <Button onClick={handleClose}>Close</Button>\n       \n      </Toolbar>\n              <b className='text-xl underline text-bold text-center mb-3'>Comment</b>\n              <TextField variant='outlined' value={issuecomment} onChange={(e) => setIssueComment(e.target.value)} className='text-xl text-blue-gray-500 text-center'/>\n              <Button onClick={(e) => {handleUpdateComment(activeId); handleClose()}}>Update</Button> \n    </Dialog>\n\t\t</div>\n\t\t<div className={classes.fab}>\n\t\t\t\t<Fab component={NavLink} to={`/DQR/${match.params.id}/Design-Specs`} style={{marginRight: '20px'}}   color=\"primary\" aria-label=\"add\">\n  <KeyboardArrowLeftIcon/>\n</Fab>\n\n\t\t\t<Fab component={NavLink} to={`/DQR/${match.params.id}/Attachments`}  style={{ color: 'white'}} color=\"primary\" aria-label=\"add\">\n  <KeyboardArrowRightIcon/>\n</Fab>\n\t\t</div>\n          </Card>\n        </div>\n      </div>\n\t\t\n    </>\n\t)\n}\n\nexport default DQRSafety\n"]},"metadata":{},"sourceType":"module"}