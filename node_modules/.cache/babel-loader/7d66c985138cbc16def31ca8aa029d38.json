{"ast":null,"code":"import _slicedToArray from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Dialog,DialogActions,Toolbar,DialogContent,DialogContentText,DialogTitle,TableBody,TableCell,TableRow,TextField,Typography}from\"@material-ui/core\";import{Alert,AlertTitle}from\"@material-ui/lab\";import{useState}from\"react\";import EditIcon from'@material-ui/icons/Edit';import DeleteIcon from'@material-ui/icons/Delete';import{db}from\"../../firebase\";import{useStorage}from\"../../utils/useStorage\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ApprovalCView(_ref){var data=_ref.data,match=_ref.match;var _useState=useState(data===null||data===void 0?void 0:data.name),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var types=[\"image/png\",\"image/jpeg\",\"image/jpg\"];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),open=_useState8[0],setOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),openDel=_useState10[0],setOpenDel=_useState10[1];function handleOpenDel(){setOpenDel(true);}function handleCloseDel(){setOpenDel(false);}function handleOpen(){setOpen(true);}function handleClose(){setOpen(false);}function handleUpdate(){db.collection('DQNew').doc(match.params.id).collection('content').doc('approval').collection('customer').doc(data===null||data===void 0?void 0:data.id).update({name:name});}function handleDelete(id){db.collection('DQNew').doc(match.params.id).collection('content').doc('approval').collection('customer').doc(id).delete();}var handleChange=function handleChange(e){var selectedFile=e.target.files[0];if(selectedFile){if(types.includes(selectedFile.type)){setError(null);setFile(selectedFile);}else{setFile(null);setError(\"Please select an image file (png or jpg)\");}}};var _useStorage=useStorage(file),progress=_useStorage.progress,url=_useStorage.url;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TableBody,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{style:{background:'#E8F6EF'},component:\"th\",scope:\"row\",children:\"Customer Name\"}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://lh3.googleusercontent.com/proxy/FLJX34gc1GsV3UCAUhSraLMjWBlZZNqDsYh5V1De6QQOFPC8f0p_NOOUb1tg5KJ0PHVOIVFH7BShlfTunqLUJps7ZTbjDdyPNmhXPNOJfufkMWiMNFom0Y_ywqqrVWlJ4rOkSQ\",width:\"350px\",height:\"250px\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Mon 21 Aug 2021\"})]},data===null||data===void 0?void 0:data.id)}),/*#__PURE__*/_jsxs(Dialog,{style:{alignItems:'center'},fullWidth:true,open:open,onClose:handleClose,children:[/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",gutterBottom:true,children:/*#__PURE__*/_jsx(\"b\",{children:\"Edit Details\"})}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(TextField,{style:{marginBottom:'3%'},value:name,variant:\"outlined\",fullWidth:true,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:data===null||data===void 0?void 0:data.url,height:\"350px\",width:\"450px\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleChange})]})]})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleUpdate,style:{backgroundColor:'orange',color:'whitesmoke'},children:\"Update\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openDel,onClose:handleCloseDel,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsxs(Alert,{severity:\"error\",variant:\"filled\",children:[/*#__PURE__*/_jsx(AlertTitle,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Delete\"})}),/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",children:\"Are You Sure You Want To Delete?\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{color:\"white\",id:\"alert-dialog-description\",children:\"Deleting will be a permanent action and data pervailing will be permanently deleted and can not be retrieved back.                    \"})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseDel,color:\"primary\",variant:\"outlined\",children:\"Disagree\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){return handleDelete(data===null||data===void 0?void 0:data.id);},color:\"secondary\",variant:\"outlined\",autoFocus:true,children:\"Agree\"})]})]})]});}export default ApprovalCView;","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/Approval/ApprovalCView.jsx"],"names":["Button","Dialog","DialogActions","Toolbar","DialogContent","DialogContentText","DialogTitle","TableBody","TableCell","TableRow","TextField","Typography","Alert","AlertTitle","useState","EditIcon","DeleteIcon","db","useStorage","moment","ApprovalCView","data","match","name","setTitle","error","setError","types","file","setFile","open","setOpen","openDel","setOpenDel","handleOpenDel","handleCloseDel","handleOpen","handleClose","handleUpdate","collection","doc","params","id","update","handleDelete","delete","handleChange","e","selectedFile","target","files","includes","type","progress","url","background","alignItems","marginBottom","value","backgroundColor","color"],"mappings":"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","sourcesContent":["import { Button, Dialog, DialogActions,Toolbar, DialogContent, DialogContentText, DialogTitle, TableBody, TableCell, TableRow, TextField, Typography } from \"@material-ui/core\"\nimport { Alert, AlertTitle } from \"@material-ui/lab\"\nimport { useState } from \"react\"\n\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { db } from \"../../firebase\";\nimport { useStorage } from \"../../utils/useStorage\";\nimport moment from \"moment\";\n\nfunction ApprovalCView({data, match}) {\n\tconst [name, setTitle] = useState(data?.name)\n\tconst [error, setError] = useState('')\n\tconst types = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\n\tconst [file, setFile] = useState(null)\n\tconst [open, setOpen] = useState(false)\n\tconst [openDel, setOpenDel] = useState(false)\n\t\n\tfunction handleOpenDel(){\n\t\tsetOpenDel(true)\n\t}\n\tfunction handleCloseDel(){\n\t\tsetOpenDel(false)\n\t\t\n\t}\n\t\n\tfunction handleOpen(){\n\t\tsetOpen(true)\n\t}\n\tfunction handleClose(){\n\t\tsetOpen(false)\n\t}\n\tfunction handleUpdate(){\n\t\tdb.collection('DQNew')\n\t\t.doc(match.params.id)\n\t\t.collection('content')\n\t\t.doc('approval')\n\t\t.collection('customer')\n\t\t.doc(data?.id)\n\t\t.update({name})\n\t}\n\tfunction handleDelete(id){\n\t\tdb.collection('DQNew')\n\t\t.doc(match.params.id)\n\t\t.collection('content')\n\t\t.doc('approval')\n\t\t.collection('customer')\n\t\t.doc(id)\n\t\t.delete()\n\t}\n\tconst handleChange = (e) => {\n        let selectedFile = e.target.files[0];\n        \n        if (selectedFile) {\n            if (types.includes(selectedFile.type)) {\n                setError(null)\n                setFile(selectedFile);\n            } else {\n                setFile(null);\n                setError(\"Please select an image file (png or jpg)\");\n            }\n        }\n       \n        \n    }\n\n    const {progress, url} = useStorage(file)\n\treturn (\n\t\t<>\n\t\t<TableBody>\n\t\n\t\t\t<TableRow key={data?.id}>\n\t\t\t<TableCell style={{background: '#E8F6EF'}} component=\"th\" scope=\"row\">\n\t\t\t\tCustomer Name\n\t\t\t</TableCell>\n\t\t\t<TableCell align=\"left\"><img src=\"https://lh3.googleusercontent.com/proxy/FLJX34gc1GsV3UCAUhSraLMjWBlZZNqDsYh5V1De6QQOFPC8f0p_NOOUb1tg5KJ0PHVOIVFH7BShlfTunqLUJps7ZTbjDdyPNmhXPNOJfufkMWiMNFom0Y_ywqqrVWlJ4rOkSQ\" width='350px' height='250px'/></TableCell>\n\t\t\t<TableCell align=\"left\">Mon 21 Aug 2021</TableCell>\n\t\t\t\n\t\t\t{/* <TableCell align=\"right\">\n\t\t\t\t<div>\n\t\t\t\t\t<Button  onClick={handleOpen}><EditIcon className='animate-bounce'/></Button>\n\t\t\t\t\t<Button onClick={handleOpenDel}><DeleteIcon className='hover:text-red-600'/></Button>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</TableCell> */}\n\t\t\t</TableRow>\n\t\t\n\t\t\t</TableBody>\n\t\t\t <Dialog style={{alignItems: 'center'}} fullWidth open={open} onClose={handleClose}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<Typography variant='h4' align='center' gutterBottom><b>Edit Details</b></Typography>\n\t\t\t\t\t<form  >\n\t\t\t\t\t<TextField style={{marginBottom: '3%'}} value={name} variant='outlined' fullWidth onChange={(e) => setTitle(e.target.value)}/>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<img src={data?.url} height='350px' width=\"450px\" />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<input type=\"file\" onChange={handleChange}/>\n\t\t\t\t\t</div>\n\n\t\t\t\t</form>\n\t\t\t\t</DialogContent>\n\t\t\t\t\n\t\t\t\t\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={handleClose}>Cancel</Button>\n\t\t\t\t<Button onClick={handleUpdate} style={{backgroundColor: 'orange', color: 'whitesmoke'}}>Update</Button>\n\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t\t{/* Open delete dialog */}\n\t\t\t <Dialog\n\t\t\t \n                    open={openDel}\n                    onClose={handleCloseDel}\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                >\n                  <Alert severity=\"error\" variant=\"filled\">\n                    <AlertTitle><strong>Delete</strong></AlertTitle>\n                    <DialogTitle id=\"alert-dialog-title\">{\"Are You Sure You Want To Delete?\"}</DialogTitle>\n                    <DialogContent>\n                    <DialogContentText color=\"white\" id=\"alert-dialog-description\">\n                        Deleting will be a permanent action and data pervailing will be permanently deleted and can not be retrieved back.                    </DialogContentText>\n                    </DialogContent>\n                    </Alert>\n                    <DialogActions>\n                    <Button onClick={handleCloseDel} color=\"primary\" variant=\"outlined\">\n                        Disagree\n                    </Button>\n                    <Button   onClick={(e) => handleDelete(data?.id)} color=\"secondary\" variant=\"outlined\" autoFocus>\n                        Agree\n                    </Button>\n                    </DialogActions>\n                </Dialog>\n\t\t\n\t\t</>\n\t)\n}\n\nexport default ApprovalCView\n"]},"metadata":{},"sourceType":"module"}