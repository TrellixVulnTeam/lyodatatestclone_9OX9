{"ast":null,"code":"import _regeneratorRuntime from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import Avatar from'@material-ui/core/Avatar';import Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import Checkbox from'@material-ui/core/Checkbox';import Link from'@material-ui/core/Link';import Grid from'@material-ui/core/Grid';import Box from'@material-ui/core/Box';import LockOutlinedIcon from'@material-ui/icons/LockOutlined';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import{useHistory}from'react-router-dom';import Alert from'@material-ui/lab/Alert';import{FormControl,FormHelperText,InputLabel,MenuItem,Select}from'@material-ui/core';import{useAuth}from\"../context/AuthContext\";import{db}from'../../firebase';import LogIn from'../LogIn/LogIn';import validator from'validator';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Copyright(){return/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\",children:['Copyright Â© ',/*#__PURE__*/_jsx(Link,{color:\"inherit\",href:\"\",children:\"Arizon Systems Pvt Ltd.\"}),' ',new Date().getFullYear(),'.']});}var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:'flex',flexDirection:'column',alignItems:'center'},avatar:{margin:theme.spacing(1),backgroundColor:\"#ff7a00\"},form:{width:'75%',// Fix IE 11 issue.\nmarginTop:theme.spacing(3)},submit:{margin:theme.spacing(3,0,2),backgroundImage:'linear-gradient(to left bottom, #fa630f, #fc8218, #fd9d29, #feb63f, #ffce59)',color:\"white\",borderRadius:'20px'}};});export default function AddUser(){var emailRef=useRef();var passwordRef=useRef();var passwordConfirmRef=useRef();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),firstName=_useState2[0],setFirstName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),lastName=_useState4[0],setLastName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),phone=_useState10[0],setPhone=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),role=_useState12[0],setRole=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),password=_useState16[0],setPassword=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),confirmPass=_useState18[0],setConfirmPass=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),loading=_useState20[0],setLoading=_useState20[1];var classes=useStyles();var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),admin=_useState22[0],setAdmin=_useState22[1];var history=useHistory();var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),url=_useState24[0],setUrl=_useState24[1];var _useAuth2=useAuth(),signup=_useAuth2.signup;useEffect(function(){if(currentUser.email==='admin@gmail.com'){setAdmin(true);}});var handleReturn=function handleReturn(){history.push('/users');};function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var userData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(password!==confirmPass)){_context.next=3;break;}return _context.abrupt(\"return\",setError(\"Passwords do not match\"));case 3:if(!(password.length<6)){_context.next=5;break;}return _context.abrupt(\"return\",setError(\"Weak Password ! Passwords should be atleast 6 characters\"));case 5:if(!(phone.length<10||phone.length>10)){_context.next=7;break;}return _context.abrupt(\"return\",setError(\"Phone Number should be 10 digits !\"));case 7:if(role==='Admin'){setAdmin(true);}if(validator.isEmail(email)){setError(\"\");}else{setError(\"Please put a valid email !\");}userData={firstName:firstName,lastName:lastName,email:email,password:password,phone:phone,role:role,username:username,admin:admin,url:url};_context.prev=10;setError(\"\");setLoading(true);_context.next=15;return signup(email,password);case 15:db.collection('users').add(userData).then(function(){history.push('/');window.location.reload();});_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](10);setError(\"Failed to create an account.This is either due to invalid input of email/ the email already exist in Database\");case 21:setLoading(false);case 22:case\"end\":return _context.stop();}}},_callee,null,[[10,18]]);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{component:\"main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:\"You are currently adding a new authenticated user!\"}),/*#__PURE__*/_jsx(Avatar,{className:classes.avatar}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h4\",children:\"Create User\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{required:true,fullWidth:true,error:firstName.length>20,children:[/*#__PURE__*/_jsx(TextField,{value:firstName,error:firstName.length>20,autoComplete:\"fname\",name:\"firstName\",required:true,variant:\"outlined\",id:\"firstName\",label:\"First Name\",autoFocus:true,onChange:function onChange(e){return setFirstName(e.target.value);}}),/*#__PURE__*/_jsx(FormHelperText,{children:\"length should be less than 20\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{required:true,fullWidth:true,variant:\"outlined\",error:lastName.length>20,children:[/*#__PURE__*/_jsx(TextField,{value:lastName,required:true,error:lastName.length>20,variant:\"outlined\",id:\"lastName\",label:\"Last Name\",name:\"lastName\",autoComplete:\"lname\",onChange:function onChange(e){return setLastName(e.target.value);}}),/*#__PURE__*/_jsx(FormHelperText,{children:\"length should be less than 20\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(FormControl,{required:true,fullWidth:true,variant:\"outlined\",children:/*#__PURE__*/_jsx(TextField,{value:email,required:true,variant:\"outlined\",id:\"email\",ref:emailRef,label:\"Email Address\",name:\"email\",autoComplete:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{required:true,fullWidth:true,variant:\"outlined\",error:username.length>20||username.length<6,children:[/*#__PURE__*/_jsx(TextField,{value:username,required:true,error:username.length>20||username.length<6,variant:\"outlined\",label:\"Username\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(FormHelperText,{children:\"Username should be atleast 6 characters and max 20 characters\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{required:true,fullWidth:true,variant:\"outlined\",children:[/*#__PURE__*/_jsx(TextField,{value:phone,variant:\"outlined\",required:true,name:\"password\",label:\"Phone Number\",type:\"Number\",id:\"phone\",autoComplete:\"current-password\",onChange:function onChange(e){return setPhone(e.target.value);}}),/*#__PURE__*/_jsx(FormHelperText,{children:\"Length should be 10 characters\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(FormControl,{required:true,fullWidth:true,variant:\"outlined\",children:/*#__PURE__*/_jsx(TextField,{value:password,variant:\"outlined\",required:true,helperText:\"Password must have atleast 6 characters\",ref:passwordRef,id:\"password\",label:\"Password\",name:\"Password\",type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(FormControl,{required:true,fullWidth:true,variant:\"outlined\",children:/*#__PURE__*/_jsx(TextField,{value:confirmPass,required:true,variant:\"outlined\",ref:passwordConfirmRef,name:\"password\",label:\"Re-enter Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",onChange:function onChange(e){return setConfirmPass(e.target.value);}})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{required:true,className:\"form-select mt-1 block w-full\",fullWidth:true,variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"demo-simple-select-outlined-label\",children:\"Select Role\"}),/*#__PURE__*/_jsxs(Select,{label:\"Select Role\",value:role,onChange:function onChange(e){return setRole(e.target.value);},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Trainee\",children:\"Trainee\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Operator\",children:\"Operator\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Supervisor\",children:\"Supervisor\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Validator\",children:\"Validator\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Maintenance\",children:\"Maintenance\"})]})]})})]}),!loading&&/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",className:classes.submit,children:\"Create\"}),loading&&/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",disabled:true,className:classes.submit,children:\"Creating user....\"})]})]}),/*#__PURE__*/_jsx(Box,{mt:5,children:/*#__PURE__*/_jsx(Copyright,{})})]})});}","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/components/AddUser/AddUser.jsx"],"names":["React","useEffect","useRef","useState","Avatar","Button","CssBaseline","TextField","Checkbox","Link","Grid","Box","LockOutlinedIcon","Typography","makeStyles","Container","useHistory","Alert","FormControl","FormHelperText","InputLabel","MenuItem","Select","useAuth","db","LogIn","validator","Copyright","Date","getFullYear","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","form","width","submit","backgroundImage","color","borderRadius","AddUser","emailRef","passwordRef","passwordConfirmRef","firstName","setFirstName","lastName","setLastName","username","setUsername","email","setEmail","phone","setPhone","role","setRole","error","setError","password","setPassword","confirmPass","setConfirmPass","loading","setLoading","classes","currentUser","admin","setAdmin","history","url","setUrl","signup","handleReturn","push","handleSubmit","e","preventDefault","length","isEmail","userData","collection","add","then","window","location","reload","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { FormControl, FormHelperText, InputLabel, MenuItem, Select } from '@material-ui/core';\r\nimport { useAuth } from \"../context/AuthContext\"\r\nimport {db} from '../../firebase'\r\nimport LogIn from '../LogIn/LogIn';\r\nimport validator from 'validator'\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright Â© '}\r\n      <Link color=\"inherit\" href=\"\">\r\n        Arizon Systems Pvt Ltd.\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor:\"#ff7a00\",\r\n  },\r\n  form: {\r\n    width: '75%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n    backgroundImage: 'linear-gradient(to left bottom, #fa630f, #fc8218, #fd9d29, #feb63f, #ffce59)',\r\n    color: \"white\",\r\n    borderRadius: '20px',\r\n  },\r\n}));\r\n\r\nexport default function AddUser() {\r\n  const emailRef = useRef()\r\n  const passwordRef= useRef()\r\n  const passwordConfirmRef = useRef()\r\n  const [firstName, setFirstName] = useState('');\r\n  const [lastName, setLastName] = useState('')\r\n  const [username, setUsername] = useState('')\r\n  const [email, setEmail] = useState('');\r\n  const [phone, setPhone] = useState('')\r\n  const [role, setRole] = useState('')\r\n  const [error, setError] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [confirmPass, setConfirmPass] = useState('')\r\n  const [loading, setLoading] = useState();\r\n  const classes = useStyles();\r\n  const {currentUser} = useAuth()\r\n  const [admin, setAdmin] = useState(false)\r\n  const history = useHistory()\r\n  const [url,setUrl] = useState(\"\")\r\n  const { signup } = useAuth()\r\n\r\n  useEffect(() => {\r\n    if(currentUser.email === 'admin@gmail.com'){\r\n      setAdmin(true)\r\n    }\r\n  })\r\n  const handleReturn = () => {\r\n      history.push('/users')\r\n  }\r\n   async function handleSubmit(e) {\r\n    e.preventDefault()\r\n    if (password !== confirmPass) {\r\n      return setError(\"Passwords do not match\")\r\n    }\r\n    if (password.length < 6){\r\n      return setError(\"Weak Password ! Passwords should be atleast 6 characters\")\r\n    }\r\n   if (phone.length < 10 || phone.length > 10 ){\r\n    return setError(\"Phone Number should be 10 digits !\")\r\n   }\r\n    if(role==='Admin'){\r\n      setAdmin(true)\r\n    }\r\n   if(validator.isEmail(email)){\r\n     setError(\"\")\r\n   }else{\r\n     setError(\"Please put a valid email !\")\r\n   }\r\n    \r\n    const userData = {firstName, lastName, email, password, phone, role, username, admin, url}\r\n    try {\r\n      setError(\"\")\r\n      setLoading(true)\r\n      await signup(email, password)\r\n      db.collection('users').add(userData).then(() => {\r\n          history.push('/')\r\n          window.location.reload()\r\n      })\r\n    \r\n    } catch {\r\n      setError(\"Failed to create an account.This is either due to invalid input of email/ the email already exist in Database\")\r\n    }\r\n\r\n    setLoading(false)\r\n  }\r\n\r\n  return (\r\n    <>\r\n    \r\n    <Container component=\"main\" >\r\n      <div className={classes.paper}>\r\n        <Alert severity=\"info\">You are currently adding a new authenticated user!</Alert>\r\n        <Avatar className={classes.avatar}>\r\n          \r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h4\">\r\n          Create User\r\n        </Typography>\r\n        {error && <Alert severity=\"error\">{error}</Alert>}\r\n        <form className={classes.form} onSubmit={handleSubmit}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} sm={6}>\r\n              <FormControl\r\n               required\r\n               fullWidth\r\n               \r\n               error={firstName.length > 20}\r\n              >\r\n                  <TextField\r\n              value={firstName}\r\n              error={firstName.length > 20}\r\n                autoComplete=\"fname\"\r\n                name=\"firstName\"\r\n               required\r\n               variant=\"outlined\"\r\n                id=\"firstName\"\r\n                label=\"First Name\"\r\n                autoFocus\r\n                onChange={(e) => setFirstName(e.target.value)}\r\n              />\r\n              <FormHelperText>length should be less than 20</FormHelperText>\r\n              </FormControl>\r\n              \r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n            <FormControl\r\n             required\r\n             fullWidth\r\n             variant=\"outlined\"\r\n             error={lastName.length > 20}\r\n            >\r\n               <TextField\r\n              value={lastName}\r\n              required\r\n              error={lastName.length > 20}\r\n              variant=\"outlined\"\r\n                id=\"lastName\"\r\n                label=\"Last Name\"\r\n                name=\"lastName\"\r\n                autoComplete=\"lname\"\r\n                onChange={(e) => setLastName(e.target.value)}\r\n              />  \r\n                <FormHelperText>length should be less than 20</FormHelperText>\r\n            </FormControl>\r\n             \r\n            </Grid>\r\n            <Grid item xs={12}>\r\n            <FormControl\r\n             required\r\n             fullWidth\r\n             variant=\"outlined\"\r\n            >\r\n                <TextField\r\n              value={email}\r\n              required\r\n              variant=\"outlined\"\r\n                id=\"email\"\r\n                ref={emailRef}\r\n                label=\"Email Address\"\r\n                name=\"email\"\r\n                autoComplete=\"email\"\r\n                onChange={(e) => setEmail(e.target.value)}\r\n              />\r\n                </FormControl>\r\n              \r\n            </Grid>\r\n             <Grid item xs={12}>\r\n             <FormControl\r\n              required\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              error={username.length > 20 || username.length < 6}\r\n             >\r\n                 <TextField\r\n              value={username}\r\n              required\r\n              error={username.length > 20 || username.length < 6}\r\n              variant=\"outlined\"\r\n                label=\"Username\"\r\n                onChange={(e) => setUsername(e.target.value)}\r\n              />\r\n              <FormHelperText>Username should be atleast 6 characters and max 20 characters</FormHelperText>\r\n                </FormControl>\r\n             \r\n            </Grid>\r\n            <Grid item xs={12}>\r\n            <FormControl\r\n             required\r\n             fullWidth\r\n             variant=\"outlined\">\r\n                <TextField\r\n              value={phone}\r\n              variant=\"outlined\"\r\n              required\r\n                name=\"password\"\r\n                label=\"Phone Number\"\r\n                type=\"Number\"\r\n                id=\"phone\"\r\n                autoComplete=\"current-password\"\r\n                onChange={(e) => setPhone(e.target.value)}\r\n              />\r\n              <FormHelperText>Length should be 10 characters</FormHelperText>\r\n            </FormControl>\r\n              \r\n            </Grid>\r\n            <Grid item xs={12}>\r\n            <FormControl\r\n             required\r\n             fullWidth\r\n             variant=\"outlined\">\r\n                 <TextField\r\n              value={password}\r\n              variant=\"outlined\"\r\n              required\r\n                helperText=\"Password must have atleast 6 characters\"\r\n                ref={passwordRef}\r\n                id=\"password\"\r\n                label=\"Password\"\r\n                name=\"Password\"\r\n                type=\"password\"\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n            </FormControl>\r\n             \r\n            </Grid>\r\n            <Grid item xs={12}>\r\n            <FormControl\r\n             required\r\n             fullWidth\r\n             variant=\"outlined\"\r\n            >\r\n                <TextField\r\n              value={confirmPass}\r\n              required\r\n              variant=\"outlined\"\r\n                ref={passwordConfirmRef}\r\n                name=\"password\"\r\n                label=\"Re-enter Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"current-password\"\r\n                onChange={(e) => setConfirmPass(e.target.value)}\r\n              /> \r\n                </FormControl>\r\n             \r\n            </Grid>\r\n\r\n            <Grid item xs={12}>\r\n            <FormControl required className='form-select mt-1 block w-full'  fullWidth variant=\"outlined\">\r\n            <InputLabel id=\"demo-simple-select-outlined-label\">Select Role</InputLabel>\r\n                <Select\r\n           label=\"Select Role\"\r\n          value={role}\r\n         \r\n          onChange={(e)=> setRole(e.target.value)}\r\n          \r\n        >\r\n         \r\n          <MenuItem value=\"Admin\">Admin</MenuItem>\r\n          <MenuItem value=\"Trainee\">Trainee</MenuItem>\r\n            <MenuItem value=\"Operator\">Operator</MenuItem>\r\n          <MenuItem value=\"Supervisor\">Supervisor</MenuItem>\r\n          <MenuItem value=\"Validator\">Validator</MenuItem>\r\n           <MenuItem value=\"Maintenance\">Maintenance</MenuItem>\r\n        </Select>\r\n            </FormControl>\r\n      \r\n       \r\n            </Grid>\r\n           \r\n          </Grid>\r\n          {!loading && <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n           \r\n            className={classes.submit}\r\n          >\r\n           Create\r\n            </Button>}\r\n         {\r\n           loading && <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            disabled\r\n            className={classes.submit}\r\n          >Creating user....</Button> \r\n         }   \r\n         \r\n        </form>\r\n      </div>\r\n      <Box mt={5}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n    \r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}