{"ast":null,"code":"var _jsxFileName = \"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/components/ModuleSidebar/DashboardNavbar.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from 'react';\nimport { Link as RouterLink, NavLink, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport VideoLabelIcon from '@material-ui/icons/VideoLabel';\nimport { AppBar, Avatar, Badge, Box, Button, Hidden, IconButton, Menu, MenuItem, Toolbar, Typography } from '@material-ui/core';\nimport { init } from \"ityped\";\nimport MenuIcon from '@material-ui/icons/Menu';\nimport NotificationsIcon from '@material-ui/icons/NotificationsOutlined';\nimport BuildIcon from '@material-ui/icons/Build';\nimport PhoneInTalkIcon from '@material-ui/icons/PhoneInTalk';\nimport AllOutIcon from '@material-ui/icons/AllOut';\nimport PhonelinkEraseIcon from '@material-ui/icons/PhonelinkErase';\nimport { useAuth } from '../context/AuthContext';\nimport { db } from '../../firebase';\nimport { firebaseLooper } from '../../utils/tools';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst useStyles = theme => ({\n  customBadge: {\n    backgroundColor: \"#00AFD7\",\n    color: \"white\"\n  }\n});\n\nconst DashboardNavbar = ({\n  avatar,\n  onMobileNavOpen,\n  ...rest\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [anchorE1, setAnchorE1] = useState(null);\n  const {\n    currentUser\n  } = useAuth();\n  const [anchorE2, setAnchorE2] = useState(null);\n  const [notifications, setNotifications] = useState([]);\n  const [videoData, setVideoData] = useState([]);\n  const [status, setStatus] = useState('');\n  const [userData, setUserData] = useState([]);\n  const textRef = useRef();\n  useEffect(() => {\n    if (currentUser) {\n      db.collection('users').where('email', '==', `${currentUser.email}`).onSnapshot(doc => {\n        const data = firebaseLooper(doc);\n        setUserData(data[0]);\n        console.log(data[0]);\n      });\n    } else {\n      /*#__PURE__*/\n      _jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 8\n      }, this);\n    }\n\n    if (currentUser) {\n      db.collection('notifications').orderBy('index', 'desc').onSnapshot(doc => {\n        const data = firebaseLooper(doc);\n        setNotifications(data);\n      });\n      db.collection('videoCallData').where('receiverId', '==', `${currentUser.email}`).onSnapshot(doc => {\n        const data = firebaseLooper(doc);\n        data.sort(function (a, b) {\n          return b.index - a.index;\n        });\n        setVideoData(data);\n      });\n    } else {\n      /*#__PURE__*/\n      _jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }, this);\n    }\n  }, []);\n\n  function updateStatus(id) {\n    db.collection('videoCallData').doc(id).update({\n      status: 'ended'\n    });\n  }\n\n  function getStatus(status, id, d_id) {\n    if (status === 'waiting') {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => updateStatus(d_id),\n        href: `/video-call/${id}`,\n        style: {\n          color: 'darkseagreen'\n        },\n        children: [/*#__PURE__*/_jsxDEV(PhoneInTalkIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 116\n        }, this), \"Join\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (status === 'accepted') {\n      return /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Accepted \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (status === 'ended') {\n      return /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Ended \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 14\n      }, this);\n    }\n  }\n\n  function handleOpen(e) {\n    setAnchorE1(e.currentTarget);\n  }\n\n  function handleVideoOpen(e) {\n    setAnchorE2(e.currentTarget);\n  }\n\n  function handleVideoClose(e) {\n    setAnchorE2(null);\n  }\n\n  function handleClose() {\n    setAnchorE1(null);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      style: {\n        backgroundColor: \"white\"\n      },\n      elevation: 1,\n      ...rest,\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          style: {\n            flexGrow: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n          smDown: true,\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            onClick: handleVideoOpen,\n            children: /*#__PURE__*/_jsxDEV(Badge, {\n              badgeContent: videoData.length,\n              color: \"secondary\",\n              anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'left'\n              },\n              variant: \"dot\",\n              children: /*#__PURE__*/_jsxDEV(VideoLabelIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            component: NavLink,\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            to: \"/account\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-2 text-sm font-medium\",\n              children: [userData.firstName, \" \", userData.lastName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Avatar, {\n              style: {\n                marginLeft: '10px'\n              },\n              src: userData.url\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n          lgUp: true,\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            onClick: handleVideoOpen,\n            children: /*#__PURE__*/_jsxDEV(Badge, {\n              badgeContent: videoData.length,\n              color: \"secondary\",\n              variant: \"dot\",\n              anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'left'\n              },\n              children: /*#__PURE__*/_jsxDEV(VideoLabelIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            href: \"/account\",\n            children: /*#__PURE__*/_jsxDEV(Avatar, {\n              src: userData.url\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            onClick: onMobileNavOpen,\n            children: /*#__PURE__*/_jsxDEV(MenuIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      anchorEl: anchorE1,\n      id: \"simple-menu\",\n      keepMounted: true,\n      open: Boolean(anchorE1),\n      onClose: handleVideoClose,\n      children: [notifications.slice(0, 6).map(data => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          children: [data.notification, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          href: `/${data.link}`,\n          children: [\"Open \", /*#__PURE__*/_jsxDEV(AllOutIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 63\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)]\n      }, data.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleClose,\n        color: \"secondary\",\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      anchorEl: anchorE2,\n      id: \"simple-menu\",\n      keepMounted: true,\n      open: Boolean(anchorE2),\n      onClose: handleClose,\n      children: [videoData.map(data => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: handleVideoClose,\n          children: [data.callerId, \" \", data.message, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: getStatus(data.status, data.call_id, data.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this)]\n      }, data.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleVideoClose,\n        color: \"secondary\",\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true);\n};\n\n_s(DashboardNavbar, \"mXZliFlzab3L9FPrmWJCAwSwiKI=\", false, function () {\n  return [useStyles, useAuth];\n});\n\n_c = DashboardNavbar;\nDashboardNavbar.propTypes = {\n  onMobileNavOpen: PropTypes.func\n};\nexport default DashboardNavbar;\n\nvar _c;\n\n$RefreshReg$(_c, \"DashboardNavbar\");","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/components/ModuleSidebar/DashboardNavbar.jsx"],"names":["useEffect","useRef","useState","Link","RouterLink","NavLink","Redirect","PropTypes","VideoLabelIcon","AppBar","Avatar","Badge","Box","Button","Hidden","IconButton","Menu","MenuItem","Toolbar","Typography","init","MenuIcon","NotificationsIcon","BuildIcon","PhoneInTalkIcon","AllOutIcon","PhonelinkEraseIcon","useAuth","db","firebaseLooper","useStyles","theme","customBadge","backgroundColor","color","DashboardNavbar","avatar","onMobileNavOpen","rest","classes","open","setOpen","anchorE1","setAnchorE1","currentUser","anchorE2","setAnchorE2","notifications","setNotifications","videoData","setVideoData","status","setStatus","userData","setUserData","textRef","collection","where","email","onSnapshot","doc","data","console","log","orderBy","sort","a","b","index","updateStatus","id","update","getStatus","d_id","handleOpen","e","currentTarget","handleVideoOpen","handleVideoClose","handleClose","flexGrow","length","vertical","horizontal","firstName","lastName","marginLeft","url","Boolean","slice","map","display","justifyContent","notification","link","callerId","message","call_id","propTypes","func"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { Link as RouterLink, NavLink, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport VideoLabelIcon from '@material-ui/icons/VideoLabel';\nimport {\n  AppBar,\n  Avatar,\n  Badge,\n  Box,\n  Button,\n  Hidden,\n  IconButton,\n  Menu,\n  MenuItem,\n  Toolbar,\n  Typography\n} from '@material-ui/core';\nimport { init } from \"ityped\";\nimport MenuIcon from '@material-ui/icons/Menu';\nimport NotificationsIcon from '@material-ui/icons/NotificationsOutlined';\nimport BuildIcon from '@material-ui/icons/Build';\n\nimport PhoneInTalkIcon from '@material-ui/icons/PhoneInTalk';\n\nimport AllOutIcon from '@material-ui/icons/AllOut';\nimport PhonelinkEraseIcon from '@material-ui/icons/PhonelinkErase';\nimport { useAuth } from '../context/AuthContext';\nimport { db } from '../../firebase';\nimport { firebaseLooper } from '../../utils/tools';\n\n\nconst useStyles = theme => ({\n \n  customBadge: {\n    backgroundColor: \"#00AFD7\",\n    color: \"white\"\n  }\n});\n\nconst DashboardNavbar = ({avatar, onMobileNavOpen, ...rest }) => {\n  const classes = useStyles()\n const [open, setOpen] = useState(false)\n const [anchorE1, setAnchorE1] = useState(null)\n const {currentUser} = useAuth()\n  const [anchorE2, setAnchorE2] = useState(null)\n  const [notifications, setNotifications] = useState([])\n   const [videoData, setVideoData] = useState([])\n  const [status, setStatus] = useState('')\n  const [userData, setUserData] = useState([])\n  const textRef = useRef();\n  useEffect(() => {\n    if (currentUser){\n      db.collection('users').where('email', '==', `${currentUser.email}`).onSnapshot(doc => {\n      const data = firebaseLooper(doc)\n      setUserData(data[0])\n      console.log(data[0])\n    })\n    }else {\n       <Redirect to='/login'/>\n    }\n      \n    \n    if(currentUser){\n       db.collection('notifications').orderBy('index', 'desc').onSnapshot(doc => {\n      const data = firebaseLooper(doc)\n      setNotifications(data)\n    })\n    db.collection('videoCallData').where('receiverId', '==', `${currentUser.email}`).onSnapshot(doc => {\n      const data = firebaseLooper(doc)\n       data.sort(function(a,b) {\n                return(b.index-a.index)\n            }) \n      setVideoData(data)\n    })\n    }else{\n      <Redirect to='/login'/>\n    }\n   \n   \n  }, [])\n\n  function updateStatus(id){\n    db.collection('videoCallData').doc(id).update({status: 'ended'})\n  }\n\n  function getStatus(status, id,d_id){\n    if(status === 'waiting'){\n      return(<Button onClick={() => updateStatus(d_id)} href={`/video-call/${id}`} style={{color: 'darkseagreen'}}><PhoneInTalkIcon/>Join</Button>)\n    }\n    if(status === 'accepted'){\n      return(<b>Accepted </b>)\n    }\n    if(status === 'ended'){\n      return(<b>Ended </b>)\n    }\n  }\n\n \n\n  function handleOpen(e){\n   \n    setAnchorE1(e.currentTarget)\n  }\n  function handleVideoOpen(e){\n    setAnchorE2(e.currentTarget)\n\n  }\n  function handleVideoClose(e){\n    setAnchorE2(null)\n\n  }\n  function handleClose(){\n    \n    setAnchorE1(null)\n  }\n\n  return (\n    <>\n    <AppBar\n\n    style={{backgroundColor: \"white\"}}\n      elevation={1}\n      {...rest}\n    >\n     \n      <Toolbar >\n        <Box style={{ flexGrow: 1 }} />\n        <Hidden smDown>\n          {/* <IconButton  aria-controls='simple-menu' aria-haspopup=\"true\" onClick={handleOpen} color=\"default\">\n            <Badge\n              badgeContent={notifications.length}\n              color=\"primary\"\n              variant=\"dot\"\n            >\n              \n              <NotificationsIcon />\n            </Badge>\n         \n          </IconButton> */}\n            <IconButton color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" onClick={handleVideoOpen} >\n            <Badge\n              badgeContent={videoData.length}\n              color=\"secondary\"\n              anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'left',\n            }}\n              variant=\"dot\"\n            >\n              <VideoLabelIcon />\n            </Badge>\n        \n          </IconButton>\n          <IconButton component={NavLink} color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" to='/account' >\n              <span className=\"ml-2 text-sm font-medium\">{userData.firstName} {userData.lastName}</span>\n              <Avatar style={{marginLeft: '10px'}} src={userData.url} />\n          \n          \n          </IconButton>\n        </Hidden>\n        <Hidden lgUp>\n          {/* <IconButton color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" onClick={handleOpen}>\n            <Badge\n              badgeContent={notifications.length}\n              color=\"primary\"\n              variant=\"dot\"\n            >\n              <NotificationsIcon />\n            </Badge>\n          \n          </IconButton> */}\n           <IconButton color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" onClick={handleVideoOpen} >\n            <Badge\n              badgeContent={videoData.length}\n              color=\"secondary\"\n              variant=\"dot\"\n              anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'left',\n            }}\n            >\n              <VideoLabelIcon />\n            </Badge>\n        \n          </IconButton>\n          <IconButton color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" href='/account' >\n           \n              <Avatar src={userData.url} />\n          \n          \n          </IconButton>\n          <IconButton\n           color=\"default\"\n            onClick={onMobileNavOpen}\n           \n          >\n            <MenuIcon />\n          </IconButton>\n          \n        </Hidden>\n      </Toolbar>\n    </AppBar>\n       <Menu\n       anchorEl={anchorE1}\n        id=\"simple-menu\"\n        keepMounted\n        open={Boolean(anchorE1)}\n        onClose={handleVideoClose}\n      >{\n        notifications.slice(0, 6).map(data => (\n          \n          <div style={{display: 'flex', justifyContent: 'space-between'}} key={data.id}>\n          <MenuItem>{data.notification} </MenuItem>\n          <Button color=\"primary\" href={`/${data.link}`}>Open <AllOutIcon/></Button>\n          </div>\n        ))\n      }\n        <Button  onClick={handleClose} color='secondary'>Close</Button>\n      </Menu>\n       <Menu\n       anchorEl={anchorE2}\n        id=\"simple-menu\"\n        keepMounted\n        open={Boolean(anchorE2)}\n        onClose={handleClose}\n      >{\n        videoData.map(data => (\n          <div style={{display: 'flex', justifyContent: 'space-between'}} key={data.id}>\n          <MenuItem onClick={handleVideoClose}>{data.callerId} {data.message} </MenuItem>\n          <div >{getStatus(data.status, data.call_id, data.id)}</div>\n         \n          </div>\n        ))\n      }\n         <Button  onClick={handleVideoClose} color='secondary'>Close</Button>\n      </Menu>\n    </>\n   \n  );\n};\n\nDashboardNavbar.propTypes = {\n  onMobileNavOpen: PropTypes.func\n};\n\nexport default DashboardNavbar"]},"metadata":{},"sourceType":"module"}