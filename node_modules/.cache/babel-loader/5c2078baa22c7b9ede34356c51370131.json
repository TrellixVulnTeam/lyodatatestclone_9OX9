{"ast":null,"code":"import _slicedToArray from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Box,Button,Card,Container,FormHelperText,Grid,InputLabel,makeStyles,Select,TextField,Typography}from'@material-ui/core';import React,{useEffect,useState}from'react';import{useHistory}from'react-router-dom';import{useDropzone}from'react-dropzone';import{db,storage,storageRef}from'../../firebase';import{DropzoneArea}from'material-ui-dropzone';import Alert from'@material-ui/lab/Alert';import{v4 as uuid}from'uuid';import ManualDashboardLayout from'../../components/ManualSidebar/ManualDashboardLayout';import StepDashboardLayout from'../../components/StepSidebar/StepDashboardLayout';import{useStorage}from'../../utils/useStorage';import{firebaseLooper}from'../../utils/tools';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{paper:{},avatar:{margin:theme.spacing(1),backgroundColor:'#141256'},form:{width:\"100%\",marginTop:theme.spacing(1)},submit:{maxWidth:\"50%\",background:\"#ff7a00\",borderRadius:'20px',margin:theme.spacing(3,0,2)},drag:{border:\"4px dashed #fff\"},drop:{textAlign:\"center\",color:\"#4a47a3\",fontFamily:\"roboto\"},backButton:{margiinTop:\"30px\",backgroundColor:\"#A997DF\",color:\"white\"},wrapper:_defineProperty({display:'flex',flex:'1 1 auto',overflow:'hidden',paddingTop:64},theme.breakpoints.up('lg'),{paddingLeft:256}),container:{display:'flex',flex:'1 1 auto',overflow:'hidden'},content:{flex:'1 1 auto',height:'100%',overflow:'auto'}};});var AddFiles=function AddFiles(_ref){var match=_ref.match;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),desc=_useState4[0],setDesc=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),createdAt=_useState6[0],setCreatedAt=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),format=_useState8[0],setFormat=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),type=_useState10[0],setType=_useState10[1];var date=moment(new Date()).format('DD/MM/YYYY');var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),file=_useState12[0],setFile=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];var _useState15=useState({mediaData:null}),_useState16=_slicedToArray(_useState15,2),media=_useState16[0],setMedia=_useState16[1];var types=[\"image/png\",\"image/jpeg\",\"image/jpg\"];var videoTypes=[\"video/mp4\",\"video/mkv\",\"video/mov\"];var audioTypes=[\"audio/mp3\",'audio/mpeg'];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),loading=_useState18[0],setLoading=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),message=_useState20[0],setMessage=_useState20[1];var history=useHistory();var handleReturn=function handleReturn(){history.go(-1);};var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),indexD=_useState22[0],setIndex=_useState22[1];useEffect(function(){},[]);var handleChange=function handleChange(loadedFiles){var selectedFile=loadedFiles[0];setFile(selectedFile);};var _useStorage=useStorage(file),progress=_useStorage.progress,url=_useStorage.url;var handleSubmit=function handleSubmit(e){e.preventDefault();var index=indexD.length;var steps={title:title,desc:desc,url:url,date:date};if((title===null||title===void 0?void 0:title.trim().length)===0||(desc===null||desc===void 0?void 0:desc.trim().length)===0){return setError(\"Empty spaces can't be added as input ! Please try again with valid data!\");}if((url===null||url===void 0?void 0:url.trim().length)===0){return setError(\"No File Added\");}setLoading(true);db.collection('FileManager').add(steps).then(function(){setLoading(false);setMessage('Step Added successfully !');setError(\"\");history.push('/file-manager');});};var classes=useStyles();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Box,{py:3,style:{backgroundColor:'background.default',minHeight:'100%'},children:/*#__PURE__*/_jsx(Container,{maxWidth:false,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:\"You are currently Adding New Files \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h3\",align:\"center\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Add  New File\"})}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:handleSubmit,children:[error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex'},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,style:{marginRight:\"50px\"},children:[/*#__PURE__*/_jsxs(Grid,{item:true,lg:12,sm:12,xl:6,xs:12,children:[/*#__PURE__*/_jsx(TextField,{value:title,error:title.length>30,variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"title\",label:\"Document Name\",name:\"title\",autoFocus:true,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsxs(FormHelperText,{children:[\"Title should be max \",title.length,\"/30 \"]}),/*#__PURE__*/_jsx(TextField,{value:desc,error:desc.length>150,variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,rows:7,name:\"step_description\",label:\"Description\",onChange:function onChange(e){return setDesc(e.target.value);},id:\"step_description\",multiline:true}),/*#__PURE__*/_jsxs(FormHelperText,{style:{marginBottom:'20px'},children:[\"Description should be max \",desc.length,\"/150\"]})]}),/*#__PURE__*/_jsxs(Grid,{xs:12,lg:12,sm:12,children:[/*#__PURE__*/_jsx(Alert,{severity:\"warning\",children:\"Don't leave Media Field empty !\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(InputLabel,{variant:\"contained\",children:\"Add the New File\"}),/*#__PURE__*/_jsx(DropzoneArea,{showPreviews:true,dropzoneClass:classes.drop,showFileNames:true,onChange:function onChange(loadedFiles){return handleChange(loadedFiles);},dropzoneText:\"Drag and Drop / Click to Add Files\",showPreviewsInDropzone:false,useChipsForPreview:true,showAlerts:false,filesLimit:1,maxFileSize:6000000}),/*#__PURE__*/_jsxs(\"h5\",{children:[progress,\"% Uploaded\"]})]})]})}),!loading&&/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,disabled:title.length>30||desc.length>150,children:\"Add File\"}),loading&&/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",disabled:true,className:classes.submit,children:\"Adding Files, Please Wait...\"})]})]})})})})})})});};export default AddFiles;","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/FileManager/AddFiles.jsx"],"names":["Box","Button","Card","Container","FormHelperText","Grid","InputLabel","makeStyles","Select","TextField","Typography","React","useEffect","useState","useHistory","useDropzone","db","storage","storageRef","DropzoneArea","Alert","v4","uuid","ManualDashboardLayout","StepDashboardLayout","useStorage","firebaseLooper","moment","useStyles","theme","paper","avatar","margin","spacing","backgroundColor","form","width","marginTop","submit","maxWidth","background","borderRadius","drag","border","drop","textAlign","color","fontFamily","backButton","margiinTop","wrapper","display","flex","overflow","paddingTop","breakpoints","up","paddingLeft","container","content","height","AddFiles","match","title","setTitle","desc","setDesc","createdAt","setCreatedAt","format","setFormat","type","setType","date","Date","file","setFile","error","setError","mediaData","media","setMedia","types","videoTypes","audioTypes","loading","setLoading","message","setMessage","history","handleReturn","go","indexD","setIndex","handleChange","loadedFiles","selectedFile","progress","url","handleSubmit","e","preventDefault","index","length","steps","trim","collection","add","then","push","classes","minHeight","marginRight","target","value","marginBottom"],"mappings":"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","sourcesContent":["import { Box, Button, Card, Container, FormHelperText, Grid, InputLabel, makeStyles, Select, TextField, Typography } from '@material-ui/core'\nimport React, { useEffect, useState } from 'react';\nimport {useHistory} from 'react-router-dom'\nimport {useDropzone} from 'react-dropzone';\nimport {db, storage, storageRef} from '../../firebase'\nimport { DropzoneArea } from 'material-ui-dropzone';\nimport Alert from '@material-ui/lab/Alert';\nimport { v4 as uuid } from 'uuid'\nimport ManualDashboardLayout from '../../components/ManualSidebar/ManualDashboardLayout'\nimport StepDashboardLayout from '../../components/StepSidebar/StepDashboardLayout';\nimport { useStorage } from '../../utils/useStorage';\nimport { firebaseLooper } from '../../utils/tools';\nimport moment from 'moment';\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n   \n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: '#141256',\n  },\n  form: {\n    width:\"100%\",\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    maxWidth: \"50%\",\n      background: \"#ff7a00\",\n      borderRadius: '20px',\n      margin: theme.spacing(3, 0, 2),\n  },\n  drag: {\n \n  border: \"4px dashed #fff\",\n  },\n  drop: {\n    textAlign: \"center\",\n    color: \"#4a47a3\",\n    fontFamily: \"roboto\"\n  },\n  backButton: {\n      margiinTop: \"30px\",\n        backgroundColor: \"#A997DF\",\n        color: \"white\",\n        \n    },\n    wrapper: {\n  display: 'flex',\n  flex: '1 1 auto',\n  overflow: 'hidden',\n  paddingTop: 64,\n  [theme.breakpoints.up('lg')]: {\n    paddingLeft: 256\n  },\n\n  },\n  container: {\n      display: 'flex',\n  flex: '1 1 auto',\n  overflow: 'hidden'\n  },\n  content: {\n    \n      flex: '1 1 auto',\n  height: '100%',\n  overflow: 'auto'\n    },\n}));\n\n\nconst AddFiles = ({match}) => {\n\n\n  const [title, setTitle] = useState('')\n  const [desc, setDesc] = useState('');\n  const [createdAt, setCreatedAt] = useState('');\n  const [format, setFormat] = useState('')\n   const [type, setType] = useState('');\n const date= moment(new Date()).format('DD/MM/YYYY')\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState('')\n  const [media, setMedia] = useState({\n    mediaData: null\n  })\n   const types = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\n   const videoTypes = [\"video/mp4\", \"video/mkv\", \"video/mov\"];\n   const audioTypes = [\"audio/mp3\", 'audio/mpeg']\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('')\n  const history = useHistory();\n  const handleReturn = () => {\n    history.go(-1)\n  }\n  const [indexD, setIndex] = useState([])\n  useEffect(() => {\n    \n  }, [])\n  const handleChange = (loadedFiles) => {\n        let selectedFile = loadedFiles[0]\n        setFile(selectedFile)\n       \n    }\n    const { progress, url } = useStorage(file);\n\n    const handleSubmit = (e) => {\n    e.preventDefault();\n    const index = indexD.length\n    const steps = {title, desc, url, date};\n    \n    if(title?.trim().length===0 || desc?.trim().length === 0 ){\n      return setError(\"Empty spaces can't be added as input ! Please try again with valid data!\")\n    }\n    if(url?.trim().length===0){\n      return setError(\"No File Added\")\n    }\n    setLoading(true);\n    db.collection('FileManager').add(steps).then(()=>{\n      setLoading(false)\n      setMessage('Step Added successfully !')\n      setError(\"\")\n      history.push('/file-manager')\n    })\n  }\n\n \n \n\n  const classes= useStyles();\n    return (\n      <>\n      \n        <div >\n        <div >\n          <Card >\n            <Box\n               py={3}\n              style={{\n                backgroundColor: 'background.default',\n                minHeight: '100%',\n              }}\n            >\n              <Container  maxWidth={false}>\n          <div className={classes.paper}>\n            <Alert severity=\"info\">You are currently Adding New Files </Alert>\n            <br/>\n            <Typography component=\"h1\" variant=\"h3\" align='center'>\n          <b>Add  New File</b>\n        </Typography>\n        <form className={classes.form} onSubmit={handleSubmit}>\n          {error && <Alert severity='error'>{error}</Alert>}\n          <div style={{display: 'flex'}}>\n          <Grid \n           container\n           spacing={3}\n          style={{marginRight: \"50px\"}} >\n          <Grid\n          item\n            lg={12}\n            sm={12}\n            xl={6}\n            xs={12}\n          >\n           \n              <TextField\n              value={title}\n              error={title.length > 30}\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"title\"\n                label=\"Document Name\"\n                name=\"title\"\n                autoFocus\n                onChange={(e) => setTitle(e.target.value)}\n              />\n              <FormHelperText>Title should be max {title.length}/30 </FormHelperText>\n              <TextField\n              value={desc}\n              error={desc.length > 150}\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                rows={7}\n                name=\"step_description\"\n                label=\"Description\"\n                onChange={(e) => setDesc(e.target.value)}\n                id=\"step_description\"\n                multiline\n               \n                \n              />\n              <FormHelperText  style={{marginBottom: '20px'}}>Description should be max {desc.length}/150</FormHelperText>\n          </Grid>\n         \n          \n              <Grid\n            xs={12}\n            lg={12}\n            sm={12}\n            >\n      <Alert severity=\"warning\">Don't leave Media Field empty !</Alert>\n      <br/>\n       <InputLabel variant=\"contained\">Add the New File</InputLabel>\n       <DropzoneArea\n       showPreviews={true}\n       dropzoneClass={classes.drop}\n        showFileNames\n        onChange={(loadedFiles) => handleChange(loadedFiles)}\n        dropzoneText=\"Drag and Drop / Click to Add Files\"\n        showPreviewsInDropzone={false}\n         useChipsForPreview\n        showAlerts={false}\n        filesLimit={1}\n        maxFileSize={6000000}\n      />\n    \n     <h5>{progress}% Uploaded</h5>\n     \n     </Grid>       \n          </Grid>\n   \n     </div>\n\n         {!loading && <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            disabled={title.length > 30 || desc.length > 150}\n          >\n            Add File\n            </Button>}\n         {\n           loading && <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            disabled\n            className={classes.submit}\n          >Adding Files, Please Wait...</Button>\n         }   \n          </form>\n          </div>\n          \n        </Container>\n        </Box>\n          </Card>\n        </div>\n      </div>\n        \n        </>\n    )\n}\n\nexport default AddFiles"]},"metadata":{},"sourceType":"module"}