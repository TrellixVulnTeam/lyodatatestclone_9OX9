{"ast":null,"code":"var _jsxFileName = \"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/VideoCallPage/components/Chatbox.jsx\",\n    _s = $RefreshSig$();\n\nimport { Button, Container, TextField } from '@material-ui/core';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useAuth } from '../../../components/context/AuthContext';\nimport { db } from '../../../firebase';\nimport { firebaseLooper } from '../../../utils/tools';\nimport './Chatbox.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Chatbox = ({\n  call_id\n}) => {\n  _s();\n\n  const [chat, setChat] = useState([]);\n  const {\n    currentUser\n  } = useAuth();\n  const [userData, setUserData] = useState([]);\n  const [message, setMessage] = useState(''); //  const [call_id, setCallId] = useState('')\n\n  const url = userData.url;\n  const username = userData.username;\n  const email = userData.email;\n  const index = chat.length;\n  const messageEl = useRef(null);\n  useEffect(() => {\n    if (messageEl) {\n      messageEl.current.addEventListener('DOMNodeInserted', event => {\n        const {\n          currentTarget: target\n        } = event;\n        target.scroll({\n          top: target.scrollHeight,\n          behavior: 'smooth'\n        });\n      });\n    }\n\n    db.collection('users').where('email', '==', `${currentUser.email}`).onSnapshot(doc => {\n      const data = firebaseLooper(doc);\n      setUserData(data[0]);\n    });\n    db.collection('CallMessages').onSnapshot(doc => {\n      const data = firebaseLooper(doc);\n      data.sort(function (a, b) {\n        return a.index - b.index;\n      });\n      setChat(data);\n      console.log(data);\n    });\n  }, []);\n\n  const getReply = (username, email, message, url, callId) => {\n    if (callId === call_id) {\n      if (email != currentUser.email) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"chat-message\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"flex m-2 items-end\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              class: \"w-6 h-6 rounded-full order-2\",\n              src: url\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 26\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"flex flex-col space-y-2 text-xs max-w-xs mx-2 order-2 items-start\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"px-4 py-2 rounded-lg inline-block rounded-bl-none bg-gray-300 text-gray-600\",\n                  children: message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 47,\n                  columnNumber: 30\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 45,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 17\n        }, this);\n      } else if (email === currentUser.email) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"chat-message\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"flex m-2 items-end justify-end\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"flex flex-col space-y-2 text-xs max-w-xs mx-2 order-1 items-end\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"px-4 py-2 rounded-lg inline-block rounded-br-none bg-yellow-900 text-white \",\n                  children: message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 58,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 16\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: url,\n              alt: \"My profile\",\n              class: \"w-6 h-6 rounded-full order-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 10\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 18\n        }, this);\n      }\n    }\n  };\n\n  function handleKeyDown(e) {\n    if (e.key === 'Enter') {\n      handleSubmit(e);\n    }\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (message.length === 0 || message.trim().length === 0) return;\n    const messageData = {\n      url,\n      username,\n      email,\n      message,\n      index\n    };\n    db.collection('CallMessages').add({\n      url,\n      username,\n      email,\n      message,\n      index,\n      call_id\n    });\n    setMessage('');\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    style: {\n      backgroundColor: 'white',\n      border: '2px solid gray',\n      height: '100vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat__header\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"ChatBox\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat__body\",\n        ref: messageEl,\n        children: chat.filter(message => {\n          if (message.call_id == call_id) {\n            return message;\n          }\n        }).map(message => /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `chat__message ${message.email === currentUser.email && \"chat__receiver\"}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"flex m-2 items-end justify-end\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"flex flex-col space-y-2 text-xs max-w-xs mx-2 order-1 items-end\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mx-auto \",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chat__name\",\n                  children: message.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chat__messageText\",\n                  children: message.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 20\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 16\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 12\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: message.url,\n              alt: \"My profile\",\n              class: \"w-6 h-6 rounded-full order-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat__footer\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          multiLine: true,\n          variant: \"outlined\",\n          type: \"text\",\n          value: message,\n          id: \"chatInput\",\n          onKeyPress: handleKeyDown,\n          onChange: e => setMessage(e.target.value),\n          placeholder: \"Type a message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          onClick: handleSubmit,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Chatbox, \"2MoQYgfFUvv8SVxNIBmWsS5HfvM=\", false, function () {\n  return [useAuth];\n});\n\n_c = Chatbox;\nexport default Chatbox;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chatbox\");","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/VideoCallPage/components/Chatbox.jsx"],"names":["Button","Container","TextField","React","useEffect","useRef","useState","useAuth","db","firebaseLooper","Chatbox","call_id","chat","setChat","currentUser","userData","setUserData","message","setMessage","url","username","email","index","length","messageEl","current","addEventListener","event","currentTarget","target","scroll","top","scrollHeight","behavior","collection","where","onSnapshot","doc","data","sort","a","b","console","log","getReply","callId","handleKeyDown","e","key","handleSubmit","preventDefault","trim","messageData","add","backgroundColor","border","height","filter","map","value"],"mappings":"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","sourcesContent":["import { Button, Container, TextField } from '@material-ui/core'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { useAuth } from '../../../components/context/AuthContext'\nimport { db } from '../../../firebase'\nimport { firebaseLooper } from '../../../utils/tools'\nimport './Chatbox.css'\nconst Chatbox = ({call_id}) => {\n    const [chat, setChat] = useState([])\n    const {currentUser} = useAuth()\n    const [userData, setUserData] = useState([])\n    const [message, setMessage] = useState('')\n    //  const [call_id, setCallId] = useState('')\n    const url = userData.url\n        const username = userData.username\n        const email = userData.email\n        const index = chat.length\n        const messageEl = useRef(null);\n    useEffect(() => {\n        if (messageEl) {\n      messageEl.current.addEventListener('DOMNodeInserted', event => {\n        const { currentTarget: target } = event;\n        target.scroll({ top: target.scrollHeight, behavior: 'smooth' });\n      });\n    }\n        db.collection('users').where('email','==', `${currentUser.email}`).onSnapshot(doc => {\n            const data = firebaseLooper(doc)\n            setUserData(data[0])\n        })\n        db.collection('CallMessages').onSnapshot(doc => {\n            const data = firebaseLooper(doc)\n            data.sort(function(a,b){\n                return(a.index-b.index)\n            })\n            setChat(data)\n            console.log(data)\n        })\n    }, [])\n    const  getReply = (username,email,message,url,callId) => {\n        if(callId === call_id){\n            if(email != currentUser.email){\n            return(\n                <div class=\"chat-message\">\n                    <div class=\"flex m-2 items-end\">\n                         <img  class=\"w-6 h-6 rounded-full order-2\" src={url}/>\n                        <div class=\"flex flex-col space-y-2 text-xs max-w-xs mx-2 order-2 items-start\">\n                            \n                        <div><span class=\"px-4 py-2 rounded-lg inline-block rounded-bl-none bg-gray-300 text-gray-600\">{message}</span></div>\n                        </div>\n                       \n                    </div>\n                </div>\n            )\n        }else if (email === currentUser.email){\n             return(\n                 <div class=\"chat-message\">\n         <div  class=\"flex m-2 items-end justify-end\">\n            <div class=\"flex flex-col space-y-2 text-xs max-w-xs mx-2 order-1 items-end\">\n               <div><span class=\"px-4 py-2 rounded-lg inline-block rounded-br-none bg-yellow-900 text-white \">{message}</span></div>\n            </div>\n            <img src={url} alt=\"My profile\" class=\"w-6 h-6 rounded-full order-2\"/>\n         </div>\n      </div>\n             ) \n        }\n        }\n        \n    }\n\n     function handleKeyDown(e) {\n    if (e.key === 'Enter') {\n      handleSubmit(e)\n    }\n  }\n   \n    const handleSubmit = (e) => {\n        e.preventDefault()\n        if (message.length === 0 || message.trim().length === 0) return;\n        const messageData = {url,username,email,message,index}\n        db.collection('CallMessages').add({url,username,email,message,index,call_id})\n        setMessage('')\n    }\n    \n    return (\n \n        <Container style={{backgroundColor: 'white', border: '2px solid gray',height: '100vh'}}>\n          <div className=\"chat\">\n              <div className=\"chat__header\">\n                  <h1>ChatBox</h1>\n              </div>\n              <div className=\"chat__body\" ref={messageEl}>\n        {chat.filter((message) =>{\n            if(message.call_id == call_id){\n                return message\n            }\n        }\n\n        ).map((message) => (\n          <p\n            className={`chat__message ${\n              message.email === currentUser.email && \"chat__receiver\"\n            }`}\n          > \n          <div  class=\"flex m-2 items-end justify-end\">\n             \n           <div class=\"flex flex-col space-y-2 text-xs max-w-xs mx-2 order-1 items-end\">\n\n               <div className='mx-auto '>\n                    <span className=\"chat__name\">{message.username}</span>\n                   <span className=\"chat__messageText\">{message.message}</span> </div>\n            </div>\n           \n            <img src={message.url} alt=\"My profile\" class=\"w-6 h-6 rounded-full order-2\"/>\n          </div>\n          \n            \n          </p>\n        ))} \n\n        \n        </div>\n         <div className=\"chat__footer\" >\n            \n                  <TextField\n               fullWidth\n               multiLine\n               variant='outlined'\n            type=\"text\"\n            value={message}\n            id=\"chatInput\"\n            onKeyPress={handleKeyDown}\n            onChange={(e) => setMessage(e.target.value)}\n            placeholder=\"Type a message\"\n          />\n          <Button type=\"submit\" onClick={handleSubmit}>\n            Send\n          </Button>\n         </div>\n          </div>\n        </Container> \n    )\n}\n\nexport default Chatbox\n"]},"metadata":{},"sourceType":"module"}