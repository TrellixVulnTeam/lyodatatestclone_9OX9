{"ast":null,"code":"import _slicedToArray from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import*as admin from'firebase-admin';import{db}from\"../../firebase\";import{useStorage}from'../../utils/useStorage';import{FormHelperText,TextField,Button,Switch}from\"@material-ui/core\";import{Typography}from\"@material-ui/core\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddApproval(_ref){var match=_ref.match;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),file=_useState4[0],setFile=_useState4[1];var _useStorage=useStorage(file),prograss=_useStorage.prograss,url=_useStorage.url;var types=[\"image/png\",\"image/jpeg\",\"image/jpg\"];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),change=_useState8[0],setChange=_useState8[1];var handleChange=function handleChange(e){var selectedFile=e.target.files[0];if(selectedFile){if(types.includes(selectedFile.type)){setError(null);setFile(selectedFile);}else{setFile(null);setError(\"Please select an image file (png or jpg)\");}}};function handleSubmitC(){db.collection('DQNewReport').doc(match.params.id).collection('content').doc('approval').collection('customer').add({name:name,url:url,timestamp:new Date()}).then(function(){setName('');setFile(null);});}function handleSubmitV(){db.collection('DQNewReport').doc(match.params.id).collection('content').doc('approval').collection('vendor').add({name:name,url:url,timestamp:new Date()});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",align:\"center\",gutterBottom:true,children:\"Add Details\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",fullWidth:true,label:\"Name\",style:{marginBottom:'25px'},value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleChange}),/*#__PURE__*/_jsx(FormHelperText,{children:\"Put you Signature here (Image Formats only)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Switch,{onClick:function onClick(e){return setChange(!change);}}),/*#__PURE__*/_jsx(FormHelperText,{children:\"Set For customer/Reviewer\"}),change?/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(Button,{onClick:handleSubmitC,style:{background:'orange',color:'white'},children:\"Add for Customer\"})}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(Button,{disabled:process<100||name==='',onClick:handleSubmitV,style:{background:'orange',color:'white'},children:\"Add for Reviewer\"})})]}),url&&/*#__PURE__*/_jsx(\"div\",{style:{align:'center',display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"img\",{src:url,width:\"350px\",height:\"250px\"})})]});}export default AddApproval;","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/DQNewReports/AddApproval.jsx"],"names":["useState","admin","db","useStorage","FormHelperText","TextField","Button","Switch","Typography","AddApproval","match","name","setName","file","setFile","prograss","url","types","error","setError","change","setChange","handleChange","e","selectedFile","target","files","includes","type","handleSubmitC","collection","doc","params","id","add","timestamp","Date","then","handleSubmitV","marginBottom","value","display","justifyContent","background","color","process","align"],"mappings":"2KAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAO,GAAKC,CAAAA,KAAZ,KAAuB,gBAAvB,CACA,OAAUC,EAAV,KAAoB,gBAApB,CACA,OAAQC,UAAR,KAAyB,wBAAzB,CACA,OAASC,cAAT,CAAyBC,SAAzB,CAAoCC,MAApC,CAA4CC,MAA5C,KAA0D,mBAA1D,CACA,OAASC,UAAT,KAA2B,mBAA3B,C,wFACA,QAASC,CAAAA,WAAT,MAA8B,IAARC,CAAAA,KAAQ,MAARA,KAAQ,eACLV,QAAQ,CAAC,EAAD,CADH,wCACtBW,IADsB,eAChBC,OADgB,8BAELZ,QAAQ,CAAC,IAAD,CAFH,yCAEtBa,IAFsB,eAEhBC,OAFgB,+BAGLX,UAAU,CAACU,IAAD,CAHL,CAGtBE,QAHsB,aAGtBA,QAHsB,CAGZC,GAHY,aAGZA,GAHY,CAI5B,GAAMC,CAAAA,KAAK,CAAG,CAAC,WAAD,CAAc,YAAd,CAA4B,WAA5B,CAAd,CAJ4B,eAKFjB,QAAQ,CAAC,EAAD,CALN,yCAKrBkB,KALqB,eAKdC,QALc,8BAMAnB,QAAQ,CAAC,KAAD,CANR,yCAMrBoB,MANqB,eAMbC,SANa,eAQ5B,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CACtB,GAAIC,CAAAA,YAAY,CAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAnB,CAEA,GAAIF,YAAJ,CAAkB,CACd,GAAIP,KAAK,CAACU,QAAN,CAAeH,YAAY,CAACI,IAA5B,CAAJ,CAAuC,CACnCT,QAAQ,CAAC,IAAD,CAAR,CACAL,OAAO,CAACU,YAAD,CAAP,CACH,CAHD,IAGO,CACHV,OAAO,CAAC,IAAD,CAAP,CACAK,QAAQ,CAAC,0CAAD,CAAR,CACH,CACJ,CAGJ,CAdH,CAgBD,QAASU,CAAAA,aAAT,EAAwB,CACvB3B,EAAE,CAAC4B,UAAH,CAAc,aAAd,EACAC,GADA,CACIrB,KAAK,CAACsB,MAAN,CAAaC,EADjB,EAECH,UAFD,CAEY,SAFZ,EAGCC,GAHD,CAGK,UAHL,EAICD,UAJD,CAIY,UAJZ,EAKCI,GALD,CAKK,CAACvB,IAAI,CAAJA,IAAD,CAAMK,GAAG,CAAHA,GAAN,CAAYmB,SAAS,CAAE,GAAIC,CAAAA,IAAJ,EAAvB,CALL,EAMCC,IAND,CAMM,UAAM,CACZzB,OAAO,CAAC,EAAD,CAAP,CACAE,OAAO,CAAC,IAAD,CAAP,CACC,CATD,EAYA,CACD,QAASwB,CAAAA,aAAT,EAAwB,CACvBpC,EAAE,CAAC4B,UAAH,CAAc,aAAd,EACAC,GADA,CACIrB,KAAK,CAACsB,MAAN,CAAaC,EADjB,EAECH,UAFD,CAEY,SAFZ,EAGCC,GAHD,CAGK,UAHL,EAICD,UAJD,CAIY,QAJZ,EAKCI,GALD,CAKK,CAACvB,IAAI,CAAJA,IAAD,CAAMK,GAAG,CAAHA,GAAN,CAAWmB,SAAS,CAAE,GAAIC,CAAAA,IAAJ,EAAtB,CALL,EAMA,CAED,mBACC,oCACC,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAwB,KAAK,CAAC,QAA9B,CAAuC,YAAY,KAAnD,yBADD,cAEC,oCACC,KAAC,SAAD,EAAW,OAAO,CAAC,UAAnB,CAA8B,SAAS,KAAvC,CAAwC,KAAK,CAAC,MAA9C,CAAqD,KAAK,CAAE,CAACG,YAAY,CAAE,MAAf,CAA5D,CAAoF,KAAK,CAAE5B,IAA3F,CAAiG,QAAQ,CAAE,kBAACY,CAAD,QAAOX,CAAAA,OAAO,CAACW,CAAC,CAACE,MAAF,CAASe,KAAV,CAAd,EAA3G,EADD,cAGC,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAElB,YAA7B,EAHD,cAIC,KAAC,cAAD,0DAJD,GAFD,cASC,oCACC,KAAC,MAAD,EAAQ,OAAO,CAAE,iBAACC,CAAD,QAAOF,CAAAA,SAAS,CAAC,CAACD,MAAF,CAAhB,EAAjB,EADD,cAEC,KAAC,cAAD,wCAFD,CAIEA,MAAM,cACN,YAAK,KAAK,CAAE,CAACqB,OAAO,CAAE,MAAV,CAAkBC,cAAc,CAAE,QAAlC,CAAZ,uBACC,KAAC,MAAD,EAAQ,OAAO,CAAEb,aAAjB,CAAgC,KAAK,CAAE,CAACc,UAAU,CAAE,QAAb,CAAuBC,KAAK,CAAE,OAA9B,CAAvC,8BADD,EADM,cAKN,YAAK,KAAK,CAAE,CAACH,OAAO,CAAE,MAAV,CAAkBC,cAAc,CAAE,QAAlC,CAAZ,uBACC,KAAC,MAAD,EAAQ,QAAQ,CAAEG,OAAO,CAAG,GAAV,EAAiBlC,IAAI,GAAK,EAA5C,CAAiD,OAAO,CAAE2B,aAA1D,CAAyE,KAAK,CAAE,CAACK,UAAU,CAAE,QAAb,CAAuBC,KAAK,CAAE,OAA9B,CAAhF,8BADD,EATF,GATD,CAwBE5B,GAAG,eACH,YAAK,KAAK,CAAE,CAAC8B,KAAK,CAAC,QAAP,CAAiBL,OAAO,CAAE,MAA1B,CAAkCC,cAAc,CAAE,QAAlD,CAAZ,uBACC,YAAK,GAAG,CAAE1B,GAAV,CAAe,KAAK,CAAC,OAArB,CAA6B,MAAM,CAAC,OAApC,EADD,EAzBF,GADD,CAiCA,CAED,cAAeP,CAAAA,WAAf","sourcesContent":["import { useState } from \"react\"\nimport * as admin from 'firebase-admin'\nimport  { db } from \"../../firebase\"\nimport {useStorage} from '../../utils/useStorage'\nimport { FormHelperText, TextField, Button, Switch } from \"@material-ui/core\"\nimport { Typography } from \"@material-ui/core\"\nfunction AddApproval({match}) {\n\tconst [name, setName] = useState('')\n\tconst [file, setFile] = useState(null)\n\tconst {prograss, url} = useStorage(file)\n\t const types = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\n\t const [error, setError] = useState('')\n\t const [change, setChange] = useState(false)\n\t \n\t const handleChange = (e) => {\n        let selectedFile = e.target.files[0];\n        \n        if (selectedFile) {\n            if (types.includes(selectedFile.type)) {\n                setError(null)\n                setFile(selectedFile);\n            } else {\n                setFile(null);\n                setError(\"Please select an image file (png or jpg)\");\n            }\n        }\n       \n        \n    }\n\n\tfunction handleSubmitC(){\n\t\tdb.collection('DQNewReport').\n\t\tdoc(match.params.id)\n\t\t.collection('content')\n\t\t.doc('approval')\n\t\t.collection('customer')\n\t\t.add({name,url,  timestamp: new Date()})\n\t\t.then(() => {\n\t\tsetName('')\n\t\tsetFile(null)\t\n\t\t}\n\t\t\n\t\t)\n\t}\n\tfunction handleSubmitV(){\n\t\tdb.collection('DQNewReport').\n\t\tdoc(match.params.id)\n\t\t.collection('content')\n\t\t.doc('approval')\n\t\t.collection('vendor')\n\t\t.add({name,url, timestamp: new Date()})\n\t}\n\t\n\treturn (\n\t\t<div>\n\t\t\t<Typography variant='h3'align='center' gutterBottom >Add Details</Typography>\n\t\t\t<div>\n\t\t\t\t<TextField variant='outlined' fullWidth label='Name' style={{marginBottom: '25px'}} value={name} onChange={(e) => setName(e.target.value)} />\n\t\t\t\t\n\t\t\t\t<input type='file' onChange={handleChange} />\n\t\t\t\t<FormHelperText>Put you Signature here (Image Formats only)</FormHelperText>\n\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<Switch onClick={(e) => setChange(!change)}></Switch>\n\t\t\t\t<FormHelperText>Set For customer/Reviewer</FormHelperText>\n\t\t\t\t{\n\t\t\t\t\tchange?\n\t\t\t\t\t<div style={{display: 'flex', justifyContent: 'center'}}>\n\t\t\t\t\t\t<Button onClick={handleSubmitC} style={{background: 'orange', color: 'white'}}>Add for Customer</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t:\n\t\t\t\t\t<div style={{display: 'flex', justifyContent: 'center'}}>\n\t\t\t\t\t\t<Button disabled={process < 100 || name === '' } onClick={handleSubmitV} style={{background: 'orange', color: 'white'}} >Add for Reviewer</Button>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t{\n\t\t\t\turl && \n\t\t\t\t<div style={{align:'center', display: 'flex', justifyContent: 'center'}}>\n\t\t\t\t\t<img src={url} width='350px' height='250px'/>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t}\n\t\t</div>\n\t)\n}\n\nexport default AddApproval\n"]},"metadata":{},"sourceType":"module"}