{"ast":null,"code":"import _slicedToArray from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Button,Card,CardActions,CardContent,FormHelperText,makeStyles,TextField,Typography}from'@material-ui/core';import{Alert}from'@material-ui/lab';import React,{useEffect,useState}from'react';import{useHistory}from'react-router-dom';import ContentDashboardLayout from'../../components/ContentSidebar/ContentDashboardLayout';import{useAuth}from'../../components/context/AuthContext';import{db}from'../../firebase';import{firebaseLooper}from'../../utils/tools';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{layoutRoot:{backgroundColor:'white',display:'flex',height:'100%',overflow:'hidden',width:'100%'},avatar:{margin:theme.spacing(1),backgroundColor:'#141256'},wrapper:_defineProperty({display:'flex',flex:'1 1 auto',overflow:'hidden',paddingTop:64},theme.breakpoints.up('lg'),{paddingLeft:256}),container:{display:'flex',flex:'1 1 auto',overflow:'hidden',height:'100%'},content:{margin:'15%',flex:'1 1 auto',width:'75%',overflow:'auto'}};});var AddRecipe=function AddRecipe(_ref){var match=_ref.match;var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var classes=useStyles();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(\"\".concat(match.params.id)),_useState6=_slicedToArray(_useState5,2),mid=_useState6[0],setMid=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),recipe=_useState8[0],setRecipe=_useState8[1];var history=useHistory();useEffect(function(){db.collection('recipes').where('mid','==',\"\".concat(match.params.id)).onSnapshot(function(doc){var data=firebaseLooper(doc);setRecipe(data);});},[]);function handleChange(e){var titleD=e.target.value;if(recipe.length===0){return setTitle(titleD);}for(var index=0;index<recipe.length;index++){var element=recipe[index].title;if(titleD===element){setTitle(titleD);return setError(\"Recipe already exists! Please try again with another name\");}else{setError(\"\");setTitle(titleD);}}}var handleSubmit=function handleSubmit(e){e.preventDefault();if((title===null||title===void 0?void 0:title.trim().length)===0){return setError(\"Empty Strings are not valid inputs ! Please try again with a valid input\");}if(!error){var createdBy=\"\".concat(currentUser.email);var data={title:title,mid:mid,createdBy:createdBy};db.collection('recipes').add(data);history.push(\"/machine-data/Reports/\".concat(match.params.id,\"/Recipes\"));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ContentDashboardLayout,{match:match}),/*#__PURE__*/_jsx(\"div\",{className:classes.wrapper,children:/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsx(Card,{className:classes.content,children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h1\",component:\"h1\",align:\"center\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Add Recipe\"})}),/*#__PURE__*/_jsxs(\"form\",{style:{width:'100%',alignItems:\"center\"},onSubmit:handleSubmit,children:[error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,label:\"Title\",value:title,error:title.length>40,onChange:handleChange}),/*#__PURE__*/_jsxs(FormHelperText,{children:[\"Title length should be maximum \",title.length,\"/40\"]}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",label:\"mid\",value:mid,disabled:true,fullWidth:true,onChange:function onChange(e){return setMid(e.target.value);}}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{disabled:title.length>40,style:{color:'white'},fullWidth:true,variant:\"contained\",color:\"primary\",type:\"submit\",children:\"Add New Recipe\"})})]})]})})})})]});};export default AddRecipe;","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/Recipee/AddRecipe.jsx"],"names":["Button","Card","CardActions","CardContent","FormHelperText","makeStyles","TextField","Typography","Alert","React","useEffect","useState","useHistory","ContentDashboardLayout","useAuth","db","firebaseLooper","useStyles","theme","layoutRoot","backgroundColor","display","height","overflow","width","avatar","margin","spacing","wrapper","flex","paddingTop","breakpoints","up","paddingLeft","container","content","AddRecipe","match","currentUser","classes","title","setTitle","error","setError","params","id","mid","setMid","recipe","setRecipe","history","collection","where","onSnapshot","doc","data","handleChange","e","titleD","target","value","length","index","element","handleSubmit","preventDefault","trim","createdBy","email","add","push","alignItems","color"],"mappings":"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","sourcesContent":["import { Button, Card, CardActions, CardContent, FormHelperText, makeStyles, TextField, Typography } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom';\nimport ContentDashboardLayout from '../../components/ContentSidebar/ContentDashboardLayout';\nimport { useAuth } from '../../components/context/AuthContext';\nimport { db } from '../../firebase';\nimport { firebaseLooper } from '../../utils/tools';\n\n\nconst useStyles = makeStyles((theme) => ({\n  layoutRoot: {\n    backgroundColor: 'white',\n    display: 'flex',\n    height: '100%',\n    overflow: 'hidden',\n    width: '100%',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: '#141256',\n  },\n wrapper: {\n  display: 'flex',\n  flex: '1 1 auto',\n  overflow: 'hidden',\n  paddingTop: 64,\n  [theme.breakpoints.up('lg')]: {\n    paddingLeft: 256\n  }\n  },\n  container: {\n      display: 'flex',\n  flex: '1 1 auto',\n  overflow: 'hidden',\n  height: '100%'\n  },\n  content: {\n    margin: '15%',\n      flex: '1 1 auto',\n      width: '75%',\n  overflow: 'auto'\n    },\n}));\n\n\nconst AddRecipe = ({match}) => {\n  const {currentUser} = useAuth()\n    const classes = useStyles()\n    const [title, setTitle] = useState('')\n    const [error, setError] = useState('')\n    const [mid, setMid] = useState(`${match.params.id}`)\n    const [recipe, setRecipe] = useState([])\n    const history = useHistory()\n\n    useEffect (() => {\n      db.collection('recipes').where('mid', '==', `${match.params.id}`).onSnapshot(doc => {\n        const data = firebaseLooper(doc)\n        setRecipe(data)\n    })\n    }, [])\n\n    function handleChange(e){\n      const titleD = e.target.value\n      if(recipe.length === 0){\n        return setTitle(titleD)\n      }\n      for (let index = 0; index < recipe.length; index++) {\n        const element = recipe[index].title;\n        if(titleD === element){\n          setTitle(titleD)\n          return setError(\"Recipe already exists! Please try again with another name\")\n        }else {\n          setError(\"\")\n          setTitle(titleD)\n          \n        }\n        \n      }\n    }\n\n    const handleSubmit = (e) => {\n      e.preventDefault()\n      if(title?.trim().length === 0){\n       return setError(\"Empty Strings are not valid inputs ! Please try again with a valid input\")\n      }\n     if(!error){\n        const createdBy = `${currentUser.email}`\n      const data = {title, mid, createdBy}\n      db.collection('recipes').add(data)\n      history.push(`/machine-data/Reports/${match.params.id}/Recipes`)\n     }\n     \n     \n    }\n    return (\n        <>\n        <ContentDashboardLayout match={match}/>\n         <div className={classes.wrapper}>\n        <div className={classes.container}>\n          <Card className={classes.content}>\n              \n             <CardContent >\n                 <Typography  variant='h1' component='h1' align='center'><b>Add Recipe</b></Typography>\n                   <form style={{width: '100%', alignItems: \"center\"}} onSubmit={handleSubmit}>\n                     {error && <Alert severity='error'>{error}</Alert>}\n                    <TextField \n                    variant=\"outlined\"\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    label='Title'\n                    value={title}\n                    error={title.length > 40 }\n                        onChange={handleChange}\n                    />\n                    <FormHelperText>Title length should be maximum {title.length}/40</FormHelperText>\n                    <TextField \n                    variant=\"outlined\"\n                    margin=\"normal\"\n                    label='mid'\n                    value={mid}\n                    disabled\n                    fullWidth\n                        onChange={(e) => setMid(e.target.value)}\n                    />\n                <CardActions>\n                    <Button disabled={title.length>40} style={{color: 'white'}} fullWidth variant='contained' color=\"primary\" type=\"submit\">Add New Recipe</Button>\n                 </CardActions>\n              \n                </form> \n             </CardContent>\n              \n          </Card>\n        </div>\n      </div>\n      </>\n    )\n}\n\nexport default AddRecipe\n"]},"metadata":{},"sourceType":"module"}