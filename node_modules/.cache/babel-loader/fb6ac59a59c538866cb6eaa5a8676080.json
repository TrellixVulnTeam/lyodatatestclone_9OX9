{"ast":null,"code":"import _defineProperty from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useEffect,useState}from'react';import'@opentok/client';// import './index.css';\n// import './polyfills';\n// import {\n//   API_KEY,\n//   SESSION_ID,\n//   TOKEN\n// } from './config';\nimport VideoCall from'./VideoCall';import{Button,Card,Container,Dialog,DialogActions,DialogContent,DialogTitle,Grid,InputLabel,Select,TextField,Toolbar}from'@material-ui/core';import{db}from'../../firebase';import{useAuth}from'../context/AuthContext';import{firebaseLooper}from'../../utils/tools';import{useVideoStorage}from'../../utils/useVideoStorage';import OpenTokPage from'../../Pages/VideoCallPage/OpenTokPage';import config from'../../Pages/VideoCallPage/config';import{SettingsBackupRestoreSharp}from'@material-ui/icons';import ListUsers from'./ListUsers';import screenfull from'screenfull';import Chatbox from'../../Pages/VideoCallPage/components/Chatbox';import React from'react';import clsx from'clsx';import{makeStyles,useTheme}from'@material-ui/core/styles';import Drawer from'@material-ui/core/Drawer';import AppBar from'@material-ui/core/AppBar';import CssBaseline from'@material-ui/core/CssBaseline';import List from'@material-ui/core/List';import Typography from'@material-ui/core/Typography';import Divider from'@material-ui/core/Divider';import IconButton from'@material-ui/core/IconButton';import MenuIcon from'@material-ui/icons/Menu';import ChevronLeftIcon from'@material-ui/icons/ChevronLeft';import ChevronRightIcon from'@material-ui/icons/ChevronRight';import ListItem from'@material-ui/core/ListItem';import ListItemIcon from'@material-ui/core/ListItemIcon';import ListItemText from'@material-ui/core/ListItemText';import InboxIcon from'@material-ui/icons/MoveToInbox';import MailIcon from'@material-ui/icons/Mail';import AttachFileIcon from'@material-ui/icons/AttachFile';import QuestionAnswerIcon from'@material-ui/icons/QuestionAnswer';import OpenInBrowserIcon from'@material-ui/icons/OpenInBrowser';import{API_KEY,SESSION_ID,TOKEN}from'./config';import Whiteboard from'../Whiteboard/Whiteboard';import InviteForm from'../InviteForm/InviteForm';import AddIcon from'@material-ui/icons/Add';import TestVideo from'../../VideoCallModel/TestVideo';import EntryPage from'../../VideoCallModel/EntryPage';import Page from'../Page';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var drawerWidth=550;var useStyles=makeStyles(function(theme){return{root:{background:'black',display:'flex'},appBar:{transition:theme.transitions.create(['margin','width'],{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.leavingScreen})},appBarShift:{width:\"calc(100% - \".concat(drawerWidth,\"px)\"),transition:theme.transitions.create(['margin','width'],{easing:theme.transitions.easing.easeOut,duration:theme.transitions.duration.enteringScreen}),marginRight:drawerWidth},title:{flexGrow:1},hide:{display:'none'},drawer:{width:drawerWidth,flexShrink:0},drawerPaper:{width:drawerWidth},drawerHeader:_objectSpread(_objectSpread({display:'flex',alignItems:'center',padding:theme.spacing(0,1)},theme.mixins.toolbar),{},{justifyContent:'flex-start'}),content:{flexGrow:1,padding:theme.spacing(3),transition:theme.transitions.create('margin',{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.leavingScreen}),marginRight:-drawerWidth},contentShift:{transition:theme.transitions.create('margin',{easing:theme.transitions.easing.easeOut,duration:theme.transitions.duration.enteringScreen}),marginRight:0}};});export default function RenderVc(_ref){var config=_ref.config;var classes=useStyles();var theme=useTheme();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),openDrawer=_React$useState2[0],setOpenDrawer=_React$useState2[1];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),call_id=_useState6[0],setCallId=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),currentCall=_useState8[0],setCurrentCall=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),whiteboardOpen=_useState10[0],setWhiteboardOpen=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),format=_useState12[0],setFormat=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),configData=_useState14[0],setConfigData=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),disabled=_useState16[0],setDisabled=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),open=_useState18[0],setOpen=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),openInvite=_useState20[0],setOpenInvite=_useState20[1];var _useState21=useState(\"\".concat(config.TOKEN)),_useState22=_slicedToArray(_useState21,2),token=_useState22[0],setToken=_useState22[1];var _useState23=useState(\"\".concat(config.SESSION_ID)),_useState24=_slicedToArray(_useState23,2),session_id=_useState24[0],setSessionId=_useState24[1];var types=[\"image/png\",\"image/jpeg\",\"image/jpg\"];var videoTypes=[\"video/mp4\",\"video/mkv\",\"video/mov\"];var audioTypes=[\"audio/mp3\",\"audio/mpeg\"];var _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),message=_useState26[0],setMessage=_useState26[1];var _useAuth=useAuth(),currentUser=_useAuth.currentUser;useEffect(function(){db.collection('OpenTokConfig').get().then(function(snapshot){var data=firebaseLooper(snapshot);console.log(data[0]);setConfigData(data[0]);});db.collection('CallCurrent').onSnapshot(function(snapshot){var callData=firebaseLooper(snapshot);callData.sort(function(a,b){return a.index-b.index;});setCurrentCall(callData[callData.length-1]);setCallId(callData[callData.length-1].call_id);});},[]);var handleChange=function handleChange(e){var selectedFile=e.target.files[0];if(selectedFile){if(format==='image'){if(types.includes(selectedFile.type)){setError(null);setFile(selectedFile);setDisabled(false);}else{setFile(null);setError(\"Please select an image file (png or jpg)\");}}else if(format==='video'){if(videoTypes.includes(selectedFile.type)){setError(null);setFile(selectedFile);setDisabled(false);}else{setFile(null);setError(\"Please select a video file (mp4 or mkv)\");}}else if(format==='audio'){if(audioTypes.includes(selectedFile.type)){setError(null);setFile(selectedFile);setDisabled(false);}else{setFile(null);setError(\"Please select an audio file (mp3 )\");}}}};var _useVideoStorage=useVideoStorage(file),progress=_useVideoStorage.progress,url=_useVideoStorage.url;var handleSubmit=function handleSubmit(){db.collection('CallMedia').add({call_id:call_id,url:url,format:format}).then(function(){setFile(null);setDisabled(true);setMessage('The File has been sent, If you wish to send another file repeat the same');});};var handleSession=function handleSession(){setSessionId(configData.session_id);setToken(configData.token);};var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var openInviteBox=function openInviteBox(){setOpenInvite(true);};var closeInvite=function closeInvite(){setOpenInvite(false);};var handleWhiteboardOpen=function handleWhiteboardOpen(){setWhiteboardOpen(true);};var handleWhiteboardClose=function handleWhiteboardClose(){setWhiteboardOpen(false);};var handleDrawerOpen=function handleDrawerOpen(){setOpenDrawer(true);};var handleDrawerClose=function handleDrawerClose(){setOpenDrawer(false);};return/*#__PURE__*/_jsx(Page,{title:\"Video Call | LyoIms\",children:/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(AppBar,{position:\"absolute\",style:{top:64,background:'black'},className:clsx(classes.appBar,_defineProperty({},classes.appBarShift,openDrawer)),children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",noWrap:true,className:classes.title}),/*#__PURE__*/_jsx(IconButton,{href:\"/\",children:/*#__PURE__*/_jsx(Button,{style:{background:'red',color:'white'},children:\"Disconnect\"})}),/*#__PURE__*/_jsx(IconButton,{target:\"_blank\",href:\"/machine-data\",children:/*#__PURE__*/_jsx(Button,{style:{background:'blue',color:'white'},children:\"Machines\"})}),/*#__PURE__*/_jsx(IconButton,{style:{color:'orange'},onClick:openInviteBox,children:/*#__PURE__*/_jsx(AddIcon,{})}),/*#__PURE__*/_jsx(IconButton,{target:\"_blank\",href:\"/whiteboard\",style:{color:'orange'},children:/*#__PURE__*/_jsx(OpenInBrowserIcon,{})}),/*#__PURE__*/_jsx(IconButton,{style:{color:'orange'},onClick:handleClickOpen,children:/*#__PURE__*/_jsx(AttachFileIcon,{})}),/*#__PURE__*/_jsx(IconButton,{style:{color:'orange'},\"aria-label\":\"open drawer\",edge:\"end\",onClick:handleDrawerOpen,className:clsx(openDrawer&&classes.hide),children:/*#__PURE__*/_jsx(QuestionAnswerIcon,{})})]})}),/*#__PURE__*/_jsxs(\"main\",{className:clsx(classes.content,_defineProperty({},classes.contentShift,openDrawer)),children:[/*#__PURE__*/_jsx(\"div\",{className:classes.drawerHeader}),/*#__PURE__*/_jsx(TestVideo,{config:config})]}),/*#__PURE__*/_jsxs(Drawer,{className:classes.drawer,variant:\"persistent\",anchor:\"right\",open:openDrawer,classes:{paper:classes.drawerPaper},children:[/*#__PURE__*/_jsx(\"div\",{className:classes.drawerHeader,children:/*#__PURE__*/_jsx(IconButton,{onClick:handleDrawerClose,children:theme.direction==='rtl'?/*#__PURE__*/_jsx(ChevronLeftIcon,{}):/*#__PURE__*/_jsx(ChevronRightIcon,{})})}),currentUser?/*#__PURE__*/_jsx(Chatbox,{call_id:call_id}):/*#__PURE__*/_jsxs(\"b\",{children:[\"You need to \",/*#__PURE__*/_jsx(\"a\",{href:\"/login\",children:\"Login\"}),\" to enable chat\"]})]}),/*#__PURE__*/_jsxs(Dialog,{fullWidth:true,open:open,onClose:handleClose,children:[/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Close\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 dark:text-white md:text-3xl\",children:\"Share Media \"}),\"                  \",/*#__PURE__*/_jsxs(\"select\",{style:{border:'2px solid whitesmoke',margin:'2%'},value:format,required:true,fullWidth:true,InputLabelProps:{shrink:true},onChange:function onChange(e){return setFormat(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",selected:true,hidden:true,children:\"Select a Format\"}),/*#__PURE__*/_jsx(\"option\",{value:\"image\",children:\"Image\"}),/*#__PURE__*/_jsx(\"option\",{value:\"video\",children:\"Video\"}),/*#__PURE__*/_jsx(\"option\",{value:\"audio\",children:\"Audio\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"w-full flex flex-col items-center px-4 py-6 bg-white text-black rounded-lg shadow-lg tracking-wide uppercase border border-blue cursor-pointer hover:bg-black hover:text-black\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8\",fill:\"currentColor\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-2 text-base leading-normal\",children:\"Select a file\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,type:\"file\",class:\"hidden\"})]}),file&&/*#__PURE__*/_jsxs(\"p\",{children:[progress,\"% uploaded\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600 dark:text-gray-400\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,style:{backgroundColor:'orange',marginLeft:'25%'},disabled:disabled,href:\"#\",className:\"px-5 py-2 w-50 mb-10 font-semibold text-gray-100 transition-colors duration-200 transform bg-gray-900 rounded-md hover:bg-gray-700\",children:\"Send Now\"}),message&&/*#__PURE__*/_jsx(\"b\",{style:{color:'green'},children:message})]}),/*#__PURE__*/_jsxs(Dialog,{fullScreen:true,open:whiteboardOpen,onClose:handleWhiteboardClose,children:[/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsx(Button,{onClick:handleWhiteboardClose,children:\"Close\"})}),/*#__PURE__*/_jsx(Whiteboard,{})]}),/*#__PURE__*/_jsxs(Dialog,{open:openInvite,onClose:closeInvite,fullWidth:true,children:[/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsx(Button,{onClick:closeInvite,children:\"Close\"})}),/*#__PURE__*/_jsx(InviteForm,{})]})]})});}","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/components/VideoCall/RenderVc.jsx"],"names":["useEffect","useState","VideoCall","Button","Card","Container","Dialog","DialogActions","DialogContent","DialogTitle","Grid","InputLabel","Select","TextField","Toolbar","db","useAuth","firebaseLooper","useVideoStorage","OpenTokPage","config","SettingsBackupRestoreSharp","ListUsers","screenfull","Chatbox","React","clsx","makeStyles","useTheme","Drawer","AppBar","CssBaseline","List","Typography","Divider","IconButton","MenuIcon","ChevronLeftIcon","ChevronRightIcon","ListItem","ListItemIcon","ListItemText","InboxIcon","MailIcon","AttachFileIcon","QuestionAnswerIcon","OpenInBrowserIcon","API_KEY","SESSION_ID","TOKEN","Whiteboard","InviteForm","AddIcon","TestVideo","EntryPage","Page","drawerWidth","useStyles","theme","root","background","display","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","width","easeOut","enteringScreen","marginRight","title","flexGrow","hide","drawer","flexShrink","drawerPaper","drawerHeader","alignItems","padding","spacing","mixins","toolbar","justifyContent","content","contentShift","RenderVc","classes","openDrawer","setOpenDrawer","file","setFile","error","setError","call_id","setCallId","currentCall","setCurrentCall","whiteboardOpen","setWhiteboardOpen","format","setFormat","configData","setConfigData","disabled","setDisabled","open","setOpen","openInvite","setOpenInvite","token","setToken","session_id","setSessionId","types","videoTypes","audioTypes","message","setMessage","currentUser","collection","get","then","snapshot","data","console","log","onSnapshot","callData","sort","a","b","index","length","handleChange","e","selectedFile","target","files","includes","type","progress","url","handleSubmit","add","handleSession","handleClickOpen","handleClose","openInviteBox","closeInvite","handleWhiteboardOpen","handleWhiteboardClose","handleDrawerOpen","handleDrawerClose","top","color","paper","direction","border","margin","shrink","value","backgroundColor","marginLeft"],"mappings":"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","sourcesContent":["import  { useEffect, useState } from 'react';\r\nimport '@opentok/client';\r\n// import './index.css';\r\n// import './polyfills';\r\n// import {\r\n\r\n//   API_KEY,\r\n//   SESSION_ID,\r\n//   TOKEN\r\n// } from './config';\r\nimport VideoCall from './VideoCall';\r\n import { Button, Card, Container, Dialog, DialogActions, DialogContent, DialogTitle, Grid, InputLabel, Select, TextField, Toolbar } from '@material-ui/core';\r\nimport { db } from '../../firebase';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { firebaseLooper } from '../../utils/tools';\r\nimport { useVideoStorage } from '../../utils/useVideoStorage';\r\nimport OpenTokPage from '../../Pages/VideoCallPage/OpenTokPage';\r\nimport config from '../../Pages/VideoCallPage/config';\r\nimport { SettingsBackupRestoreSharp } from '@material-ui/icons';\r\nimport ListUsers from './ListUsers';\r\nimport screenfull from 'screenfull';\r\nimport Chatbox from '../../Pages/VideoCallPage/components/Chatbox';\r\n\r\n\r\nimport React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport List from '@material-ui/core/List';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport QuestionAnswerIcon from '@material-ui/icons/QuestionAnswer';\r\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\r\nimport {\r\n\r\n  API_KEY,\r\n  SESSION_ID,\r\n  TOKEN\r\n} from './config';\r\nimport Whiteboard from '../Whiteboard/Whiteboard';\r\nimport InviteForm from '../InviteForm/InviteForm';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport TestVideo from '../../VideoCallModel/TestVideo';\r\nimport EntryPage from '../../VideoCallModel/EntryPage';\r\nimport Page from '../Page';\r\n\r\nconst drawerWidth = 550;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    background: 'black',\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginRight: drawerWidth,\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n  },\r\n  drawerHeader: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    padding: theme.spacing(0, 1),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n    justifyContent: 'flex-start',\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n    transition: theme.transitions.create('margin', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    marginRight: -drawerWidth,\r\n  },\r\n  contentShift: {\r\n    transition: theme.transitions.create('margin', {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginRight: 0,\r\n  },\r\n}));\r\n\r\nexport default function RenderVc({config}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [openDrawer, setOpenDrawer] = React.useState(false);\r\n     const [file, setFile] = useState(null);\r\n   const [error, setError] = useState(\"\")\r\n   const [call_id, setCallId] = useState('')\r\n   const [currentCall, setCurrentCall] = useState([])\r\n   const [whiteboardOpen, setWhiteboardOpen] = useState(false)\r\n    const [format, setFormat] = useState('')\r\n    const [configData, setConfigData] = useState([])\r\n    const [disabled, setDisabled] = useState(true)\r\n    const [open, setOpen] = useState(false)\r\n    const [openInvite, setOpenInvite] = useState(false)\r\n    const [token, setToken] = useState(`${config.TOKEN}`)\r\n    const [session_id, setSessionId] = useState(`${config.SESSION_ID}`)\r\n    const types = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\r\n     const videoTypes = [\"video/mp4\", \"video/mkv\", \"video/mov\"];\r\n   const audioTypes = [\"audio/mp3\", \"audio/mpeg\"]\r\n      const [message, setMessage] = useState('')\r\n      const {currentUser} = useAuth()\r\n     useEffect(() => {\r\n      \r\n        \r\n \r\n      db.collection('OpenTokConfig').get().then(snapshot => {\r\n      const data = firebaseLooper(snapshot)\r\n      console.log(data[0])\r\n      setConfigData(data[0])\r\n      \r\n    })\r\n\r\n    db.collection('CallCurrent').onSnapshot(snapshot => {\r\n      const callData = firebaseLooper(snapshot)\r\n        callData.sort(function(a,b){\r\n          return(a.index-b.index)\r\n        })\r\n      setCurrentCall(callData[callData.length -1])\r\n      setCallId(callData[callData.length-1].call_id)\r\n      \r\n    })\r\n\r\n  }, [])\r\n\r\n  const handleChange = (e) => {\r\n        let selectedFile = e.target.files[0];\r\n          \r\n           if (selectedFile) {\r\n          if(format === 'image'){\r\n             if (types.includes(selectedFile.type)) {\r\n                setError(null);\r\n                setFile(selectedFile);\r\n                setDisabled(false)\r\n            } else {\r\n                setFile(null);\r\n                setError(\"Please select an image file (png or jpg)\");\r\n                \r\n            }\r\n          }else if(format === 'video'){\r\n            if (videoTypes.includes(selectedFile.type)) {\r\n                setError(null);\r\n                setFile(selectedFile);\r\n                 setDisabled(false)\r\n            } else {\r\n                setFile(null);\r\n                setError(\"Please select a video file (mp4 or mkv)\");\r\n            }\r\n          }else if(format === 'audio'){\r\n            if (audioTypes.includes(selectedFile.type)) {\r\n                setError(null);\r\n                setFile(selectedFile);\r\n                 setDisabled(false)\r\n            } else {\r\n                setFile(null);\r\n                setError(\"Please select an audio file (mp3 )\");\r\n            }\r\n          }\r\n           \r\n        }\r\n    }\r\n    let { progress, url } = useVideoStorage(file);\r\n\r\n    const handleSubmit = () => {\r\n      db.collection('CallMedia').add({call_id,url, format}).then(() => {\r\n        setFile(null)\r\n        setDisabled(true)\r\n        setMessage('The File has been sent, If you wish to send another file repeat the same')\r\n      })\r\n    }\r\n    const handleSession = () => {\r\n      setSessionId(configData.session_id)\r\n      setToken(configData.token)\r\n    }\r\n    const handleClickOpen = () => {\r\n      setOpen(true)\r\n    }\r\n    const handleClose = () => {\r\n      setOpen(false)\r\n    }\r\n     const openInviteBox = () => {\r\n      setOpenInvite(true)\r\n    }\r\n    const closeInvite = () => {\r\n      setOpenInvite(false)\r\n    }\r\n     const handleWhiteboardOpen = () => {\r\n      setWhiteboardOpen(true)\r\n    }\r\n    const handleWhiteboardClose = () => {\r\n      setWhiteboardOpen(false)\r\n    }\r\n    \r\n\r\n  const handleDrawerOpen = () => {\r\n    setOpenDrawer(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setOpenDrawer(false);\r\n  };\r\n\r\n  return (\r\n    <Page title='Video Call | LyoIms'>\r\n       <div className={classes.root}>\r\n      <CssBaseline />\r\n      <AppBar\r\n        position=\"absolute\"\r\n        style={{top: 64, background: 'black'}}\r\n        className={clsx(classes.appBar, {\r\n          [classes.appBarShift]: openDrawer,\r\n        })}\r\n      >\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" noWrap className={classes.title}>\r\n           \r\n          </Typography>\r\n          <IconButton href=\"/\">\r\n            <Button style={{background: 'red', color: 'white'}}>Disconnect</Button>\r\n          </IconButton>\r\n          <IconButton target=\"_blank\"  href=\"/machine-data\">\r\n            <Button style={{background: 'blue', color: 'white'}}>Machines</Button>\r\n          </IconButton>\r\n          <IconButton style={{color: 'orange'}} onClick={openInviteBox}>\r\n            <AddIcon/>\r\n          </IconButton>\r\n          <IconButton target=\"_blank\" href='/whiteboard' style={{color: 'orange'}} >\r\n            <OpenInBrowserIcon/>\r\n          </IconButton>\r\n          <IconButton style={{color: 'orange'}} onClick={handleClickOpen}>\r\n            <AttachFileIcon/>\r\n          </IconButton>\r\n          <IconButton\r\n            style={{color: 'orange'}}\r\n            aria-label=\"open drawer\"\r\n            edge=\"end\"\r\n            onClick={handleDrawerOpen}\r\n            className={clsx(openDrawer && classes.hide)}\r\n          >\r\n           <QuestionAnswerIcon/>\r\n          </IconButton>\r\n          \r\n        </Toolbar>\r\n      </AppBar>\r\n      <main\r\n        className={clsx(classes.content, {\r\n          [classes.contentShift]: openDrawer,\r\n        })}\r\n      >\r\n        <div className={classes.drawerHeader} />\r\n       <TestVideo config={config}/>\r\n      </main>\r\n      <Drawer\r\n        className={classes.drawer}\r\n        variant=\"persistent\"\r\n        anchor=\"right\"\r\n        open={openDrawer}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}\r\n      >\r\n        <div className={classes.drawerHeader}>\r\n          <IconButton onClick={handleDrawerClose}>\r\n            {theme.direction === 'rtl' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\r\n          </IconButton>\r\n        </div>\r\n       \r\n      {currentUser ? <Chatbox call_id={call_id}/> : <b>You need to <a href='/login'>Login</a> to enable chat</b>}\r\n      </Drawer>\r\n           <Dialog fullWidth open={open} onClose={handleClose}>\r\n             <Toolbar>\r\n              <Button onClick={handleClose}>Close</Button>\r\n           </Toolbar>            \r\n               <h2 className=\"text-2xl font-bold text-gray-800 dark:text-white md:text-3xl\">Share Media </h2>                  <select\r\n             style={{ border: '2px solid whitesmoke', margin: '2%'}}\r\n                \r\n                value={format}\r\n                  \r\n                required\r\n                  fullWidth\r\n                  InputLabelProps={{\r\n                    shrink: true,\r\n                  }}\r\n                  onChange={(e) => setFormat(e.target.value)}\r\n                >\r\n                  <option value='' selected hidden>Select a Format</option>\r\n                  <option value='image'>Image</option>\r\n                  <option value='video'>Video</option>\r\n                    <option value='audio'>Audio</option>\r\n                    \r\n                </select>\r\n                \r\n                \r\n                <label className=\"w-full flex flex-col items-center px-4 py-6 bg-white text-black rounded-lg shadow-lg tracking-wide uppercase border border-blue cursor-pointer hover:bg-black hover:text-black\">\r\n                    <svg className=\"w-8 h-8\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\r\n                        <path d=\"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z\" />\r\n                    </svg>\r\n                    <span className=\"mt-2 text-base leading-normal\">Select a file</span>\r\n                    <input onChange={handleChange} type='file' class=\"hidden\" />\r\n                </label>\r\n           \r\n                {file && <p>{progress}% uploaded</p>}\r\n                <p className=\"mt-2 text-gray-600 dark:text-gray-400\"></p>\r\n                \r\n                \r\n                    <button onClick={handleSubmit} style={{backgroundColor: 'orange', marginLeft: '25%'}} disabled={disabled} href=\"#\" className=\"px-5 py-2 w-50 mb-10 font-semibold text-gray-100 transition-colors duration-200 transform bg-gray-900 rounded-md hover:bg-gray-700\">Send Now</button>\r\n                \r\n                {message && <b style={{color: 'green'}}>{message}</b>}\r\n\r\n\r\n            </Dialog> \r\n             \r\n            <Dialog fullScreen open={whiteboardOpen} onClose={handleWhiteboardClose}>\r\n              <Toolbar>\r\n              <Button onClick={handleWhiteboardClose}>Close</Button>\r\n           </Toolbar> \r\n              <Whiteboard/>\r\n            </Dialog>\r\n\r\n            <Dialog open={openInvite} onClose={closeInvite} fullWidth>\r\n              <Toolbar>\r\n              <Button onClick={closeInvite}>Close</Button>\r\n           </Toolbar>\r\n              <InviteForm/>\r\n            </Dialog>\r\n           \r\n    </div>\r\n    </Page>\r\n   \r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}