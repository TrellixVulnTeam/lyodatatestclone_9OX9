{"ast":null,"code":"import _slicedToArray from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Button,Container,Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle,FormControl,Grid,InputLabel,makeStyles,Select,Snackbar,TextField,Typography}from'@material-ui/core';import{useHistory}from'react-router-dom';import AccessTimeIcon from'@material-ui/icons/AccessTime';import{db,storageRef}from'../../firebase';import{Alert,AlertTitle}from'@material-ui/lab';import VisibilityIcon from'@material-ui/icons/Visibility';import EditIcon from'@material-ui/icons/Edit';import DeleteForeverIcon from'@material-ui/icons/DeleteForever';import{useStepStorage}from'../../utils/useStepStorage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{borderBottomColor:\"black\",backgroundColor:'white'},statsItem:{alignItems:'center',display:'flex'},statsIcon:{marginRight:theme.spacing(1)},dataBox:{borderRadius:\"20px\",background:'white',alignItems:\"center\"},divButton:{color:\"#32e0c4\"}};});var StepItem=function StepItem(_ref){var _data$desc;var data=_ref.data;var classes=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openEdit=_useState4[0],setOpenEdit=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openView=_useState6[0],setOpenView=_useState6[1];var _useState7=useState(data.title),_useState8=_slicedToArray(_useState7,2),title=_useState8[0],setTitle=_useState8[1];var _useState9=useState(data.desc),_useState10=_slicedToArray(_useState9,2),desc=_useState10[0],setDesc=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),file=_useState12[0],setFile=_useState12[1];var _useState13=useState(data.format),_useState14=_slicedToArray(_useState13,2),format=_useState14[0],setFormat=_useState14[1];var _useState15=useState(data.createdAt),_useState16=_slicedToArray(_useState15,2),createdAt=_useState16[0],setCreatedAt=_useState16[1];var _useState17=useState(data.type),_useState18=_slicedToArray(_useState17,2),type=_useState18[0],setType=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),error=_useState20[0],setError=_useState20[1];var _useState21=useState(true),_useState22=_slicedToArray(_useState21,2),disabled=_useState22[0],setDisabled=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),loading=_useState24[0],setLoading=_useState24[1];var types=[\"image/png\",\"image/jpeg\",\"image/jpg\"];var videoTypes=[\"video/mp4\",\"video/mkv\",\"video/mov\"];var audioTypes=[\"audio/mp3\",\"audio/mpeg\"];var handleChange=function handleChange(e){var selectedFile=e.target.files[0];setDisabled(false);if(selectedFile){if(format==='image'){if(types.includes(selectedFile.type)){setError(null);setFile(selectedFile);}else{setFile(null);setError(\"Please select an image file (png or jpg)\");}}else if(format==='video'){if(videoTypes.includes(selectedFile.type)){setError(null);setFile(selectedFile);}else{setFile(null);setError(\"Please select a video file (mp4 or mkv)\");}}else if(format==='audio'){if(audioTypes.includes(selectedFile.type)){setError(null);setFile(selectedFile);}else{setFile(null);setError(\"Please select an audio file (mp3 )\");}}}};var _useStepStorage=useStepStorage(file),progress=_useStepStorage.progress,url=_useStepStorage.url;function getMedia(){if(data.format==='image'){return/*#__PURE__*/_jsx(\"img\",{className:\"h-64 bg-cover lg:rounded-lg lg:h-full\",src:data.url});}else if(data.format==='video'){return/*#__PURE__*/_jsx(\"div\",{className:\"h-64 bg-cover lg:rounded-lg lg:h-full\",children:/*#__PURE__*/_jsx(\"video\",{style:{width:'100%',height:'auto'},controls:true,children:/*#__PURE__*/_jsx(\"source\",{src:data.url})})});}else if(data.format==='audio'){return/*#__PURE__*/_jsx(\"div\",{className:\"h-64 bg-cover lg:rounded-lg lg:h-full\",children:/*#__PURE__*/_jsx(\"audio\",{style:{marginTop:'15%',marginRight:'50px'},controls:true,children:/*#__PURE__*/_jsx(\"source\",{src:data.url})})});}}var handleView=function handleView(){setOpenView(true);};var handleViewClose=function handleViewClose(){setOpenView(false);};var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var handleEdit=function handleEdit(){setOpenEdit(true);};var handleEditClose=function handleEditClose(){setOpenEdit(false);};var handleDelete=function handleDelete(id){db.collection('stepData').doc(id).delete().then(function(data){return/*#__PURE__*/_jsx(Snackbar,{});});};var handleImageUpdate=function handleImageUpdate(id){var reqData={url:url};db.collection('stepData').doc(id).update(reqData).then(function(data){setLoading(false);console.log(data);});};var updateStep=function updateStep(id){setLoading(true);var reqData={title:title,desc:desc,type:type,format:format};db.collection('stepData').doc(id).update(reqData).then(function(data){setLoading(false);console.log(data);});};function getType(){if(type==='info'){return/*#__PURE__*/_jsx(\"div\",{class:\"flex-shrink-0 w-24 h-24 text-blue-900 rounded-full inline-flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"svg\",{class:\"bi bi-info-square w-12 h-12\",viewBox:\"0 0 24 24\",fill:\"currentColor\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"})]})});}else if(type==='critical'){return/*#__PURE__*/_jsx(\"div\",{class:\"flex-shrink-0 w-24 h-24  text-yellow-900 rounded-full inline-flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"svg\",{fill:\"currentColor\",class:\"w-12 h-12\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z\"})]})});}else if(type==='normal'){return/*#__PURE__*/_jsx(\"div\",{class:\"flex-shrink-0 w-24 h-24  text-yellow-900 rounded-full inline-flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{fill:\"none\",stroke:\"currentColor\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",class:\"w-12 h-12\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"})})});}else if(type==='camera'){return/*#__PURE__*/_jsx(\"div\",{class:\"flex-shrink-0 w-24 h-24  text-green-700 rounded-full inline-flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"svg\",{fill:\"currentColor\",class:\"w-12 h-12\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z\"})]})});}}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.dataBox,children:[/*#__PURE__*/_jsx(Grid,{xs:12,children:/*#__PURE__*/_jsx(\"section\",{class:\"text-gray-600 body-font\",children:/*#__PURE__*/_jsx(\"div\",{class:\"container  mx-auto flex flex-wrap\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"flex relative pt-10 pb-20 sm:items-center md:w-2/3 mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"h-full w-6 absolute inset-0 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"h-full w-1 bg-gray-200 pointer-events-none\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"flex-shrink-0 w-6 h-6 rounded-full mt-10 sm:mt-0 inline-flex items-center justify-center bg-yellow-800 text-white relative z-10 title-font font-medium text-sm\",children:data.index+1}),/*#__PURE__*/_jsxs(\"div\",{class:\"flex-grow md:pl-8 pl-6 flex sm:items-center items-start flex-col sm:flex-row\",children:[getType(),/*#__PURE__*/_jsxs(\"div\",{class:\"w-1/2 flex-grow sm:pl-6 mt-6 sm:mt-0\",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"font-medium title-font text-gray-900 mb-1 text-xl\",children:data.title}),/*#__PURE__*/_jsx(\"div\",{className:\"w-64 truncate\",children:/*#__PURE__*/_jsxs(Typography,{className:\"\",children:[(_data$desc=data.desc)===null||_data$desc===void 0?void 0:_data$desc.slice(0,150),\"...\"]})})]}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(EditIcon,{}),onClick:handleEdit,color:\"primary\"}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(VisibilityIcon,{}),onClick:function onClick(){handleView();},className:classes.divButton}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(DeleteForeverIcon,{}),onClick:handleClickOpen,color:\"secondary\"})]})]})})})}),/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsxs(Alert,{severity:\"error\",variant:\"filled\",children:[/*#__PURE__*/_jsx(AlertTitle,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Delete\"})}),/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",children:\"Are You Sure You Want To Delete?\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{color:\"white\",id:\"alert-dialog-description\",children:\"Deleting will be a permanent action and data pervailing will be permanently deleted and can not be retrieved back.                    \"})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"primary\",variant:\"outlined\",children:\"Disagree\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){handleDelete(data.id);handleClose();},color:\"secondary\",variant:\"outlined\",autoFocus:true,children:\"Agree\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openEdit,onClose:handleEditClose,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",children:/*#__PURE__*/_jsxs(\"b\",{children:[\"Edit \",title]})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(\"form\",{className:classes.form,children:[error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error}),/*#__PURE__*/_jsx(TextField,{defaultValue:title,error:title===\"\",variant:\"outlined\",margin:\"normal\",label:\"Title\",required:true,fullWidth:true,id:\"title\",name:\"title\",autoFocus:true,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{defaultValue:desc,error:desc===\"\",variant:\"outlined\",margin:\"normal\",required:true,label:\"Description\",fullWidth:true,name:\"desc\",onChange:function onChange(e){return setDesc(e.target.value);},id:\"desc\",multiline:true,style:{marginBottom:'20px'}}),/*#__PURE__*/_jsxs(FormControl,{required:true,variant:\"outlined\",fullWidth:true,style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Select Type\"}),/*#__PURE__*/_jsxs(Select,{required:true,label:\"Select type\",variant:\"outlined\",value:type,fullWidth:true,InputLabelProps:{shrink:true},onChange:function onChange(e){return setType(e.target.value);},style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"info\",children:\"Info\"}),/*#__PURE__*/_jsx(\"option\",{value:\"camera\",children:\"Camera\"}),/*#__PURE__*/_jsx(\"option\",{value:\"critical\",children:\"Critical\"}),/*#__PURE__*/_jsx(\"option\",{value:\"normal\",children:\"Normal\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(FormControl,{required:true,variant:\"outlined\",fullWidth:true,style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Select Format \"}),/*#__PURE__*/_jsxs(Select,{required:true,variant:\"outlined\",label:\"Select Format\",value:format,fullWidth:true,InputLabelProps:{shrink:true},onChange:function onChange(e){return setFormat(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"image\",children:\"Image\"}),/*#__PURE__*/_jsx(\"option\",{value:\"video\",children:\"Video\"}),/*#__PURE__*/_jsx(\"option\",{value:\"audio\",children:\"Audio\"})]})]}),getMedia(),/*#__PURE__*/_jsxs(Alert,{children:[\"To Update Media Click \",/*#__PURE__*/_jsx(\"b\",{children:\"'Update Media'\"}),\" After uploading a new Media file\"]}),/*#__PURE__*/_jsx(InputLabel,{children:\"Replace the current Media file\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleChange}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h4\",{children:[progress,\"% uploaded\"]})}),/*#__PURE__*/_jsx(Button,{disabled:disabled||progress<100||type===''||file===null,style:{color:'orangered'},variant:\"outlined\",fullWidth:true,onClick:function onClick(){return handleImageUpdate(data.id);},children:\"Update Media\"}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:handleEditClose,children:\"Cancel\"}),!loading&&/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:title===\"\"||desc===\"\"||(desc===null||desc===void 0?void 0:desc.length)>300||(title===null||title===void 0?void 0:title.length)>30,variant:\"outlined\",color:\"primary\",className:classes.submit,onClick:function onClick(e){updateStep(data.id);handleEditClose();},children:\"Update\"}),loading&&/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"outlined\",color:\"primary\",disabled:true,className:classes.submit,children:\"Updating values...\"})]})]})})]}),/*#__PURE__*/_jsxs(Dialog,{open:openView,onClose:handleViewClose,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",children:\"View Data\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(\"form\",{className:classes.form,children:[/*#__PURE__*/_jsx(TextField,{defaultValue:title,variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"title\",name:\"title\",autoFocus:true,disabled:true}),/*#__PURE__*/_jsx(TextField,{defaultValue:desc,variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"desc\",disabled:true,id:\"desc\",multiline:true}),getMedia(),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:handleViewClose,children:\"Cancel\"})})]})})]})]})});};export default StepItem;","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/Steps/StepItem.jsx"],"names":["React","useEffect","useState","Button","Container","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","FormControl","Grid","InputLabel","makeStyles","Select","Snackbar","TextField","Typography","useHistory","AccessTimeIcon","db","storageRef","Alert","AlertTitle","VisibilityIcon","EditIcon","DeleteForeverIcon","useStepStorage","useStyles","theme","root","borderBottomColor","backgroundColor","statsItem","alignItems","display","statsIcon","marginRight","spacing","dataBox","borderRadius","background","divButton","color","StepItem","data","classes","open","setOpen","openEdit","setOpenEdit","openView","setOpenView","title","setTitle","desc","setDesc","file","setFile","format","setFormat","createdAt","setCreatedAt","type","setType","error","setError","disabled","setDisabled","loading","setLoading","types","videoTypes","audioTypes","handleChange","e","selectedFile","target","files","includes","progress","url","getMedia","width","height","marginTop","handleView","handleViewClose","handleClickOpen","handleClose","handleEdit","handleEditClose","handleDelete","id","collection","doc","delete","then","handleImageUpdate","reqData","update","console","log","updateStep","getType","index","slice","form","value","marginBottom","shrink","length","submit"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Button, Container, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Grid, InputLabel, makeStyles, Select, Snackbar, TextField, Typography } from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\r\nimport { db, storageRef } from '../../firebase';\r\nimport { Alert, AlertTitle } from '@material-ui/lab';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { useStepStorage } from '../../utils/useStepStorage';\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    borderBottomColor: \"black\",\r\n    backgroundColor: 'white',\r\n  \r\n  },\r\n  statsItem: {\r\n    alignItems: 'center',\r\n    display: 'flex'\r\n  },\r\n  statsIcon: {\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  dataBox:{\r\n      borderRadius: \"20px\",\r\n      background: 'white',\r\n     \r\n      alignItems: \"center\"\r\n  },\r\n  divButton: {\r\n      color: \"#32e0c4\",\r\n      \r\n  }\r\n}));\r\n\r\nconst StepItem = ({ data})  => {\r\n    const classes = useStyles()\r\n    const [open, setOpen] = useState(false)\r\n    const [openEdit, setOpenEdit] = useState(false)\r\n    const [openView, setOpenView] = useState(false)\r\n    const [title, setTitle] = useState(data.title)\r\n    const [desc, setDesc] = useState(data.desc)\r\n     const [file, setFile] = useState(null)\r\n     const [format, setFormat] = useState(data.format)\r\n    const [createdAt, setCreatedAt] = useState(data.createdAt)\r\n     const [type, setType] = useState(data.type);\r\n    const [error,setError] = useState('')\r\n    const [disabled, setDisabled] = useState(true)\r\n    const [loading, setLoading] = useState(false);\r\n    const types = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\r\n    const videoTypes = [\"video/mp4\", \"video/mkv\", \"video/mov\"];\r\n   const audioTypes = [\"audio/mp3\", \"audio/mpeg\"]\r\n       const handleChange = (e) => {\r\n        let selectedFile = e.target.files[0]\r\n        setDisabled(false)\r\n           if (selectedFile) {\r\n          if(format === 'image'){\r\n             if (types.includes(selectedFile.type)) {\r\n                setError(null);\r\n                setFile(selectedFile);\r\n            } else {\r\n                setFile(null);\r\n                setError(\"Please select an image file (png or jpg)\");\r\n            }\r\n          }else if(format === 'video'){\r\n            if (videoTypes.includes(selectedFile.type)) {\r\n                setError(null);\r\n                setFile(selectedFile);\r\n            } else {\r\n                setFile(null);\r\n                setError(\"Please select a video file (mp4 or mkv)\");\r\n            }\r\n          }else if(format === 'audio'){\r\n            if (audioTypes.includes(selectedFile.type)) {\r\n                setError(null);\r\n                setFile(selectedFile);\r\n            } else {\r\n                setFile(null);\r\n                setError(\"Please select an audio file (mp3 )\");\r\n            }\r\n          }\r\n           \r\n        }\r\n      }\r\n          const { progress, url } = useStepStorage(file);\r\n\r\n          function getMedia(){\r\n            if (data.format === 'image'){\r\n              return <img className=\"h-64 bg-cover lg:rounded-lg lg:h-full\"  src={data.url}/>\r\n            }else if(data.format === 'video'){\r\n              return  (\r\n                <div className=\"h-64 bg-cover lg:rounded-lg lg:h-full\">\r\n                  <video style={{width: '100%', height: 'auto'}}  controls>\r\n                <source src={data.url}/>\r\n              </video>\r\n                </div>\r\n              )\r\n            }else if(data.format === 'audio'){\r\n\r\n              return (\r\n              <div className=\"h-64 bg-cover lg:rounded-lg lg:h-full\">\r\n                <audio style={{marginTop: '15%', marginRight: '50px'}} controls>\r\n             <source src={data.url}/>\r\n              </audio>\r\n              </div>\r\n              )\r\n            }\r\n          }\r\n\r\n    const handleView = () => {\r\n      setOpenView(true)\r\n      \r\n    }\r\n\r\n    const handleViewClose = () => {\r\n      setOpenView(false)\r\n    }\r\n\r\n    const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n   const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleEdit = () => {\r\n      setOpenEdit(true)\r\n    }\r\n  const handleEditClose = () => {\r\n      setOpenEdit(false)\r\n    }\r\n\r\n  const handleDelete = (id) => {\r\n    db.collection('stepData').doc(id).delete().then((data) => {\r\n      return(\r\n        <Snackbar ></Snackbar>\r\n      )\r\n    })\r\n}\r\nconst handleImageUpdate = (id) => {\r\n  const reqData = {url}\r\n      db.collection('stepData').doc(id).update(reqData).then((data)=>{\r\n        setLoading(false)\r\n      \r\n        console.log(data)\r\n      })\r\n}\r\nconst updateStep=(id) => {\r\n    setLoading(true)\r\n    \r\n    const reqData = {title,desc,type,format}\r\n      db.collection('stepData').doc(id).update(reqData).then((data)=>{\r\n        setLoading(false)\r\n        \r\n        console.log(data)\r\n      })\r\n  }\r\n\r\n  function getType() {\r\n    if(type === 'info'){\r\n      return(\r\n        <div class=\"flex-shrink-0 w-24 h-24 text-blue-900 rounded-full inline-flex items-center justify-center\">\r\n          <svg  class=\"bi bi-info-square w-12 h-12\" viewBox=\"0 0 24 24\" fill=\"currentColor\"  >\r\n  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\r\n  <path d=\"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"/>\r\n</svg>\r\n        </div>\r\n      )\r\n    }else if (type === 'critical'){\r\n      return(\r\n        <div class=\"flex-shrink-0 w-24 h-24  text-yellow-900 rounded-full inline-flex items-center justify-center\">\r\n          \r\n          <svg  fill=\"currentColor\"  class=\"w-12 h-12\" viewBox=\"0 0 24 24\">\r\n          <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\r\n          <path d=\"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z\"/>\r\n        </svg>\r\n        </div>\r\n      )\r\n    }else if ( type === 'normal'){\r\n      return(\r\n        <div class=\"flex-shrink-0 w-24 h-24  text-yellow-900 rounded-full inline-flex items-center justify-center\">\r\n          <svg fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" class=\"w-12 h-12\" viewBox=\"0 0 24 24\">\r\n            <path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"></path>\r\n          </svg>\r\n        </div>\r\n      )\r\n    }else if (type === 'camera'){\r\n      return(\r\n         <div class=\"flex-shrink-0 w-24 h-24  text-green-700 rounded-full inline-flex items-center justify-center\">\r\n          <svg fill=\"currentColor\"  class=\"w-12 h-12\" viewBox=\"0 0 24 24\" >\r\n  <path d=\"M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z\"/>\r\n  <path d=\"M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z\"/>\r\n</svg>\r\n      </div>\r\n      )\r\n\r\n     \r\n      \r\n    }\r\n  }\r\n    return (\r\n        \r\n        <Container>\r\n            <div className={classes.dataBox}>\r\n            <Grid xs={12}>\r\n                \r\n         <section class=\"text-gray-600 body-font\">\r\n  <div class=\"container  mx-auto flex flex-wrap\">\r\n    <div class=\"flex relative pt-10 pb-20 sm:items-center md:w-2/3 mx-auto\">\r\n      <div class=\"h-full w-6 absolute inset-0 flex items-center justify-center\">\r\n        <div class=\"h-full w-1 bg-gray-200 pointer-events-none\"></div>\r\n      </div>\r\n      <div class=\"flex-shrink-0 w-6 h-6 rounded-full mt-10 sm:mt-0 inline-flex items-center justify-center bg-yellow-800 text-white relative z-10 title-font font-medium text-sm\">{data.index + 1}</div>\r\n      <div class=\"flex-grow md:pl-8 pl-6 flex sm:items-center items-start flex-col sm:flex-row\">\r\n        {getType()}\r\n        <div class=\"w-1/2 flex-grow sm:pl-6 mt-6 sm:mt-0\">\r\n          <h2 class=\"font-medium title-font text-gray-900 mb-1 text-xl\">{data.title}</h2>\r\n          <div className='w-64 truncate'>\r\n            <Typography className='' >{data.desc?.slice(0,150)}...</Typography>\r\n          </div>\r\n          \r\n        </div>\r\n        <Button startIcon={<EditIcon/>}  onClick={handleEdit}  color=\"primary\"></Button>\r\n            <Button startIcon={<VisibilityIcon/>} \r\n            onClick={() =>\r\n             {handleView()}} \r\n             className={classes.divButton}></Button>\r\n            <Button startIcon={<DeleteForeverIcon/>}  onClick={handleClickOpen}  color=\"secondary\"></Button>\r\n      </div>\r\n    </div>   \r\n  </div>\r\n</section>\r\n            </Grid>\r\n          \r\n              <Dialog\r\n                    open={open}\r\n                    onClose={handleClose}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                    aria-describedby=\"alert-dialog-description\"\r\n                >\r\n                  <Alert severity=\"error\" variant=\"filled\">\r\n                    <AlertTitle><strong>Delete</strong></AlertTitle>\r\n                    <DialogTitle id=\"alert-dialog-title\">{\"Are You Sure You Want To Delete?\"}</DialogTitle>\r\n                    <DialogContent>\r\n                    <DialogContentText color=\"white\" id=\"alert-dialog-description\">\r\n                        Deleting will be a permanent action and data pervailing will be permanently deleted and can not be retrieved back.                    </DialogContentText>\r\n                    </DialogContent>\r\n                    </Alert>\r\n                    <DialogActions>\r\n                    <Button onClick={handleClose} color=\"primary\" variant=\"outlined\">\r\n                        Disagree\r\n                    </Button>\r\n                    <Button   onClick={(e)=>{\r\n                        handleDelete(data.id);\r\n                         handleClose()}} color=\"secondary\" variant=\"outlined\" autoFocus>\r\n                        Agree\r\n                    </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={openEdit}\r\n                    onClose={handleEditClose}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                    aria-describedby=\"alert-dialog-description\"\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-title\">{<b>Edit {title}</b>}</DialogTitle>\r\n                    <DialogContent>\r\n                 \r\n                    <form className={classes.form}  >\r\n                      {error && <Alert severity='error'>{error}</Alert>}\r\n                        <TextField\r\n                       \r\n                        defaultValue={title}    \r\n                        error={title === \"\"}                  \r\n                          variant=\"outlined\"\r\n                          margin=\"normal\"\r\n                          label=\"Title\"\r\n                          required\r\n                          fullWidth\r\n                          id=\"title\"\r\n                          name=\"title\"\r\n                          autoFocus\r\n                          onChange={(e) => setTitle(e.target.value)}\r\n                        />\r\n                        <TextField\r\n                        defaultValue={desc}\r\n                        error={desc === \"\"}\r\n                          variant=\"outlined\"\r\n                          margin=\"normal\"\r\n                          required\r\n                          label=\"Description\"\r\n                          fullWidth\r\n                          name=\"desc\"\r\n                          onChange={(e) => setDesc(e.target.value)}\r\n                          id=\"desc\"\r\n                          multiline\r\n                          style={{marginBottom: '20px'}}\r\n                        />\r\n                        \r\n                        <FormControl required\r\n                        variant='outlined'\r\n                        fullWidth\r\n                        style={{marginBottom: '20px'}}\r\n                        >\r\n                        <InputLabel>Select Type</InputLabel>\r\n                        <Select\r\n                        required\r\n                        label=\"Select type\"\r\n                        variant='outlined'\r\n                        value={type}                      \r\n                          fullWidth\r\n                          InputLabelProps={{\r\n                            shrink: true,\r\n                          }}\r\n                          onChange={(e) => setType(e.target.value)}\r\n                          style={{marginBottom: '15px'}}\r\n                        >\r\n                          <option value='info'>Info</option>\r\n                          <option value='camera'>Camera</option>\r\n                            <option value='critical'>Critical</option>\r\n                            <option value='normal'>Normal</option>\r\n                        </Select>\r\n                        </FormControl>\r\n                        \r\n                        <br/>\r\n                        <FormControl required\r\n                        variant='outlined'\r\n                        fullWidth\r\n                        style={{marginBottom: '20px'}}\r\n                        >\r\n                           <InputLabel >Select Format </InputLabel>\r\n                          <Select\r\n                          required\r\n                          variant='outlined'\r\n                          label=\"Select Format\"\r\n                          value={format}\r\n                           \r\n                        \r\n                            fullWidth\r\n                            InputLabelProps={{\r\n                              shrink: true,\r\n                            }}\r\n                            onChange={(e) => setFormat(e.target.value)}\r\n                          >\r\n                            <option value='image'>Image</option>\r\n                            <option value='video'>Video</option>\r\n                              <option value='audio'>Audio</option>\r\n                             \r\n                          </Select>\r\n                        </FormControl>\r\n                       \r\n                          \r\n                          {getMedia()}\r\n                         <Alert>To Update Media Click <b>'Update Media'</b> After uploading a new Media file</Alert>\r\n                        <InputLabel>Replace the current Media file</InputLabel>\r\n                         <input type=\"file\"  onChange={handleChange} />\r\n                         {\r\n                           <div>\r\n                              <h4>{progress}% uploaded</h4>\r\n                           </div>\r\n                          \r\n                         }\r\n                       <Button disabled={disabled || progress < 100 || type==='' || file=== null} style={{color: 'orangered'}} variant='outlined' fullWidth onClick={() => handleImageUpdate(data.id)}>Update Media</Button>\r\n                    <DialogActions>\r\n                      <Button color=\"secondary\" onClick={handleEditClose}>Cancel</Button>\r\n                       {!loading && <Button\r\n                          type=\"submit\"\r\n                          disabled={title===\"\" || desc===\"\" || desc?.length > 300 || title?.length > 30} \r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          className={classes.submit}\r\n                          onClick={(e)=> \r\n                            {updateStep(data.id);\r\n                               handleEditClose();\r\n                          }}\r\n                        >\r\n                          Update\r\n                          </Button>}\r\n                      {\r\n                        loading && <Button\r\n                          type=\"submit\"\r\n                         \r\n                          variant=\"outlined\"\r\n                          color=\"primary\"\r\n                          disabled\r\n                          className={classes.submit}\r\n                        >Updating values...</Button>\r\n                      }   \r\n                    </DialogActions>\r\n                     \r\n                  </form>\r\n                    </DialogContent>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={openView}\r\n                    onClose={handleViewClose}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                    aria-describedby=\"alert-dialog-description\"\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-title\">{\"View Data\"}</DialogTitle>\r\n                    <DialogContent>\r\n                    \r\n                    <form className={classes.form}  >\r\n                        <TextField\r\n                        defaultValue={title}\r\n                          variant=\"outlined\"\r\n                          margin=\"normal\"\r\n                          required\r\n                          fullWidth\r\n                          id=\"title\"\r\n                          name=\"title\"\r\n                          autoFocus\r\n                          disabled\r\n                        />\r\n                        <TextField\r\n                        defaultValue={desc}\r\n                          variant=\"outlined\"\r\n                          margin=\"normal\"\r\n                          required\r\n                          fullWidth\r\n                          name=\"desc\"\r\n                          disabled\r\n                          id=\"desc\"\r\n                          multiline\r\n                        />\r\n                        {getMedia()}\r\n                    <DialogActions>\r\n                      <Button color=\"secondary\" onClick={handleViewClose}>Cancel</Button>\r\n                     \r\n                    </DialogActions>\r\n                     \r\n                  </form>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n            \r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default StepItem"]},"metadata":{},"sourceType":"module"}