{"ast":null,"code":"import _slicedToArray from\"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{TextField,Button,IconButton,Toolbar}from\"@material-ui/core\";import{useState}from\"react\";import{useEffect}from\"react\";import{db}from\"../../../firebase\";import{firebaseLooper}from\"../../../utils/tools\";import DeleteSweepIcon from'@material-ui/icons/DeleteSweep';import{Dialog}from\"@material-ui/core\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function SpecDetails(_ref){var match=_ref.match,tid=_ref.tid;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),descs=_useState2[0],setDescs=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),desc=_useState4[0],setDesc=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),issueComment=_useState6[0],setIssueComment=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),open=_useState8[0],setOpen=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),activeId=_useState10[0],setActiveId=_useState10[1];useEffect(function(){db.collection('DQNewReport').doc(match.params.id).collection('content').doc('designSpecs').collection('points').where('tid','==',\"\".concat(tid)).onSnapshot(function(snap){var data=firebaseLooper(snap);data.sort(function(a,b){return a.index-b.index;});setDescs(data);});},[]);function handleChange(id,data){var desc=data;db.collection('DQNewReport').doc(match.params.id).collection('content').doc('designSpecs').collection('points').doc(id).update({desc:desc});}function handleDelete(id){db.collection('DQNewReport').doc(match.params.id).collection('content').doc('designSpecs').collection('points').doc(id).delete();}function handleUpdateComment(id){db.collection('issueData').doc(id).update({content:issueComment});}function activateId(id){setActiveId(id);}function handleSubmit(){db.collection('DQNewReport').doc(match.params.id).collection('content').doc('designSpecs').collection('points').add({desc:desc,tid:tid,index:descs.length});}function handleOpen(){setOpen(true);}function handleClose(){setOpen(false);}function getResponse(res){if(res===1){return/*#__PURE__*/_jsx(\"b\",{style:{background:'#BBE5B3 0% 0% no-repeat padding-box',borderRadius:'100px',border:'2px solid var(--unnamed-color-ffffff)'},children:\"Accepted\"});}else if(res===2){return/*#__PURE__*/_jsx(\"b\",{style:{background:'#FF616D 0% 0% no-repeat padding-box',borderRadius:'100px',border:'2px solid var(--unnamed-color-ffffff)'},children:\"Rejected\"});}else if(res===3){return/*#__PURE__*/_jsx(\"b\",{style:{background:'#FFEAC9 0% 0% no-repeat padding-box',borderRadius:'100px',border:'2px solid var(--unnamed-color-ffffff)'},children:\"Issued\"});}else{return/*#__PURE__*/_jsx(\"b\",{style:{background:'#CDF0EA 0% 0% no-repeat padding-box',borderRadius:'100px',border:'2px solid var(--unnamed-color-ffffff)'},children:\"Not Updated\"});}}function handleComment(id){db.collection('issueData').doc(id).onSnapshot(function(snapshot){var data=snapshot.data();setIssueComment(data.content);});}return/*#__PURE__*/_jsxs(\"div\",{children:[descs.map(function(data){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[getResponse(data.response),data.issue_id!==\"\"?/*#__PURE__*/_jsx(Button,{style:{marginLeft:'20px',color:'orange'},onClick:function onClick(e){handleOpen(e);handleComment(data.issue_id);activateId(data.issue_id);},children:\"Check\"}):/*#__PURE__*/_jsx(\"p\",{})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl mr-3\",children:\"\\u29BF\"}),/*#__PURE__*/_jsx(TextField,{className:\"mb-5\",variant:\"outlined\",disabled:true,multiline:true,fullWidth:true,defaultValue:data.desc,onChange:handleChange(data.id,data.desc)},data.id)]})]});}),/*#__PURE__*/_jsxs(Dialog,{fullWidth:true,onClose:handleClose,open:open,children:[/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Close\"})}),/*#__PURE__*/_jsx(\"b\",{className:\"text-xl underline text-bold text-center mb-3\",children:\"Comment\"}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",value:issueComment,onChange:function onChange(e){return setIssueComment(e.target.value);},className:\"text-xl text-blue-gray-500 text-center\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){handleUpdateComment(activeId);handleClose();},children:\"Update\"})]})]});}export default SpecDetails;","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/DQNewReports/components/SpecDetails.jsx"],"names":["TextField","Button","IconButton","Toolbar","useState","useEffect","db","firebaseLooper","DeleteSweepIcon","Dialog","SpecDetails","match","tid","descs","setDescs","desc","setDesc","issueComment","setIssueComment","open","setOpen","activeId","setActiveId","collection","doc","params","id","where","onSnapshot","snap","data","sort","a","b","index","handleChange","update","handleDelete","delete","handleUpdateComment","content","activateId","handleSubmit","add","length","handleOpen","handleClose","getResponse","res","background","borderRadius","border","handleComment","snapshot","map","response","issue_id","marginLeft","color","e","display","justifyContent","target","value"],"mappings":"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","sourcesContent":["import { TextField, Button, IconButton, Toolbar } from \"@material-ui/core\"\nimport { useState } from \"react\"\nimport { useEffect } from \"react\"\nimport { db } from \"../../../firebase\"\nimport { firebaseLooper } from \"../../../utils/tools\"\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport { Dialog } from \"@material-ui/core\"\n\nfunction SpecDetails({match, tid}) {\n\tconst [descs, setDescs] = useState([])\n\tconst [desc, setDesc] = useState('')\n    const [issueComment, setIssueComment] = useState('')\n    const [open,setOpen] = useState(false)\n\tconst [activeId, setActiveId] = useState('')\n\n\tuseEffect(() => {\n\t\tdb.collection('DQNewReport').doc(match.params.id)\n\t\t.collection('content').doc('designSpecs').collection('points')\n\t\t.where('tid', '==', `${tid}`).onSnapshot(snap => {\n\t\t\tconst data = firebaseLooper(snap)\n\t\t\tdata.sort(function(a,b){\n\t\t\t\treturn(a.index-b.index)\n\t\t\t})\n\t\t\tsetDescs(data)\n\t\t})\n\t}, [])\n\tfunction handleChange(id, data){\n\t\tconst desc = data\n\t\tdb.collection('DQNewReport').doc(match.params.id)\n\t\t.collection('content').doc('designSpecs').collection('points')\n\t\t.doc(id).update({desc})\n\t}\n\tfunction handleDelete (id){\n\t\t\n\t\tdb.collection('DQNewReport').doc(match.params.id)\n\t\t.collection('content').doc('designSpecs').collection('points')\n\t\t.doc(id).delete()\n\t}\n\tfunction handleUpdateComment(id){\n\t\tdb.collection('issueData').doc(id).update({content: issueComment})\n\t  }\n\t  function activateId(id){\n\t\tsetActiveId(id)\n\t  }\n\tfunction handleSubmit(){\n\t\tdb.collection('DQNewReport').doc(match.params.id)\n\t\t.collection('content').doc('designSpecs').collection('points')\n\t\t.add({desc,tid,index: descs.length})\n\t}\n    function handleOpen(){\n\t\tsetOpen(true)\n\t}\n\n\tfunction handleClose(){\n\t\tsetOpen(false)\n\t}\n    function getResponse(res) {\n\t\tif(res === 1){\n\t\t\treturn(\n\n\t\t\t\t<b style={{background: '#BBE5B3 0% 0% no-repeat padding-box', borderRadius: '100px', border: '2px solid var(--unnamed-color-ffffff)'}}>Accepted</b>\n\t\t\t)\n\t\t}else if(res === 2){\n\t\t\treturn(\n\t\t\t\t<b style={{background: '#FF616D 0% 0% no-repeat padding-box', borderRadius: '100px', border: '2px solid var(--unnamed-color-ffffff)'}}>Rejected</b>\n\t\t\t)\n\t\t}else if (res === 3){\n\t\t\treturn(\n\t\t\t\t<b style={{background: '#FFEAC9 0% 0% no-repeat padding-box', borderRadius: '100px', border: '2px solid var(--unnamed-color-ffffff)'}}>Issued</b>\n\t\t\t)\n\t\t}else {\n\t\t\treturn(\n\t\t\t\t<b style={{background: '#CDF0EA 0% 0% no-repeat padding-box', borderRadius: '100px', border: '2px solid var(--unnamed-color-ffffff)'}}>Not Updated</b>\n\t\t\t)\n\t\t}\n\t}\n\n    function handleComment(id){\n   \n        db.collection('issueData').doc(id).onSnapshot(snapshot => {\n         const data = snapshot.data()\n         setIssueComment(data.content )\n        })\n    \n    }\n\treturn (\n\t\t<div>\n\t\t\t{\n\t\t\t\tdescs.map(data => (\n                    <>\n                     <div>\n                       { getResponse(data.response)}\n\t\t\t\t\t   {data.issue_id !== \"\"? <Button style={{marginLeft: '20px', color: 'orange'}} onClick={(e) => {\n                  handleOpen(e);\n                  handleComment(data.issue_id)\n\t\t\t\t  activateId(data.issue_id)\n                }}>Check</Button> : <p></p>}\n                    </div>\n\t\t\t\t\t<div style={{display: 'flex', justifyContent: 'space-between'}}>\n\t\t\t\t\t\t<p className='text-2xl mr-3'>⦿</p>\n\t\t\t\t\t\t<TextField className='mb-5' variant='outlined' disabled multiline fullWidth key={data.id} defaultValue={data.desc} onChange={handleChange(data.id,data.desc)}/>\n                        </div>\n                  \n\t\t\t\t\t</>\n\t\t\t\t))\n\t\t\t\n\t\t\t} \n\t\t\t{/* <div className='p-10' style={{display: 'flex', justifyContent: 'space-evenly'}}>\n\t\t\t\t<TextField className='mr-5 mb-10'  variant='outlined' fullWidth  label='Add new Data' onChange={(e) => setDesc(e.target.value)}/>\n\t\t\t\t<Button onClick={handleSubmit} disabled={desc===''} style={{color: 'orange'}} >Add </Button>\n\t\t\t</div> */}\n\t\t\t<Dialog fullWidth onClose={handleClose} open={open}>\n      <Toolbar>\n        <Button onClick={handleClose}>Close</Button>\n      </Toolbar>\n              <b className='text-xl underline text-bold text-center mb-3'>Comment</b>\n\t\t\t  <TextField variant='outlined' value={issueComment} onChange={(e) => setIssueComment(e.target.value)} className='text-xl text-blue-gray-500 text-center'/>\n              <Button onClick={(e) => {handleUpdateComment(activeId);\n\t\t\t\thandleClose()\n\t\t\t}}>Update</Button> \n    </Dialog>\n\t\t</div>\n\t)\n}\n\nexport default SpecDetails\n"]},"metadata":{},"sourceType":"module"}