{"ast":null,"code":"var _jsxFileName = \"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Demo/DashboardNavbar.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from 'react';\nimport { Link as RouterLink, NavLink, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport VideoLabelIcon from '@material-ui/icons/VideoLabel';\nimport { AppBar, Avatar, Badge, Box, Button, Divider, Drawer, Hidden, IconButton, Menu, MenuItem, Toolbar, Typography } from '@material-ui/core';\nimport { init } from \"ityped\";\nimport MenuIcon from '@material-ui/icons/Menu';\nimport NotificationsIcon from '@material-ui/icons/NotificationsOutlined';\nimport BuildIcon from '@material-ui/icons/Build';\nimport Logo from '../components/Logo';\nimport { db } from '../firebase';\nimport PhoneInTalkIcon from '@material-ui/icons/PhoneInTalk';\nimport { firebaseLooper } from '../utils/tools';\nimport AllOutIcon from '@material-ui/icons/AllOut';\nimport PhonelinkEraseIcon from '@material-ui/icons/PhonelinkErase';\nimport { useAuth } from '../components/context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst useStyles = theme => ({\n  customBadge: {\n    backgroundColor: \"#00AFD7\",\n    color: \"white\"\n  }\n});\n\nconst DashboardNavbar = ({\n  avatar,\n  onMobileNavOpen,\n  ...rest\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [anchorE1, setAnchorE1] = useState(null);\n  const {\n    currentUser\n  } = useAuth();\n  const [anchorE2, setAnchorE2] = useState(null);\n  const [show, setShow] = useState(null);\n  const [profile, setProfile] = useState(false);\n  const [notifications, setNotifications] = useState([]);\n  const [videoData, setVideoData] = useState([]);\n  const [status, setStatus] = useState('');\n  const [flag, setFlag] = useState(true);\n  const [userData, setUserData] = useState([]);\n  const textRef = useRef();\n  useEffect(() => {\n    if (currentUser) {\n      db.collection('users').where('email', '==', `${currentUser.email}`).onSnapshot(doc => {\n        const data = firebaseLooper(doc);\n        setUserData(data[0]);\n        console.log(data[0]);\n      });\n    } else {\n      /*#__PURE__*/\n      _jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 8\n      }, this);\n    }\n\n    if (currentUser) {\n      db.collection('notifications').orderBy('index', 'desc').onSnapshot(doc => {\n        const data = firebaseLooper(doc);\n        setNotifications(data);\n      });\n      db.collection('videoCallData').where('receiverId', '==', `${currentUser.email}`).onSnapshot(doc => {\n        const data = firebaseLooper(doc);\n        data.sort(function (a, b) {\n          return b.index - a.index;\n        });\n        setVideoData(data);\n      });\n    } else {\n      /*#__PURE__*/\n      _jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }, this);\n    }\n  }, []);\n\n  function updateStatus(id) {\n    db.collection('videoCallData').doc(id).update({\n      status: 'ended'\n    });\n  }\n\n  function getStatus(status, id, d_id) {\n    if (status === 'waiting') {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => updateStatus(d_id),\n        href: `/video-call`,\n        style: {\n          color: 'darkseagreen'\n        },\n        children: [/*#__PURE__*/_jsxDEV(PhoneInTalkIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 110\n        }, this), \"Join\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (status === 'accepted') {\n      return /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Accepted \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (status === 'ended') {\n      return /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Ended \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 14\n      }, this);\n    }\n  }\n\n  function handleOpen(e) {\n    setAnchorE1(e.currentTarget);\n  }\n\n  function handleVideoOpen(e) {\n    setAnchorE2(e.currentTarget);\n  }\n\n  function handleVideoClose(e) {\n    setAnchorE2(null);\n  }\n\n  function handleClose() {\n    setAnchorE1(null);\n  }\n\n  function handleDelete(id) {\n    db.collection('videoCallData').doc(id).delete();\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      style: {\n        backgroundColor: \"white\"\n      },\n      elevation: 1,\n      ...rest,\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          style: {\n            flexGrow: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n          mdDown: true,\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            onClick: handleVideoOpen,\n            children: /*#__PURE__*/_jsxDEV(Badge, {\n              badgeContent: videoData.length,\n              color: \"secondary\",\n              anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'left'\n              },\n              variant: \"dot\",\n              children: /*#__PURE__*/_jsxDEV(VideoLabelIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            component: NavLink,\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            to: \"/account\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-2 text-sm font-medium\",\n              children: [userData.firstName, \" \", userData.lastName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Avatar, {\n              style: {\n                marginLeft: '10px'\n              },\n              src: userData.url\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n          lgUp: true,\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            onClick: handleVideoOpen,\n            children: /*#__PURE__*/_jsxDEV(Badge, {\n              badgeContent: videoData.length,\n              color: \"secondary\",\n              variant: \"dot\",\n              anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'left'\n              },\n              children: /*#__PURE__*/_jsxDEV(VideoLabelIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            href: \"/account\",\n            children: /*#__PURE__*/_jsxDEV(Avatar, {\n              src: userData.url\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            onClick: onMobileNavOpen,\n            children: /*#__PURE__*/_jsxDEV(MenuIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      anchorEl: anchorE1,\n      id: \"simple-menu\",\n      keepMounted: true,\n      open: Boolean(anchorE1),\n      onClose: handleVideoClose,\n      children: [notifications.slice(0, 6).map(data => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          children: [data.notification, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          href: `/${data.link}`,\n          children: [\"Open \", /*#__PURE__*/_jsxDEV(AllOutIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 63\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)]\n      }, data.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleClose,\n        color: \"secondary\",\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      anchorEl: anchorE2,\n      id: \"simple-menu\",\n      style: {\n        width: '500px'\n      },\n      keepMounted: true,\n      open: Boolean(anchorE2),\n      onClose: handleVideoClose,\n      children: [videoData.map(data => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"px-2 sm:px-4 border-r border-gray-300 dark:border-gray-700 flex items-center justify-center\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col justify-center xl:-ml-6 pl-4 xl:pl-1 w-3/5\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-800 dark:text-gray-100 font-semibold\",\n                children: data.callerId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-600 dark:text-gray-400 font-normal\",\n                children: \"Inviting you to join the video session - \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n            children: `\n                .translate-show{\n                    transform : translateX(0%);\n                }\n                .translate-hide{\n                    transform : translateX(150%);\n                }\n                `\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            padding: '20px',\n            justifyContent: 'flex-end',\n            paddingTop: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col justify-center border-l items-center border-gray-300 dark:border-gray-700 w-1/3 sm:w-1/6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pt-2 pb-2 border-b border-gray-300 dark:border-gray-700 w-full flex justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-500 font-bold cursor-pointer\",\n                children: getStatus(data.status, data.call_id, data.id)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pt-2 pb-2 flex justify-center w-full cursor-pointer\",\n            onclick: () => setFlag(false),\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: e => handleDelete(data.id),\n              className: \"text-sm text-red-600 dark:text-red-400 cursor-pointer\",\n              children: \"Dismiss\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 14\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 9\n        }, this)]\n      }, data.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 18\n      }, this)), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleVideoClose,\n        color: \"secondary\",\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true);\n};\n\n_s(DashboardNavbar, \"Jl2yhZo5zJaYHrzWA9j7CKtR5NQ=\", false, function () {\n  return [useStyles, useAuth];\n});\n\n_c = DashboardNavbar;\nDashboardNavbar.propTypes = {\n  onMobileNavOpen: PropTypes.func\n};\nexport default DashboardNavbar;\n\nvar _c;\n\n$RefreshReg$(_c, \"DashboardNavbar\");","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Demo/DashboardNavbar.jsx"],"names":["useEffect","useRef","useState","Link","RouterLink","NavLink","Redirect","PropTypes","VideoLabelIcon","AppBar","Avatar","Badge","Box","Button","Divider","Drawer","Hidden","IconButton","Menu","MenuItem","Toolbar","Typography","init","MenuIcon","NotificationsIcon","BuildIcon","Logo","db","PhoneInTalkIcon","firebaseLooper","AllOutIcon","PhonelinkEraseIcon","useAuth","useStyles","theme","customBadge","backgroundColor","color","DashboardNavbar","avatar","onMobileNavOpen","rest","classes","open","setOpen","anchorE1","setAnchorE1","currentUser","anchorE2","setAnchorE2","show","setShow","profile","setProfile","notifications","setNotifications","videoData","setVideoData","status","setStatus","flag","setFlag","userData","setUserData","textRef","collection","where","email","onSnapshot","doc","data","console","log","orderBy","sort","a","b","index","updateStatus","id","update","getStatus","d_id","handleOpen","e","currentTarget","handleVideoOpen","handleVideoClose","handleClose","handleDelete","delete","flexGrow","length","vertical","horizontal","firstName","lastName","marginLeft","url","Boolean","slice","map","display","justifyContent","notification","link","width","callerId","padding","paddingTop","call_id","propTypes","func"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,MAApB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SAASC,IAAI,IAAIC,UAAjB,EAA6BC,OAA7B,EAAsCC,QAAtC,QAAsD,kBAAtD;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,SACEC,MADF,EAEEC,MAFF,EAGEC,KAHF,EAIEC,GAJF,EAKEC,MALF,EAMEC,OANF,EAOEC,MAPF,EAQEC,MARF,EASEC,UATF,EAUEC,IAVF,EAWEC,QAXF,EAYEC,OAZF,EAaEC,UAbF,QAcO,mBAdP;AAeA,SAASC,IAAT,QAAqB,QAArB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,iBAAP,MAA8B,0CAA9B;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,SAASC,EAAT,QAAmB,aAAnB;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,SAASC,cAAT,QAA+B,gBAA/B;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,kBAAP,MAA+B,mCAA/B;AACA,SAASC,OAAT,QAAwB,mCAAxB;;;;AAEA,MAAMC,SAAS,GAAGC,KAAK,KAAK;AAE1BC,EAAAA,WAAW,EAAE;AACXC,IAAAA,eAAe,EAAE,SADN;AAEXC,IAAAA,KAAK,EAAE;AAFI;AAFa,CAAL,CAAvB;;AAQA,MAAMC,eAAe,GAAG,CAAC;AAACC,EAAAA,MAAD;AAASC,EAAAA,eAAT;AAA0B,KAAGC;AAA7B,CAAD,KAAyC;AAAA;;AAC/D,QAAMC,OAAO,GAAGT,SAAS,EAAzB;AACD,QAAM,CAACU,IAAD,EAAOC,OAAP,IAAkB1C,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAAC2C,QAAD,EAAWC,WAAX,IAA0B5C,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM;AAAC6C,IAAAA;AAAD,MAAgBf,OAAO,EAA7B;AACC,QAAM,CAACgB,QAAD,EAAWC,WAAX,IAA0B/C,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM,CAACgD,IAAD,EAAOC,OAAP,IAAkBjD,QAAQ,CAAC,IAAD,CAAhC;AACE,QAAM,CAACkD,OAAD,EAAUC,UAAV,IAAwBnD,QAAQ,CAAC,KAAD,CAAtC;AACF,QAAM,CAACoD,aAAD,EAAgBC,gBAAhB,IAAoCrD,QAAQ,CAAC,EAAD,CAAlD;AACC,QAAM,CAACsD,SAAD,EAAYC,YAAZ,IAA4BvD,QAAQ,CAAC,EAAD,CAA1C;AACD,QAAM,CAACwD,MAAD,EAASC,SAAT,IAAsBzD,QAAQ,CAAC,EAAD,CAApC;AACC,QAAM,CAAC0D,IAAD,EAAOC,OAAP,IAAkB3D,QAAQ,CAAC,IAAD,CAAhC;AACD,QAAM,CAAC4D,QAAD,EAAWC,WAAX,IAA0B7D,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM8D,OAAO,GAAG/D,MAAM,EAAtB;AACAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI+C,WAAJ,EAAgB;AACdpB,MAAAA,EAAE,CAACsC,UAAH,CAAc,OAAd,EAAuBC,KAAvB,CAA6B,OAA7B,EAAsC,IAAtC,EAA6C,GAAEnB,WAAW,CAACoB,KAAM,EAAjE,EAAoEC,UAApE,CAA+EC,GAAG,IAAI;AACtF,cAAMC,IAAI,GAAGzC,cAAc,CAACwC,GAAD,CAA3B;AACAN,QAAAA,WAAW,CAACO,IAAI,CAAC,CAAD,CAAL,CAAX;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAAC,CAAD,CAAhB;AACD,OAJC;AAKD,KAND,MAMM;AACH;AAAA,cAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AACF;;AAGD,QAAGvB,WAAH,EAAe;AACZpB,MAAAA,EAAE,CAACsC,UAAH,CAAc,eAAd,EAA+BQ,OAA/B,CAAuC,OAAvC,EAAgD,MAAhD,EAAwDL,UAAxD,CAAmEC,GAAG,IAAI;AAC3E,cAAMC,IAAI,GAAGzC,cAAc,CAACwC,GAAD,CAA3B;AACAd,QAAAA,gBAAgB,CAACe,IAAD,CAAhB;AACD,OAHE;AAIH3C,MAAAA,EAAE,CAACsC,UAAH,CAAc,eAAd,EAA+BC,KAA/B,CAAqC,YAArC,EAAmD,IAAnD,EAA0D,GAAEnB,WAAW,CAACoB,KAAM,EAA9E,EAAiFC,UAAjF,CAA4FC,GAAG,IAAI;AACjG,cAAMC,IAAI,GAAGzC,cAAc,CAACwC,GAAD,CAA3B;AACCC,QAAAA,IAAI,CAACI,IAAL,CAAU,UAASC,CAAT,EAAWC,CAAX,EAAc;AACf,iBAAOA,CAAC,CAACC,KAAF,GAAQF,CAAC,CAACE,KAAjB;AACH,SAFN;AAGDpB,QAAAA,YAAY,CAACa,IAAD,CAAZ;AACD,OAND;AAOC,KAZD,MAYK;AACH;AAAA,cAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AACD;AAGF,GA7BQ,EA6BN,EA7BM,CAAT;;AA+BA,WAASQ,YAAT,CAAsBC,EAAtB,EAAyB;AACvBpD,IAAAA,EAAE,CAACsC,UAAH,CAAc,eAAd,EAA+BI,GAA/B,CAAmCU,EAAnC,EAAuCC,MAAvC,CAA8C;AAACtB,MAAAA,MAAM,EAAE;AAAT,KAA9C;AACD;;AAED,WAASuB,SAAT,CAAmBvB,MAAnB,EAA2BqB,EAA3B,EAA8BG,IAA9B,EAAmC;AACjC,QAAGxB,MAAM,KAAK,SAAd,EAAwB;AACtB,0BAAO,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,MAAMoB,YAAY,CAACI,IAAD,CAAnC;AAA2C,QAAA,IAAI,EAAG,aAAlD;AAAgE,QAAA,KAAK,EAAE;AAAC7C,UAAAA,KAAK,EAAE;AAAR,SAAvE;AAAA,gCAAgG,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA,gBAAhG;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;;AACD,QAAGqB,MAAM,KAAK,UAAd,EAAyB;AACvB,0BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;;AACD,QAAGA,MAAM,KAAK,OAAd,EAAsB;AACpB,0BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;AACF;;AAID,WAASyB,UAAT,CAAoBC,CAApB,EAAsB;AAEpBtC,IAAAA,WAAW,CAACsC,CAAC,CAACC,aAAH,CAAX;AACD;;AACD,WAASC,eAAT,CAAyBF,CAAzB,EAA2B;AACzBnC,IAAAA,WAAW,CAACmC,CAAC,CAACC,aAAH,CAAX;AAED;;AACD,WAASE,gBAAT,CAA0BH,CAA1B,EAA4B;AAC1BnC,IAAAA,WAAW,CAAC,IAAD,CAAX;AAED;;AACD,WAASuC,WAAT,GAAsB;AAEpB1C,IAAAA,WAAW,CAAC,IAAD,CAAX;AACD;;AACH,WAAS2C,YAAT,CAAsBV,EAAtB,EAAyB;AACtBpD,IAAAA,EAAE,CAACsC,UAAH,CAAc,eAAd,EAA+BI,GAA/B,CAAmCU,EAAnC,EAAuCW,MAAvC;AACF;;AACC,sBACE;AAAA,4BACA,QAAC,MAAD;AAEA,MAAA,KAAK,EAAE;AAACtD,QAAAA,eAAe,EAAE;AAAlB,OAFP;AAGE,MAAA,SAAS,EAAE,CAHb;AAAA,SAIMK,IAJN;AAAA,6BAOE,QAAC,OAAD;AAAA,gCACE,QAAC,GAAD;AAAK,UAAA,KAAK,EAAE;AAAEkD,YAAAA,QAAQ,EAAE;AAAZ;AAAZ;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,MAAD;AAAQ,UAAA,MAAM,MAAd;AAAA,kCAEI,QAAC,UAAD;AAAY,YAAA,KAAK,EAAC,SAAlB;AAA4B,6BAAc,aAA1C;AAAwD,6BAAc,MAAtE;AAA6E,YAAA,OAAO,EAAEL,eAAtF;AAAA,mCACA,QAAC,KAAD;AACE,cAAA,YAAY,EAAE9B,SAAS,CAACoC,MAD1B;AAEE,cAAA,KAAK,EAAC,WAFR;AAGE,cAAA,YAAY,EAAE;AACdC,gBAAAA,QAAQ,EAAE,QADI;AAEdC,gBAAAA,UAAU,EAAE;AAFE,eAHhB;AAOE,cAAA,OAAO,EAAC,KAPV;AAAA,qCASE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AATF;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAgBE,QAAC,UAAD;AAAY,YAAA,SAAS,EAAEzF,OAAvB;AAAgC,YAAA,KAAK,EAAC,SAAtC;AAAgD,6BAAc,aAA9D;AAA4E,6BAAc,MAA1F;AAAiG,YAAA,EAAE,EAAC,UAApG;AAAA,oCACI;AAAM,cAAA,SAAS,EAAC,0BAAhB;AAAA,yBAA4CyD,QAAQ,CAACiC,SAArD,OAAiEjC,QAAQ,CAACkC,QAA1E;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,MAAD;AAAQ,cAAA,KAAK,EAAE;AAACC,gBAAAA,UAAU,EAAE;AAAb,eAAf;AAAqC,cAAA,GAAG,EAAEnC,QAAQ,CAACoC;AAAnD;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAyBE,QAAC,MAAD;AAAQ,UAAA,IAAI,MAAZ;AAAA,kCAEG,QAAC,UAAD;AAAY,YAAA,KAAK,EAAC,SAAlB;AAA4B,6BAAc,aAA1C;AAAwD,6BAAc,MAAtE;AAA6E,YAAA,OAAO,EAAEZ,eAAtF;AAAA,mCACC,QAAC,KAAD;AACE,cAAA,YAAY,EAAE9B,SAAS,CAACoC,MAD1B;AAEE,cAAA,KAAK,EAAC,WAFR;AAGE,cAAA,OAAO,EAAC,KAHV;AAIE,cAAA,YAAY,EAAE;AACdC,gBAAAA,QAAQ,EAAE,QADI;AAEdC,gBAAAA,UAAU,EAAE;AAFE,eAJhB;AAAA,qCASE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AATF;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,kBAFH,eAgBE,QAAC,UAAD;AAAY,YAAA,KAAK,EAAC,SAAlB;AAA4B,6BAAc,aAA1C;AAAwD,6BAAc,MAAtE;AAA6E,YAAA,IAAI,EAAC,UAAlF;AAAA,mCAEI,QAAC,MAAD;AAAQ,cAAA,GAAG,EAAEhC,QAAQ,CAACoC;AAAtB;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,kBAhBF,eAsBE,QAAC,UAAD;AACC,YAAA,KAAK,EAAC,SADP;AAEE,YAAA,OAAO,EAAE1D,eAFX;AAAA,mCAKE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,kBAtBF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,YADA,eAkEG,QAAC,IAAD;AACA,MAAA,QAAQ,EAAEK,QADV;AAEC,MAAA,EAAE,EAAC,aAFJ;AAGC,MAAA,WAAW,MAHZ;AAIC,MAAA,IAAI,EAAEsD,OAAO,CAACtD,QAAD,CAJd;AAKC,MAAA,OAAO,EAAE0C,gBALV;AAAA,iBAOCjC,aAAa,CAAC8C,KAAd,CAAoB,CAApB,EAAuB,CAAvB,EAA0BC,GAA1B,CAA8B/B,IAAI,iBAEhC;AAAK,QAAA,KAAK,EAAE;AAACgC,UAAAA,OAAO,EAAE,MAAV;AAAkBC,UAAAA,cAAc,EAAE;AAAlC,SAAZ;AAAA,gCACA,QAAC,QAAD;AAAA,qBAAWjC,IAAI,CAACkC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eAEA,QAAC,MAAD;AAAQ,UAAA,KAAK,EAAC,SAAd;AAAwB,UAAA,IAAI,EAAG,IAAGlC,IAAI,CAACmC,IAAK,EAA5C;AAAA,2CAAoD,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,kBAApD;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFA;AAAA,SAAqEnC,IAAI,CAACS,EAA1E;AAAA;AAAA;AAAA;AAAA,cAFF,CAPD,eAeC,QAAC,MAAD;AAAS,QAAA,OAAO,EAAES,WAAlB;AAA+B,QAAA,KAAK,EAAC,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAfD;AAAA;AAAA;AAAA;AAAA;AAAA,YAlEH,eAmFG,QAAC,IAAD;AACA,MAAA,QAAQ,EAAExC,QADV;AAEC,MAAA,EAAE,EAAC,aAFJ;AAIC,MAAA,KAAK,EAAE;AAAC0D,QAAAA,KAAK,EAAE;AAAR,OAJR;AAKC,MAAA,WAAW,MALZ;AAMC,MAAA,IAAI,EAAEP,OAAO,CAACnD,QAAD,CANd;AAOC,MAAA,OAAO,EAAEuC,gBAPV;AAAA,iBAoBQ/B,SAAS,CAAC6C,GAAV,CAAc/B,IAAI,iBAChB;AAAA,gCACP,QAAC,QAAD;AAAA,kCAEK;AAAA,oCACK;AAAK,cAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,oBADL,eAIK;AAAK,cAAA,SAAS,EAAC,0DAAf;AAAA,sCACI;AAAG,gBAAA,SAAS,EAAC,wDAAb;AAAA,0BAAuEA,IAAI,CAACqC;AAA5E;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAG,gBAAA,SAAS,EAAC,sDAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJL;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFL,eAcE;AAAA,sBACM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AARY;AAAA;AAAA;AAAA;AAAA,kBAdF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADO,eA0BT;AAAK,UAAA,KAAK,EAAE;AAACL,YAAAA,OAAO,EAAE,MAAV;AAAkBM,YAAAA,OAAO,EAAE,MAA3B;AAAmCL,YAAAA,cAAc,EAAE,UAAnD;AAA+DM,YAAAA,UAAU,EAAE;AAA3E,WAAZ;AAAA,kCACG;AAAK,YAAA,SAAS,EAAC,wGAAf;AAAA,mCACa;AAAK,cAAA,SAAS,EAAC,oFAAf;AAAA,qCACI;AAAM,gBAAA,SAAS,EAAC,gDAAhB;AAAA,0BAAkE5B,SAAS,CAACX,IAAI,CAACZ,MAAN,EAAcY,IAAI,CAACwC,OAAnB,EAA4BxC,IAAI,CAACS,EAAjC;AAA3E;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADb;AAAA;AAAA;AAAA;AAAA,kBADH,eAOA;AAAK,YAAA,SAAS,EAAC,qDAAf;AAAqE,YAAA,OAAO,EAAE,MAAMlB,OAAO,CAAC,KAAD,CAA3F;AAAA,mCACK;AAAQ,cAAA,OAAO,EAAGuB,CAAD,IAAOK,YAAY,CAACnB,IAAI,CAACS,EAAN,CAApC;AAA+C,cAAA,SAAS,EAAC,uDAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADL;AAAA;AAAA;AAAA;AAAA,kBAPA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA1BS,eAsCT,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,gBAtCS;AAAA,SAAUT,IAAI,CAACS,EAAf;AAAA;AAAA;AAAA;AAAA,cADF,CApBR,eA+DE,QAAC,MAAD;AAAS,QAAA,OAAO,EAAEQ,gBAAlB;AAAoC,QAAA,KAAK,EAAC,WAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA/DF;AAAA;AAAA;AAAA;AAAA;AAAA,YAnFH;AAAA,kBADF;AA0JD,CA5OD;;GAAMjD,e;UACYL,S,EAGKD,O;;;KAJjBM,e;AA8ONA,eAAe,CAACyE,SAAhB,GAA4B;AAC1BvE,EAAAA,eAAe,EAAEjC,SAAS,CAACyG;AADD,CAA5B;AAIA,eAAe1E,eAAf","sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { Link as RouterLink, NavLink, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport VideoLabelIcon from '@material-ui/icons/VideoLabel';\nimport {\n  AppBar,\n  Avatar,\n  Badge,\n  Box,\n  Button,\n  Divider,\n  Drawer,\n  Hidden,\n  IconButton,\n  Menu,\n  MenuItem,\n  Toolbar,\n  Typography\n} from '@material-ui/core';\nimport { init } from \"ityped\";\nimport MenuIcon from '@material-ui/icons/Menu';\nimport NotificationsIcon from '@material-ui/icons/NotificationsOutlined';\nimport BuildIcon from '@material-ui/icons/Build';\nimport Logo from '../components/Logo';\nimport { db } from '../firebase';\nimport PhoneInTalkIcon from '@material-ui/icons/PhoneInTalk';\nimport { firebaseLooper } from '../utils/tools';\nimport AllOutIcon from '@material-ui/icons/AllOut';\nimport PhonelinkEraseIcon from '@material-ui/icons/PhonelinkErase';\nimport { useAuth } from '../components/context/AuthContext';\n\nconst useStyles = theme => ({\n \n  customBadge: {\n    backgroundColor: \"#00AFD7\",\n    color: \"white\"\n  }\n});\n\nconst DashboardNavbar = ({avatar, onMobileNavOpen, ...rest }) => {\n  const classes = useStyles()\n const [open, setOpen] = useState(false)\n const [anchorE1, setAnchorE1] = useState(null)\n const {currentUser} = useAuth()\n  const [anchorE2, setAnchorE2] = useState(null)\n  const [show, setShow] = useState(null);\n    const [profile, setProfile] = useState(false);\n  const [notifications, setNotifications] = useState([])\n   const [videoData, setVideoData] = useState([])\n  const [status, setStatus] = useState('')\n   const [flag, setFlag] = useState(true);\n  const [userData, setUserData] = useState([])\n  const textRef = useRef();\n  useEffect(() => {\n    if (currentUser){\n      db.collection('users').where('email', '==', `${currentUser.email}`).onSnapshot(doc => {\n      const data = firebaseLooper(doc)\n      setUserData(data[0])\n      console.log(data[0])\n    })\n    }else {\n       <Redirect to='/login'/>\n    }\n     \n    \n    if(currentUser){\n       db.collection('notifications').orderBy('index', 'desc').onSnapshot(doc => {\n      const data = firebaseLooper(doc)\n      setNotifications(data)\n    })\n    db.collection('videoCallData').where('receiverId', '==', `${currentUser.email}`).onSnapshot(doc => {\n      const data = firebaseLooper(doc)\n       data.sort(function(a,b) {\n                return(b.index-a.index)\n            }) \n      setVideoData(data)\n    })\n    }else{\n      <Redirect to='/login'/>\n    }\n   \n   \n  }, [])\n\n  function updateStatus(id){\n    db.collection('videoCallData').doc(id).update({status: 'ended'})\n  }\n\n  function getStatus(status, id,d_id){\n    if(status === 'waiting'){\n      return(<Button onClick={() => updateStatus(d_id)} href={`/video-call`} style={{color: 'darkseagreen'}}><PhoneInTalkIcon/>Join</Button>)\n    }\n    if(status === 'accepted'){\n      return(<b>Accepted </b>)\n    }\n    if(status === 'ended'){\n      return(<b>Ended </b>)\n    }\n  }\n\n \n\n  function handleOpen(e){\n   \n    setAnchorE1(e.currentTarget)\n  }\n  function handleVideoOpen(e){\n    setAnchorE2(e.currentTarget)\n\n  }\n  function handleVideoClose(e){\n    setAnchorE2(null)\n\n  }\n  function handleClose(){\n    \n    setAnchorE1(null)\n  }\nfunction handleDelete(id){\n   db.collection('videoCallData').doc(id).delete()\n}\n  return (\n    <>\n    <AppBar\n\n    style={{backgroundColor: \"white\"}}\n      elevation={1}\n      {...rest}\n    >\n     \n      <Toolbar >\n        <Box style={{ flexGrow: 1 }} />\n        <Hidden mdDown>\n         \n            <IconButton color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" onClick={handleVideoOpen} >\n            <Badge\n              badgeContent={videoData.length}\n              color=\"secondary\"\n              anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'left',\n            }}\n              variant=\"dot\"\n            >\n              <VideoLabelIcon />\n            </Badge>\n        \n          </IconButton>\n          <IconButton component={NavLink} color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" to='/account' >\n              <span className=\"ml-2 text-sm font-medium\">{userData.firstName} {userData.lastName}</span>\n              <Avatar style={{marginLeft: '10px'}} src={userData.url} />\n          \n          \n          </IconButton>\n        </Hidden>\n        <Hidden lgUp>\n         \n           <IconButton color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" onClick={handleVideoOpen} >\n            <Badge\n              badgeContent={videoData.length}\n              color=\"secondary\"\n              variant=\"dot\"\n              anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'left',\n            }}\n            >\n              <VideoLabelIcon />\n            </Badge>\n        \n          </IconButton>\n          <IconButton color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" href='/account' >\n           \n              <Avatar src={userData.url} />\n          \n          \n          </IconButton>\n          <IconButton\n           color=\"default\"\n            onClick={onMobileNavOpen}\n           \n          >\n            <MenuIcon />\n          </IconButton>\n          \n        </Hidden>\n      </Toolbar>\n    </AppBar>\n       <Menu\n       anchorEl={anchorE1}\n        id=\"simple-menu\"\n        keepMounted\n        open={Boolean(anchorE1)}\n        onClose={handleVideoClose}\n      >{\n        notifications.slice(0, 6).map(data => (\n          \n          <div style={{display: 'flex', justifyContent: 'space-between'}} key={data.id}>\n          <MenuItem>{data.notification} </MenuItem>\n          <Button color=\"primary\" href={`/${data.link}`}>Open <AllOutIcon/></Button>\n          </div>\n        ))\n      }\n        <Button  onClick={handleClose} color='secondary'>Close</Button>\n      </Menu>\n       <Menu\n       anchorEl={anchorE2}\n        id=\"simple-menu\"\n        \n        style={{width: '500px'}}\n        keepMounted\n        open={Boolean(anchorE2)}\n        onClose={handleVideoClose}\n      >\n        {/* {\n        videoData.map(data => (\n          <div style={{display: 'flex', justifyContent: 'space-between'}} key={data.id}>\n          <MenuItem onClick={handleVideoClose}>{data.callerId} {data.message} </MenuItem>\n          <div >{getStatus(data.status, data.call_id, data.id)}</div>\n         \n          </div>\n        ))\n      } */}\n      \n               { \n               videoData.map(data => (\n                 <div key={data.id}>\n          <MenuItem >\n            \n               <div>\n                    <div className=\"px-2 sm:px-4 border-r border-gray-300 dark:border-gray-700 flex items-center justify-center\">\n                         \n                    </div>\n                    <div className=\"flex flex-col justify-center xl:-ml-6 pl-4 xl:pl-1 w-3/5\">\n                        <p className=\"text-sm text-gray-800 dark:text-gray-100 font-semibold\">{data.callerId}</p>\n                        <p className=\"text-xs text-gray-600 dark:text-gray-400 font-normal\">Inviting you to join the video session - </p>\n                    </div>\n                  \n                </div>\n            \n           \n            <style>\n                {`\n                .translate-show{\n                    transform : translateX(0%);\n                }\n                .translate-hide{\n                    transform : translateX(150%);\n                }\n                `}\n            </style>\n        </MenuItem>\n        <div style={{display: 'flex', padding: '20px', justifyContent: 'flex-end', paddingTop: 0}}>\n           <div className=\"flex flex-col justify-center border-l items-center border-gray-300 dark:border-gray-700 w-1/3 sm:w-1/6\">\n                        <div className=\"pt-2 pb-2 border-b border-gray-300 dark:border-gray-700 w-full flex justify-center\">\n                            <span className=\"text-sm text-gray-500 font-bold cursor-pointer\">{getStatus(data.status, data.call_id, data.id)}</span>\n                        </div>\n                       \n         </div>\n        <div className=\"pt-2 pb-2 flex justify-center w-full cursor-pointer\" onclick={() => setFlag(false)}>\n             <button onClick={(e) => handleDelete(data.id)} className=\"text-sm text-red-600 dark:text-red-400 cursor-pointer\">Dismiss</button>\n         </div> \n        </div>\n         \n        <Divider/>\n        </div>\n           ))\n              }\n         <Button  onClick={handleVideoClose} color='secondary'>Close</Button>\n      </Menu>\n    \n\n    </>\n   \n  );\n};\n\nDashboardNavbar.propTypes = {\n  onMobileNavOpen: PropTypes.func\n};\n\nexport default DashboardNavbar"]},"metadata":{},"sourceType":"module"}