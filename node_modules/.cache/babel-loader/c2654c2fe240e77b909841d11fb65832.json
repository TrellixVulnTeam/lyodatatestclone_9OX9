{"ast":null,"code":"var _jsxFileName = \"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/user_manual/ManualView.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { db } from \"../../firebase\";\nimport ViewData from \"./ViewData\";\nimport { firebaseLooper } from \"../../utils/tools\";\nimport { Button, Dialog, DialogActions, DialogContent, FormHelperText, TextField, Toolbar, Typography } from \"@material-ui/core\";\nimport { storage } from \"../../firebase\";\nimport { Alert } from \"@material-ui/lab\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ManualView() {\n  _s();\n\n  const [manual, setManual] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [title, setTitle] = useState('');\n  const [desc, setDesc] = useState('');\n  const [images, setImages] = useState([]);\n  const [urls, setUrls] = useState([]);\n  const [activate, setActivate] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState('');\n\n  const handleChange = e => {\n    for (let i = 0; i < e.target.files.length; i++) {\n      const newImage = e.target.files[i];\n      newImage[\"id\"] = Math.random();\n      setImages(prevState => [...prevState, newImage]);\n    }\n  };\n\n  const handleUpload = () => {\n    const promises = [];\n    images.map(image => {\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      promises.push(uploadTask);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        setProgress(progress);\n      }, error => {\n        console.log(error);\n      }, async () => {\n        await storage.ref(\"images\").child(image.name).getDownloadURL().then(urls => {\n          setUrls(prevState => [...prevState, urls]);\n        });\n      });\n      setActivate(true);\n    });\n    Promise.all(promises).then(() => alert(\"All images uploaded. Please click 'OK' to see preview\")).catch(err => console.log(err));\n  };\n\n  function handleOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  useEffect(() => {\n    db.collection('userManual').onSnapshot(snapshot => {\n      const data = firebaseLooper(snapshot);\n      setManual(data);\n    });\n  }, []);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    if ((title === null || title === void 0 ? void 0 : title.trim().length) === 0 || (desc === null || desc === void 0 ? void 0 : desc.trim().length) === 0) {\n      return setError(\"Empty strings are not accepted as valid strings ! Please try again with a valid string\");\n    }\n\n    const index = manual.length;\n    db.collection('userManual').add({\n      title,\n      desc,\n      urls,\n      index\n    }).then(() => {\n      setTitle(\"\");\n      setDesc('');\n      setUrls([]);\n      setOpen(false);\n      setImages([]);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col w-full items-center justify-center pt-6 lg:pt-15 f-f-l\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl md:text-4xl xl:text-5xl font-black text-center text-indigo-700 md:leading-tight\",\n        children: \"User Manual\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'flex-end'\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleOpen,\n        variant: \"contained\",\n        children: \"Add new\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-auto container px-4 xl:px-0 pt-8 lg:pt-20\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col w-full items-center justify-center f-f-l\",\n        children: manual.map(data => /*#__PURE__*/_jsxDEV(ViewData, {\n          d_id: data.id,\n          title: data.title,\n          desc: data.desc,\n          images: data.urls\n        }, data.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        fullWidth: true,\n        open: open,\n        onClose: handleClose,\n        children: [/*#__PURE__*/_jsxDEV(Toolbar, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleClose,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"error\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h1\",\n              align: \"center\",\n              gutterBottom: true,\n              children: \"Add Manual Data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 30\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              required: true,\n              value: title,\n              label: \"Title\",\n              onChange: e => setTitle(e.target.value),\n              style: {\n                marginBottom: '3%'\n              },\n              variant: \"outlined\",\n              fullWidth: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              required: true,\n              value: desc,\n              label: \"Description\",\n              onChange: e => setDesc(e.target.value),\n              style: {\n                marginBottom: '3%'\n              },\n              rows: 4,\n              multiline: true,\n              variant: \"outlined\",\n              fullWidth: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              multiple: true,\n              onChange: handleChange,\n              style: {\n                marginBottom: '3%'\n              },\n              type: \"file\",\n              variant: \"outlined\",\n              fullWidth: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: handleUpload,\n              variant: \"contained\",\n              color: \"primary\",\n              disabled: title === '' || desc === '',\n              fullWidth: true,\n              children: \"Add \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n              children: \"Please enter above details to unblock\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n              fullWidth: true,\n              onClose: () => setActivate(!activate),\n              open: activate,\n              children: [/*#__PURE__*/_jsxDEV(DialogContent, {\n                children: /*#__PURE__*/_jsxDEV(Alert, {\n                  severity: \"success\",\n                  children: \"New Data has been added . To confirm please click on \\\"Confirm\\\"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: e => {\n                    handleSubmit(e);\n                    setActivate(!activate);\n                  },\n                  variant: \"contained\",\n                  style: {\n                    background: 'green',\n                    color: 'white'\n                  },\n                  children: \"Confirm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 7\n          }, this), urls.map((url, i) => /*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: \"500px\"\n            },\n            src: url || \"http://via.placeholder.com/300\",\n            alt: \"firebase-image\"\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 9\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ManualView, \"tzJgZqXSw/+D2okfy3pxc5Uc4CA=\");\n\n_c = ManualView;\nexport default ManualView;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManualView\");","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/Pages/user_manual/ManualView.jsx"],"names":["React","useEffect","useState","db","ViewData","firebaseLooper","Button","Dialog","DialogActions","DialogContent","FormHelperText","TextField","Toolbar","Typography","storage","Alert","ManualView","manual","setManual","open","setOpen","title","setTitle","desc","setDesc","images","setImages","urls","setUrls","activate","setActivate","progress","setProgress","error","setError","handleChange","e","i","target","files","length","newImage","Math","random","prevState","handleUpload","promises","map","image","uploadTask","ref","name","put","push","on","snapshot","round","bytesTransferred","totalBytes","console","log","child","getDownloadURL","then","Promise","all","alert","catch","err","handleOpen","handleClose","collection","onSnapshot","data","handleSubmit","preventDefault","trim","index","add","display","justifyContent","id","value","marginBottom","background","color","url","width"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,EAAT,QAAmB,gBAAnB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAAQC,cAAR,QAA6B,mBAA7B;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,aAAzB,EAAwCC,aAAxC,EAAuDC,cAAvD,EAAuEC,SAAvE,EAAkFC,OAAlF,EAA2FC,UAA3F,QAA6G,mBAA7G;AACA,SAASC,OAAT,QAAwB,gBAAxB;AACA,SAASC,KAAT,QAAsB,kBAAtB;;;;AACA,SAASC,UAAT,GAAsB;AAAA;;AAElB,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBhB,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACiB,IAAD,EAAOC,OAAP,IAAkBlB,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACmB,KAAD,EAAQC,QAAR,IAAoBpB,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACqB,IAAD,EAAOC,OAAP,IAAkBtB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACuB,MAAD,EAASC,SAAT,IAAsBxB,QAAQ,CAAC,EAAD,CAApC;AACF,QAAM,CAACyB,IAAD,EAAOC,OAAP,IAAkB1B,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAAC2B,QAAD,EAAWC,WAAX,IAA0B5B,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAAC6B,QAAD,EAAWC,WAAX,IAA0B9B,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAAC+B,KAAD,EAAQC,QAAR,IAAoBhC,QAAQ,CAAC,EAAD,CAAlC;;AAGA,QAAMiC,YAAY,GAAIC,CAAD,IAAO;AAC1B,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAeC,MAAnC,EAA2CH,CAAC,EAA5C,EAAgD;AAC9C,YAAMI,QAAQ,GAAGL,CAAC,CAACE,MAAF,CAASC,KAAT,CAAeF,CAAf,CAAjB;AACAI,MAAAA,QAAQ,CAAC,IAAD,CAAR,GAAiBC,IAAI,CAACC,MAAL,EAAjB;AACAjB,MAAAA,SAAS,CAAEkB,SAAD,IAAe,CAAC,GAAGA,SAAJ,EAAeH,QAAf,CAAhB,CAAT;AACD;AACF,GAND;;AAQA,QAAMI,YAAY,GAAG,MAAM;AACzB,UAAMC,QAAQ,GAAG,EAAjB;AACArB,IAAAA,MAAM,CAACsB,GAAP,CAAYC,KAAD,IAAW;AACpB,YAAMC,UAAU,GAAGnC,OAAO,CAACoC,GAAR,CAAa,UAASF,KAAK,CAACG,IAAK,EAAjC,EAAoCC,GAApC,CAAwCJ,KAAxC,CAAnB;AACAF,MAAAA,QAAQ,CAACO,IAAT,CAAcJ,UAAd;AACAA,MAAAA,UAAU,CAACK,EAAX,CACE,eADF,EAEGC,QAAD,IAAc;AACZ,cAAMxB,QAAQ,GAAGW,IAAI,CAACc,KAAL,CACdD,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GADrC,CAAjB;AAGA1B,QAAAA,WAAW,CAACD,QAAD,CAAX;AACD,OAPH,EAQGE,KAAD,IAAW;AACT0B,QAAAA,OAAO,CAACC,GAAR,CAAY3B,KAAZ;AACD,OAVH,EAWE,YAAY;AACV,cAAMnB,OAAO,CACVoC,GADG,CACC,QADD,EAEHW,KAFG,CAEGb,KAAK,CAACG,IAFT,EAGHW,cAHG,GAIHC,IAJG,CAIGpC,IAAD,IAAU;AACdC,UAAAA,OAAO,CAAEgB,SAAD,IAAe,CAAC,GAAGA,SAAJ,EAAejB,IAAf,CAAhB,CAAP;AACD,SANG,CAAN;AAOD,OAnBH;AAqBEG,MAAAA,WAAW,CAAC,IAAD,CAAX;AACH,KAzBD;AA2BAkC,IAAAA,OAAO,CAACC,GAAR,CAAYnB,QAAZ,EACGiB,IADH,CACQ,MAAMG,KAAK,CAAC,uDAAD,CADnB,EAEGC,KAFH,CAEUC,GAAD,IAAST,OAAO,CAACC,GAAR,CAAYQ,GAAZ,CAFlB;AAGD,GAhCD;;AAkCE,WAASC,UAAT,GAAqB;AACjBjD,IAAAA,OAAO,CAAC,IAAD,CAAP;AACH;;AAED,WAASkD,WAAT,GAAsB;AAClBlD,IAAAA,OAAO,CAAC,KAAD,CAAP;AACH;;AACDnB,EAAAA,SAAS,CAAC,MAAM;AACRE,IAAAA,EAAE,CAACoE,UAAH,CAAc,YAAd,EAA4BC,UAA5B,CAAwCjB,QAAD,IAAc;AACjD,YAAMkB,IAAI,GAAGpE,cAAc,CAACkD,QAAD,CAA3B;AACArC,MAAAA,SAAS,CAACuD,IAAD,CAAT;AACH,KAHD;AAIP,GALQ,EAKN,EALM,CAAT;;AAOA,WAASC,YAAT,CAAsBtC,CAAtB,EAAwB;AACpBA,IAAAA,CAAC,CAACuC,cAAF;;AACA,QAAG,CAAAtD,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEuD,IAAP,GAAcpC,MAAd,MAAwB,CAAxB,IAA6B,CAAAjB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEqD,IAAN,GAAapC,MAAb,MAAwB,CAAxD,EAA0D;AACxD,aAAON,QAAQ,CAAC,wFAAD,CAAf;AACD;;AACD,UAAM2C,KAAK,GAAG5D,MAAM,CAACuB,MAArB;AACArC,IAAAA,EAAE,CAACoE,UAAH,CAAc,YAAd,EAA4BO,GAA5B,CAAgC;AAACzD,MAAAA,KAAD;AAAQE,MAAAA,IAAR;AAAcI,MAAAA,IAAd;AAAoBkD,MAAAA;AAApB,KAAhC,EAA4Dd,IAA5D,CAAiE,MAAM;AACvDzC,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACAE,MAAAA,OAAO,CAAC,EAAD,CAAP;AACAI,MAAAA,OAAO,CAAC,EAAD,CAAP;AACAR,MAAAA,OAAO,CAAC,KAAD,CAAP;AACAM,MAAAA,SAAS,CAAC,EAAD,CAAT;AACf,KAND;AAOH;;AACD,sBACI;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,sEAAf;AAAA,6BACI;AAAI,QAAA,SAAS,EAAC,0FAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAMI;AAAK,MAAA,KAAK,EAAE;AAACqD,QAAAA,OAAO,EAAE,MAAV;AAAkBC,QAAAA,cAAc,EAAE;AAAlC,OAAZ;AAAA,6BACI,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAEX,UAAjB;AAA6B,QAAA,OAAO,EAAC,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YANJ,eASI;AAAK,MAAA,SAAS,EAAC,8CAAf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,wDAAf;AAAA,kBAaQpD,MAAM,CAAC8B,GAAP,CAAY0B,IAAD,iBACP,QAAC,QAAD;AAAU,UAAA,IAAI,EAAEA,IAAI,CAACQ,EAArB;AAAuC,UAAA,KAAK,EAAER,IAAI,CAACpD,KAAnD;AAA0D,UAAA,IAAI,EAAEoD,IAAI,CAAClD,IAArE;AAA2E,UAAA,MAAM,EAAEkD,IAAI,CAAC9C;AAAxF,WAA8B8C,IAAI,CAACQ,EAAnC;AAAA;AAAA;AAAA;AAAA,gBADJ;AAbR;AAAA;AAAA;AAAA;AAAA,cADJ,eAoBI,QAAC,MAAD;AAAQ,QAAA,SAAS,MAAjB;AAAkB,QAAA,IAAI,EAAE9D,IAAxB;AAA8B,QAAA,OAAO,EAAEmD,WAAvC;AAAA,gCACI,QAAC,OAAD;AAAA,iCACI,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAEA,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII,QAAC,aAAD;AAAA,qBACGrC,KAAK,iBAAI,QAAC,KAAD;AAAO,YAAA,QAAQ,EAAC,OAAhB;AAAA,sBAAyBA;AAAzB;AAAA;AAAA;AAAA;AAAA,kBADZ,eAEI;AAAM,YAAA,QAAQ,EAAEyC,YAAhB;AAAA,oCACK,QAAC,UAAD;AAAY,cAAA,OAAO,EAAC,IAApB;AAAyB,cAAA,KAAK,EAAC,QAA/B;AAAwC,cAAA,YAAY,MAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADL,eAEA,QAAC,SAAD;AAAW,cAAA,QAAQ,MAAnB;AAAoB,cAAA,KAAK,EAAErD,KAA3B;AAAkC,cAAA,KAAK,EAAC,OAAxC;AAAgD,cAAA,QAAQ,EAAGe,CAAD,IAAOd,QAAQ,CAACc,CAAC,CAACE,MAAF,CAAS4C,KAAV,CAAzE;AAA2F,cAAA,KAAK,EAAE;AAACC,gBAAAA,YAAY,EAAE;AAAf,eAAlG;AAAwH,cAAA,OAAO,EAAC,UAAhI;AAA2I,cAAA,SAAS;AAApJ;AAAA;AAAA;AAAA;AAAA,oBAFA,eAGA,QAAC,SAAD;AAAW,cAAA,QAAQ,MAAnB;AAAoB,cAAA,KAAK,EAAE5D,IAA3B;AAAiC,cAAA,KAAK,EAAC,aAAvC;AAAqD,cAAA,QAAQ,EAAGa,CAAD,IAAOZ,OAAO,CAACY,CAAC,CAACE,MAAF,CAAS4C,KAAV,CAA7E;AAA8F,cAAA,KAAK,EAAE;AAACC,gBAAAA,YAAY,EAAE;AAAf,eAArG;AAA2H,cAAA,IAAI,EAAE,CAAjI;AAAoI,cAAA,SAAS,MAA7I;AAA8I,cAAA,OAAO,EAAC,UAAtJ;AAAiK,cAAA,SAAS;AAA1K;AAAA;AAAA;AAAA;AAAA,oBAHA,eAIA;AAAO,cAAA,QAAQ,MAAf;AAAgB,cAAA,QAAQ,EAAEhD,YAA1B;AAAwC,cAAA,KAAK,EAAE;AAACgD,gBAAAA,YAAY,EAAE;AAAf,eAA/C;AAAqE,cAAA,IAAI,EAAC,MAA1E;AAAiF,cAAA,OAAO,EAAC,UAAzF;AAAoG,cAAA,SAAS;AAA7G;AAAA;AAAA;AAAA;AAAA,oBAJA,eAKA,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAEtC,YAAjB;AAA+B,cAAA,OAAO,EAAC,WAAvC;AAAmD,cAAA,KAAK,EAAC,SAAzD;AAAmE,cAAA,QAAQ,EAAExB,KAAK,KAAK,EAAV,IAAgBE,IAAI,KAAK,EAAtG;AAA0G,cAAA,SAAS,MAAnH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALA,eAMA,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBANA,eAOA,QAAC,MAAD;AAAQ,cAAA,SAAS,MAAjB;AAAkB,cAAA,OAAO,EAAE,MAAMO,WAAW,CAAC,CAACD,QAAF,CAA5C;AAAyD,cAAA,IAAI,EAAEA,QAA/D;AAAA,sCACJ,QAAC,aAAD;AAAA,uCACI,QAAC,KAAD;AAAO,kBAAA,QAAQ,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBADI,eAIJ,QAAC,aAAD;AAAA,uCACI,QAAC,MAAD;AAAS,kBAAA,OAAO,EAAGO,CAAD,IAAM;AAACsC,oBAAAA,YAAY,CAACtC,CAAD,CAAZ;AACzBN,oBAAAA,WAAW,CAAC,CAACD,QAAF,CAAX;AAEC,mBAHD;AAIE,kBAAA,OAAO,EAAC,WAJV;AAIsB,kBAAA,KAAK,EAAE;AAACuD,oBAAAA,UAAU,EAAE,OAAb;AAAsBC,oBAAAA,KAAK,EAAE;AAA7B,mBAJ7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBAJI;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAuBI;AAAA;AAAA;AAAA;AAAA,kBAvBJ,eAyBd;AAAA;AAAA;AAAA;AAAA,kBAzBc,EA0Bb1D,IAAI,CAACoB,GAAL,CAAS,CAACuC,GAAD,EAAMjD,CAAN,kBACR;AAEE,YAAA,KAAK,EAAE;AAAEkD,cAAAA,KAAK,EAAE;AAAT,aAFT;AAGE,YAAA,GAAG,EAAED,GAAG,IAAI,gCAHd;AAIE,YAAA,GAAG,EAAC;AAJN,aACOjD,CADP;AAAA;AAAA;AAAA;AAAA,kBADD,CA1Ba;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,cApBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YATJ;AAAA,kBADJ;AA2EH;;GA9JQrB,U;;KAAAA,U;AAgKT,eAAeA,UAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { db } from \"../../firebase\";\nimport ViewData from \"./ViewData\";\nimport {firebaseLooper} from \"../../utils/tools\"\nimport { Button, Dialog, DialogActions, DialogContent, FormHelperText, TextField, Toolbar, Typography } from \"@material-ui/core\";\nimport { storage } from \"../../firebase\";\nimport { Alert } from \"@material-ui/lab\";\nfunction ManualView() {\n   \n    const [manual, setManual] = useState([]);\n    const [open, setOpen] = useState(false);\n    const [title, setTitle] = useState('')\n    const [desc, setDesc] = useState('')\n    const [images, setImages] = useState([]);\n  const [urls, setUrls] = useState([]);\n  const [activate, setActivate] = useState(false)\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState('')\n\n\n  const handleChange = (e) => {\n    for (let i = 0; i < e.target.files.length; i++) {\n      const newImage = e.target.files[i];\n      newImage[\"id\"] = Math.random();\n      setImages((prevState) => [...prevState, newImage]);\n    }\n  };\n\n  const handleUpload = () => {\n    const promises = [];\n    images.map((image) => {\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      promises.push(uploadTask);\n      uploadTask.on(\n        \"state_changed\",\n        (snapshot) => {\n          const progress = Math.round(\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n          );\n          setProgress(progress);\n        },\n        (error) => {\n          console.log(error);\n        },\n        async () => {\n          await storage\n            .ref(\"images\")\n            .child(image.name)\n            .getDownloadURL()\n            .then((urls) => {\n              setUrls((prevState) => [...prevState, urls]);\n            });\n        }\n      );\n        setActivate(true)\n    });\n\n    Promise.all(promises)\n      .then(() => alert(\"All images uploaded. Please click 'OK' to see preview\"))\n      .catch((err) => console.log(err));\n  };\n\n    function handleOpen(){\n        setOpen(true);\n    }\n\n    function handleClose(){\n        setOpen(false);\n    }\n    useEffect(() => {\n            db.collection('userManual').onSnapshot((snapshot) => {\n                const data = firebaseLooper(snapshot)\n                setManual(data)\n            })\n    }, [])\n\n    function handleSubmit(e){\n        e.preventDefault();\n        if(title?.trim().length=== 0 || desc?.trim().length === 0){\n          return setError(\"Empty strings are not accepted as valid strings ! Please try again with a valid string\")\n        }\n        const index = manual.length\n        db.collection('userManual').add({title, desc, urls, index}).then(() => {\n                        setTitle(\"\")\n                        setDesc('')\n                        setUrls([])\n                        setOpen(false)\n                        setImages([])\n        })\n    }\n    return (\n        <>\n            <div className=\"flex flex-col w-full items-center justify-center pt-6 lg:pt-15 f-f-l\">\n                <h1 className=\"text-2xl md:text-4xl xl:text-5xl font-black text-center text-indigo-700 md:leading-tight\">\n                   User Manual\n                </h1>\n            </div>\n            <div style={{display: 'flex', justifyContent: 'flex-end'}}>\n                <Button onClick={handleOpen} variant=\"contained\" >Add new</Button>\n            </div>\n            <div className=\"mx-auto container px-4 xl:px-0 pt-8 lg:pt-20\">\n                <div className=\"flex flex-col w-full items-center justify-center f-f-l\">\n\n                 \n                    {/* <ViewData title=\"Authentication\" desc=\"The application is protected by Firebase Authentication and all your data is stored in firestore. Login with your credentials\" url=\"https://firebasestorage.googleapis.com/v0/b/lyodata.appspot.com/o/userManual%2FScreenshot%202021-07-26%20at%2011.13.51%20AM.png?alt=media&token=d0c80dd4-0b6f-42e5-881d-77df2fd7c986\" />\n                    <ViewData title=\"Dashboard\" desc=\"This is the page you enter after login. You'll find an overview of all the data available in the application.\" url=\"https://firebasestorage.googleapis.com/v0/b/lyodata.appspot.com/o/userManual%2FScreenshot%202021-07-26%20at%2011.16.47%20AM.png?alt=media&token=abe4d7e4-c377-4211-9a8b-097a82e83b2b\"/>\n                    <ViewData title=\"ADD Details \" desc={`Add any data by clicking on the \"Add __\" Button and filling in a form like the given.`} url=\"https://firebasestorage.googleapis.com/v0/b/lyodata.appspot.com/o/userManual%2Fadd-content.PNG?alt=media&token=8d07d40b-5cad-4f7a-b1db-935820402506\"/>\n                    <ViewData title=\"Update Details \" desc={`Update any data by clicking the \"Pen\" icon available on any component and changing the necessary fields`} url=\"https://firebasestorage.googleapis.com/v0/b/lyodata.appspot.com/o/userManual%2Fedit-content.PNG?alt=media&token=701f2d23-1875-491a-8556-bee3973f8c8d\"/>\n                    <ViewData title=\"Delete Data \" desc={`Delete any data by clicking on \"delete\" icon available on any component which will give you a warning like this `} url=\"https://firebasestorage.googleapis.com/v0/b/lyodata.appspot.com/o/userManual%2Fdel.PNG?alt=media&token=b3b38f8e-3645-4ef7-b21b-3541c4f9243e\"/>\n                    <ViewData title=\"Machines\" desc={`From sidebar you have \"Machines\" menu which is the root document of all the available data in the application`} url=\"https://firebasestorage.googleapis.com/v0/b/lyodata.appspot.com/o/userManual%2Fmachines.png?alt=media&token=5b9e435b-1e56-4f8c-a91b-8cd71fdb1616\"/>\n                    <ViewData title=\"File Manager\" desc={\"A CMS to manage OR store files for references - All formats supported \"} url=\"https://firebasestorage.googleapis.com/v0/b/lyodata.appspot.com/o/userManual%2Ffile-manager.PNG?alt=media&token=1a9e3519-6f63-412b-b680-54903316ab05\"/>\n                    <ViewData title=\"Users\" desc={`From sidebar you have Users menu where \"Admins\" can change certain data of an authenticated user\"`} url=\"https://firebasestorage.googleapis.com/v0/b/lyodata.appspot.com/o/userManual%2Fusers.PNG?alt=media&token=103a884a-57ca-4c8c-bbe1-9f47f0eb333a\"/>\n                    <ViewData title=\"Account\" desc={`from Sidebar you have Accounts menu where you can change your authentication credentials like Email Password and Avatar`} url=\"https://firebasestorage.googleapis.com/v0/b/lyodata.appspot.com/o/userManual%2Facco.PNG?alt=media&token=a7acef9d-3524-487f-ba16-a4307d6c27c4\"/> */}\n                    {\n                        manual.map((data) => (\n                            <ViewData d_id={data.id} key={data.id} title={data.title} desc={data.desc} images={data.urls} />\n                        ))\n                    }\n                </div>\n\n                <Dialog fullWidth open={open} onClose={handleClose}>\n                    <Toolbar>\n                        <Button onClick={handleClose}>Close</Button>\n                    </Toolbar>\n                    <DialogContent>\n                      {error && <Alert severity='error'>{error}</Alert>}\n                        <form onSubmit={handleSubmit}>\n                             <Typography variant='h1' align='center' gutterBottom>Add Manual Data</Typography>\n                        <TextField required value={title} label='Title' onChange={(e) => setTitle(e.target.value)} style={{marginBottom: '3%'}} variant='outlined' fullWidth/>\n                        <TextField required value={desc} label=\"Description\" onChange={(e) => setDesc(e.target.value)}style={{marginBottom: '3%'}} rows={4} multiline variant='outlined' fullWidth/>\n                        <input multiple onChange={handleChange} style={{marginBottom: '3%'}} type=\"file\" variant='outlined' fullWidth/>\n                        <Button onClick={handleUpload} variant='contained' color=\"primary\" disabled={title === '' || desc === ''} fullWidth >Add </Button>\n                        <FormHelperText>Please enter above details to unblock</FormHelperText>\n                        <Dialog fullWidth onClose={() => setActivate(!activate)} open={activate}>\n                    <DialogContent>\n                        <Alert severity=\"success\">New Data has been added . To confirm please click on \"Confirm\"</Alert>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button  onClick={(e)=> {handleSubmit(e);\n                        setActivate(!activate)\n                        \n                        }\n                        } variant=\"contained\" style={{background: 'green', color: 'white'}}>Confirm</Button>\n                    </DialogActions>\n                </Dialog>\n                        </form>\n                       \n                        <br />\n     \n      <br />\n      {urls.map((url, i) => (\n        <img\n          key={i}\n          style={{ width: \"500px\" }}\n          src={url || \"http://via.placeholder.com/300\"}\n          alt=\"firebase-image\"\n        />\n      ))}\n                    </DialogContent>\n                </Dialog>\n\n              \n            </div>\n        </>\n    );\n}\n\nexport default ManualView;\n"]},"metadata":{},"sourceType":"module"}