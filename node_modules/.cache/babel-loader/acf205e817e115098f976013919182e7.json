{"ast":null,"code":"var _jsxFileName = \"/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/components/ContentSidebar/DashboardNavbar.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from 'react';\nimport { Link as RouterLink, NavLink, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport VideoLabelIcon from '@material-ui/icons/VideoLabel';\nimport { AppBar, Avatar, Badge, Box, Button, Hidden, IconButton, Menu, MenuItem, Toolbar, Typography } from '@material-ui/core';\nimport { init } from \"ityped\";\nimport MenuIcon from '@material-ui/icons/Menu';\nimport NotificationsIcon from '@material-ui/icons/NotificationsOutlined';\nimport BuildIcon from '@material-ui/icons/Build';\nimport PhoneInTalkIcon from '@material-ui/icons/PhoneInTalk';\nimport AllOutIcon from '@material-ui/icons/AllOut';\nimport PhonelinkEraseIcon from '@material-ui/icons/PhonelinkErase';\nimport { useAuth } from '../context/AuthContext';\nimport { db } from '../../firebase';\nimport { firebaseLooper } from '../../utils/tools';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst useStyles = theme => ({\n  customBadge: {\n    backgroundColor: \"#00AFD7\",\n    color: \"white\"\n  }\n});\n\nconst DashboardNavbar = ({\n  avatar,\n  match,\n  onMobileNavOpen,\n  ...rest\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [anchorE1, setAnchorE1] = useState(null);\n  const {\n    currentUser\n  } = useAuth();\n  const [anchorE2, setAnchorE2] = useState(null);\n  const [notifications, setNotifications] = useState([]);\n  const [videoData, setVideoData] = useState([]);\n  const [status, setStatus] = useState('');\n  const [userData, setUserData] = useState([]);\n  const textRef = useRef();\n  const [machineData, setMachineData] = useState([]);\n  useEffect(() => {\n    if (currentUser) {\n      db.collection('users').where('email', '==', `${currentUser.email}`).onSnapshot(doc => {\n        const data = firebaseLooper(doc);\n        setUserData(data[0]);\n        console.log(data[0]);\n      });\n      db.collection(\"machineData\").doc(match.params.id).onSnapshot(snap => {\n        const data = snap.data();\n        setMachineData(data);\n      });\n    } else {\n      /*#__PURE__*/\n      _jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 8\n      }, this);\n    }\n\n    if (currentUser) {\n      db.collection('notifications').orderBy('index', 'desc').onSnapshot(doc => {\n        const data = firebaseLooper(doc);\n        setNotifications(data);\n      });\n      db.collection('videoCallData').where('receiverId', '==', `${currentUser.email}`).onSnapshot(doc => {\n        const data = firebaseLooper(doc);\n        data.sort(function (a, b) {\n          return b.index - a.index;\n        });\n        setVideoData(data);\n      });\n    } else {\n      /*#__PURE__*/\n      _jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }, this);\n    }\n  }, []);\n\n  function updateStatus(id) {\n    db.collection('videoCallData').doc(id).update({\n      status: 'ended'\n    });\n  }\n\n  function getStatus(status, id, d_id) {\n    if (status === 'waiting') {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => updateStatus(d_id),\n        href: `/video-call/${id}`,\n        style: {\n          color: 'darkseagreen'\n        },\n        children: [/*#__PURE__*/_jsxDEV(PhoneInTalkIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 116\n        }, this), \"Join\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (status === 'accepted') {\n      return /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Accepted \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (status === 'ended') {\n      return /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Ended \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 14\n      }, this);\n    }\n  }\n\n  function handleOpen(e) {\n    setAnchorE1(e.currentTarget);\n  }\n\n  function handleVideoOpen(e) {\n    setAnchorE2(e.currentTarget);\n  }\n\n  function handleVideoClose(e) {\n    setAnchorE2(null);\n  }\n\n  function handleClose() {\n    setAnchorE1(null);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      style: {\n        backgroundColor: \"white\"\n      },\n      elevation: 1,\n      ...rest,\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          style: {\n            marginLeft: 256\n          },\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            align: \"left\",\n            variant: \"h3\",\n            style: {\n              color: 'black'\n            },\n            children: [\"Machine Name : \", machineData.title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          style: {\n            flexGrow: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n          smDown: true,\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            onClick: handleVideoOpen,\n            children: /*#__PURE__*/_jsxDEV(Badge, {\n              badgeContent: videoData.length,\n              color: \"secondary\",\n              anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'left'\n              },\n              variant: \"dot\",\n              children: /*#__PURE__*/_jsxDEV(VideoLabelIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            component: NavLink,\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            to: \"/account\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-2 text-sm font-medium\",\n              children: [userData.firstName, \" \", userData.lastName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Avatar, {\n              style: {\n                marginLeft: '10px'\n              },\n              src: userData.url\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n          lgUp: true,\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            onClick: handleVideoOpen,\n            children: /*#__PURE__*/_jsxDEV(Badge, {\n              badgeContent: videoData.length,\n              color: \"secondary\",\n              variant: \"dot\",\n              anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'left'\n              },\n              children: /*#__PURE__*/_jsxDEV(VideoLabelIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            \"aria-controls\": \"simple-menu\",\n            \"aria-haspopup\": \"true\",\n            href: \"/account\",\n            children: /*#__PURE__*/_jsxDEV(Avatar, {\n              src: userData.url\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"default\",\n            onClick: onMobileNavOpen,\n            children: /*#__PURE__*/_jsxDEV(MenuIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      anchorEl: anchorE1,\n      id: \"simple-menu\",\n      keepMounted: true,\n      open: Boolean(anchorE1),\n      onClose: handleVideoClose,\n      children: [notifications.slice(0, 6).map(data => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          children: [data.notification, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          href: `/${data.link}`,\n          children: [\"Open \", /*#__PURE__*/_jsxDEV(AllOutIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 63\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)]\n      }, data.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleClose,\n        color: \"secondary\",\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      anchorEl: anchorE2,\n      id: \"simple-menu\",\n      keepMounted: true,\n      open: Boolean(anchorE2),\n      onClose: handleClose,\n      children: [videoData.map(data => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: handleVideoClose,\n          children: [data.callerId, \" \", data.message, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: getStatus(data.status, data.call_id, data.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)]\n      }, data.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleVideoClose,\n        color: \"secondary\",\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true);\n};\n\n_s(DashboardNavbar, \"tN6puVtE571giLllj5s54WyMhL4=\", false, function () {\n  return [useStyles, useAuth];\n});\n\n_c = DashboardNavbar;\nDashboardNavbar.propTypes = {\n  onMobileNavOpen: PropTypes.func\n};\nexport default DashboardNavbar;\n\nvar _c;\n\n$RefreshReg$(_c, \"DashboardNavbar\");","map":{"version":3,"sources":["/Users/suryanandsunil/Desktop/proto1-arizon/lyo-test/src/components/ContentSidebar/DashboardNavbar.jsx"],"names":["useEffect","useRef","useState","Link","RouterLink","NavLink","Redirect","PropTypes","VideoLabelIcon","AppBar","Avatar","Badge","Box","Button","Hidden","IconButton","Menu","MenuItem","Toolbar","Typography","init","MenuIcon","NotificationsIcon","BuildIcon","PhoneInTalkIcon","AllOutIcon","PhonelinkEraseIcon","useAuth","db","firebaseLooper","useStyles","theme","customBadge","backgroundColor","color","DashboardNavbar","avatar","match","onMobileNavOpen","rest","classes","open","setOpen","anchorE1","setAnchorE1","currentUser","anchorE2","setAnchorE2","notifications","setNotifications","videoData","setVideoData","status","setStatus","userData","setUserData","textRef","machineData","setMachineData","collection","where","email","onSnapshot","doc","data","console","log","params","id","snap","orderBy","sort","a","b","index","updateStatus","update","getStatus","d_id","handleOpen","e","currentTarget","handleVideoOpen","handleVideoClose","handleClose","marginLeft","title","flexGrow","length","vertical","horizontal","firstName","lastName","url","Boolean","slice","map","display","justifyContent","notification","link","callerId","message","call_id","propTypes","func"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { Link as RouterLink, NavLink, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport VideoLabelIcon from '@material-ui/icons/VideoLabel';\nimport {\n  AppBar,\n  Avatar,\n  Badge,\n  Box,\n  Button,\n  Hidden,\n  IconButton,\n  Menu,\n  MenuItem,\n  Toolbar,\n  Typography\n} from '@material-ui/core';\nimport { init } from \"ityped\";\nimport MenuIcon from '@material-ui/icons/Menu';\nimport NotificationsIcon from '@material-ui/icons/NotificationsOutlined';\nimport BuildIcon from '@material-ui/icons/Build';\n\nimport PhoneInTalkIcon from '@material-ui/icons/PhoneInTalk';\n\nimport AllOutIcon from '@material-ui/icons/AllOut';\nimport PhonelinkEraseIcon from '@material-ui/icons/PhonelinkErase';\nimport { useAuth } from '../context/AuthContext';\nimport { db } from '../../firebase';\nimport { firebaseLooper } from '../../utils/tools';\n\n\nconst useStyles = theme => ({\n \n  customBadge: {\n    backgroundColor: \"#00AFD7\",\n    color: \"white\"\n  }\n});\n\nconst DashboardNavbar = ({avatar, match, onMobileNavOpen, ...rest }) => {\n  const classes = useStyles()\n const [open, setOpen] = useState(false)\n const [anchorE1, setAnchorE1] = useState(null)\n const {currentUser} = useAuth()\n  const [anchorE2, setAnchorE2] = useState(null)\n  const [notifications, setNotifications] = useState([])\n   const [videoData, setVideoData] = useState([])\n  const [status, setStatus] = useState('')\n  const [userData, setUserData] = useState([])\n  const textRef = useRef();\n  const [machineData, setMachineData] = useState([])\n  useEffect(() => {\n\n    if (currentUser){\n      db.collection('users').where('email', '==', `${currentUser.email}`).onSnapshot(doc => {\n      const data = firebaseLooper(doc)\n      setUserData(data[0])\n      console.log(data[0])\n\n    })\n    db.collection(\"machineData\").doc(match.params.id).onSnapshot(snap => {\n      const data = snap.data()\n      setMachineData(data)\n    })\n    }else {\n       <Redirect to='/login'/>\n    }\n      \n    \n    if(currentUser){\n       db.collection('notifications').orderBy('index', 'desc').onSnapshot(doc => {\n      const data = firebaseLooper(doc)\n      setNotifications(data)\n    })\n    db.collection('videoCallData').where('receiverId', '==', `${currentUser.email}`).onSnapshot(doc => {\n      const data = firebaseLooper(doc)\n       data.sort(function(a,b) {\n                return(b.index-a.index)\n            }) \n      setVideoData(data)\n    })\n    }else{\n      <Redirect to='/login'/>\n    }\n   \n   \n  }, [])\n\n  function updateStatus(id){\n    db.collection('videoCallData').doc(id).update({status: 'ended'})\n  }\n\n  function getStatus(status, id,d_id){\n    if(status === 'waiting'){\n      return(<Button onClick={() => updateStatus(d_id)} href={`/video-call/${id}`} style={{color: 'darkseagreen'}}><PhoneInTalkIcon/>Join</Button>)\n    }\n    if(status === 'accepted'){\n      return(<b>Accepted </b>)\n    }\n    if(status === 'ended'){\n      return(<b>Ended </b>)\n    }\n  }\n\n \n\n  function handleOpen(e){\n   \n    setAnchorE1(e.currentTarget)\n  }\n  function handleVideoOpen(e){\n    setAnchorE2(e.currentTarget)\n\n  }\n  function handleVideoClose(e){\n    setAnchorE2(null)\n\n  }\n  function handleClose(){\n    \n    setAnchorE1(null)\n  }\n\n  return (\n    <>\n    <AppBar\n\n    style={{backgroundColor: \"white\"}}\n      elevation={1}\n      {...rest}\n    >\n     \n      <Toolbar >\n        <Box style={{marginLeft: 256}}>\n          <Typography align='left' variant='h3' style={{color: 'black'}}>Machine Name : {machineData.title}</Typography>\n        </Box>\n        <Box style={{ flexGrow: 1 }} />\n        <Hidden smDown>\n          {/* <IconButton  aria-controls='simple-menu' aria-haspopup=\"true\" onClick={handleOpen} color=\"default\">\n            <Badge\n              badgeContent={notifications.length}\n              color=\"primary\"\n              variant=\"dot\"\n            >\n              \n              <NotificationsIcon />\n            </Badge>\n         \n          </IconButton> */}\n            <IconButton color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" onClick={handleVideoOpen} >\n            <Badge\n              badgeContent={videoData.length}\n              color=\"secondary\"\n              anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'left',\n            }}\n              variant=\"dot\"\n            >\n              <VideoLabelIcon />\n            </Badge>\n        \n          </IconButton>\n          <IconButton component={NavLink} color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" to='/account' >\n              <span className=\"ml-2 text-sm font-medium\">{userData.firstName} {userData.lastName}</span>\n              <Avatar style={{marginLeft: '10px'}} src={userData.url} />\n          \n          \n          </IconButton>\n        </Hidden>\n        <Hidden lgUp>\n          {/* <IconButton color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" onClick={handleOpen}>\n            <Badge\n              badgeContent={notifications.length}\n              color=\"primary\"\n              variant=\"dot\"\n            >\n              <NotificationsIcon />\n            </Badge>\n          \n          </IconButton> */}\n           <IconButton color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" onClick={handleVideoOpen} >\n            <Badge\n              badgeContent={videoData.length}\n              color=\"secondary\"\n              variant=\"dot\"\n              anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'left',\n            }}\n            >\n              <VideoLabelIcon />\n            </Badge>\n        \n          </IconButton>\n          <IconButton color=\"default\" aria-controls='simple-menu' aria-haspopup=\"true\" href='/account' >\n           \n              <Avatar src={userData.url} />\n          \n          \n          </IconButton>\n          <IconButton\n           color=\"default\"\n            onClick={onMobileNavOpen}\n           \n          >\n            <MenuIcon />\n          </IconButton>\n          \n        </Hidden>\n      </Toolbar>\n    </AppBar>\n       <Menu\n       anchorEl={anchorE1}\n        id=\"simple-menu\"\n        keepMounted\n        open={Boolean(anchorE1)}\n        onClose={handleVideoClose}\n      >{\n        notifications.slice(0, 6).map(data => (\n          \n          <div style={{display: 'flex', justifyContent: 'space-between'}} key={data.id}>\n          <MenuItem>{data.notification} </MenuItem>\n          <Button color=\"primary\" href={`/${data.link}`}>Open <AllOutIcon/></Button>\n          </div>\n        ))\n      }\n        <Button  onClick={handleClose} color='secondary'>Close</Button>\n      </Menu>\n       <Menu\n       anchorEl={anchorE2}\n        id=\"simple-menu\"\n        keepMounted\n        open={Boolean(anchorE2)}\n        onClose={handleClose}\n      >{\n        videoData.map(data => (\n          <div style={{display: 'flex', justifyContent: 'space-between'}} key={data.id}>\n          <MenuItem onClick={handleVideoClose}>{data.callerId} {data.message} </MenuItem>\n          <div >{getStatus(data.status, data.call_id, data.id)}</div>\n         \n          </div>\n        ))\n      }\n         <Button  onClick={handleVideoClose} color='secondary'>Close</Button>\n      </Menu>\n    </>\n   \n  );\n};\n\nDashboardNavbar.propTypes = {\n  onMobileNavOpen: PropTypes.func\n};\n\nexport default DashboardNavbar"]},"metadata":{},"sourceType":"module"}